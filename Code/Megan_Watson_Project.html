<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Sean Vieau">
<meta name="dcterms.date" content="2024-10-13">

<title>Data Checking - Statistical Consulting</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Megan_Watson_Project_files/libs/clipboard/clipboard.min.js"></script>
<script src="Megan_Watson_Project_files/libs/quarto-html/quarto.js"></script>
<script src="Megan_Watson_Project_files/libs/quarto-html/popper.min.js"></script>
<script src="Megan_Watson_Project_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Megan_Watson_Project_files/libs/quarto-html/anchor.min.js"></script>
<link href="Megan_Watson_Project_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Megan_Watson_Project_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Megan_Watson_Project_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Megan_Watson_Project_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Megan_Watson_Project_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="Megan_Watson_Project_files/libs/kePrint-0.0.1/kePrint.js"></script>

<link href="Megan_Watson_Project_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">

<link href="Megan_Watson_Project_files/libs/table1-1.0/table1_defaults.css" rel="stylesheet">


  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#scope-of-work-sow-agreement" id="toc-scope-of-work-sow-agreement" class="nav-link" data-scroll-target="#scope-of-work-sow-agreement">Scope of Work (SOW) Agreement</a>
  <ul class="collapse">
  <li><a href="#general-information" id="toc-general-information" class="nav-link" data-scroll-target="#general-information">General Information</a></li>
  <li><a href="#project-description" id="toc-project-description" class="nav-link" data-scroll-target="#project-description">Project Description</a>
  <ul class="collapse">
  <li><a href="#background" id="toc-background" class="nav-link" data-scroll-target="#background">Background</a></li>
  <li><a href="#study-design" id="toc-study-design" class="nav-link" data-scroll-target="#study-design">Study Design</a></li>
  <li><a href="#description-of-the-data" id="toc-description-of-the-data" class="nav-link" data-scroll-target="#description-of-the-data">Description of the Data</a></li>
  <li><a href="#anticipated-sample-size-study-population" id="toc-anticipated-sample-size-study-population" class="nav-link" data-scroll-target="#anticipated-sample-size-study-population">Anticipated Sample Size / Study Population</a></li>
  <li><a href="#hypothesis" id="toc-hypothesis" class="nav-link" data-scroll-target="#hypothesis">Hypothesis</a></li>
  <li><a href="#analysis-plan-sketch" id="toc-analysis-plan-sketch" class="nav-link" data-scroll-target="#analysis-plan-sketch">Analysis Plan (Sketch)</a></li>
  </ul></li>
  <li><a href="#project-deliverables" id="toc-project-deliverables" class="nav-link" data-scroll-target="#project-deliverables">Project Deliverables</a></li>
  </ul></li>
  <li><a href="#data-preparation" id="toc-data-preparation" class="nav-link" data-scroll-target="#data-preparation">Data Preparation</a>
  <ul class="collapse">
  <li><a href="#missingness" id="toc-missingness" class="nav-link" data-scroll-target="#missingness">Missingness</a></li>
  <li><a href="#data-quality-check" id="toc-data-quality-check" class="nav-link" data-scroll-target="#data-quality-check">Data Quality Check</a></li>
  <li><a href="#Filtering" id="toc-Filtering" class="nav-link" data-scroll-target="#Filtering">Filtering</a></li>
  <li><a href="#Clean" id="toc-Clean" class="nav-link" data-scroll-target="#Clean">Data Cleaning</a></li>
  <li><a href="#Creation" id="toc-Creation" class="nav-link" data-scroll-target="#Creation">Variable Creation</a></li>
  </ul></li>
  <li><a href="#univariate-distributions" id="toc-univariate-distributions" class="nav-link" data-scroll-target="#univariate-distributions">Univariate Distributions</a>
  <ul class="collapse">
  <li><a href="#Outcome_Variables" id="toc-Outcome_Variables" class="nav-link" data-scroll-target="#Outcome_Variables">Outcome Variables</a></li>
  </ul></li>
  <li><a href="#table-1" id="toc-table-1" class="nav-link" data-scroll-target="#table-1">Table 1</a></li>
  <li><a href="#correlation-matrix" id="toc-correlation-matrix" class="nav-link" data-scroll-target="#correlation-matrix">Correlation Matrix</a></li>
  <li><a href="#Bi" id="toc-Bi" class="nav-link" data-scroll-target="#Bi">Bivariate Comparisons</a></li>
  <li><a href="#seasonality" id="toc-seasonality" class="nav-link" data-scroll-target="#seasonality">Seasonality</a></li>
  <li><a href="#Main_Goals" id="toc-Main_Goals" class="nav-link" data-scroll-target="#Main_Goals">Analysis: Main Goals</a>
  <ul class="collapse">
  <li><a href="#goal-1-increase-frequency-of-pt-visits" id="toc-goal-1-increase-frequency-of-pt-visits" class="nav-link" data-scroll-target="#goal-1-increase-frequency-of-pt-visits">Goal 1: Increase Frequency of PT Visits</a></li>
  <li><a href="#Goal_Two" id="toc-Goal_Two" class="nav-link" data-scroll-target="#Goal_Two">Goal 2: Decrease Time from Admit to Therapy</a></li>
  <li><a href="#Goal_3" id="toc-Goal_3" class="nav-link" data-scroll-target="#Goal_3">Goal 3: Increase Percentage of Admissions Receiving Physical Therapy</a></li>
  <li><a href="#visualization-2" id="toc-visualization-2" class="nav-link" data-scroll-target="#visualization-2">Visualization</a></li>
  <li><a href="#analysis-2" id="toc-analysis-2" class="nav-link" data-scroll-target="#analysis-2">Analysis</a></li>
  <li><a href="#interpretation-2" id="toc-interpretation-2" class="nav-link" data-scroll-target="#interpretation-2">Interpretation</a></li>
  <li><a href="#summary-13" id="toc-summary-13" class="nav-link" data-scroll-target="#summary-13">Summary</a></li>
  </ul></li>
  <li><a href="#some-rough-plotting-will-change" id="toc-some-rough-plotting-will-change" class="nav-link" data-scroll-target="#some-rough-plotting-will-change">Some Rough Plotting, will change</a></li>
  <li><a href="#analysis-primary-outcome-variables" id="toc-analysis-primary-outcome-variables" class="nav-link" data-scroll-target="#analysis-primary-outcome-variables">Analysis: Primary Outcome Variables</a>
  <ul class="collapse">
  <li><a href="#micu-los" id="toc-micu-los" class="nav-link" data-scroll-target="#micu-los">MICU LOS</a></li>
  <li><a href="#mv-time" id="toc-mv-time" class="nav-link" data-scroll-target="#mv-time">MV Time</a></li>
  </ul></li>
  <li><a href="#plotting" id="toc-plotting" class="nav-link" data-scroll-target="#plotting">Plotting</a>
  <ul class="collapse">
  <li><a href="#average-micu-los" id="toc-average-micu-los" class="nav-link" data-scroll-target="#average-micu-los">Average MICU LOS</a></li>
  </ul></li>
  <li><a href="#bonus" id="toc-bonus" class="nav-link" data-scroll-target="#bonus">Bonus</a>
  <ul class="collapse">
  <li><a href="#check-for-repeat-admissions" id="toc-check-for-repeat-admissions" class="nav-link" data-scroll-target="#check-for-repeat-admissions">Check for Repeat Admissions</a></li>
  </ul></li>
  <li><a href="#to-do" id="toc-to-do" class="nav-link" data-scroll-target="#to-do">To Do</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Checking - Statistical Consulting</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Sean Vieau </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 13, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>This is the Quarto markdown for the live consultation project in BIOS 6621: Statistical Consulting.</p>
<p>This is a research project encompassing the entire data analysis pipeline, from initial consultation to scope of work writing, execution of statistical analysis, and completion of project deliverables.</p>
</section>
<section id="scope-of-work-sow-agreement" class="level1">
<h1>Scope of Work (SOW) Agreement</h1>
<section id="general-information" class="level2">
<h2 class="anchored" data-anchor-id="general-information">General Information</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Investigator</strong></td>
<td>Megan Watson</td>
<td><strong>Date</strong></td>
<td>September 30, 2024</td>
</tr>
<tr class="even">
<td><strong>Project Title</strong></td>
<td>Quality Improvement into Standard Practice: Persistent Practice Changes and Decreased Length of Stay for 3 years following a Medical ICU Physical Therapy Quality Improvement Project</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="project-description" class="level2">
<h2 class="anchored" data-anchor-id="project-description">Project Description</h2>
<section id="background" class="level3">
<h3 class="anchored" data-anchor-id="background">Background</h3>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The objective of this study is to assess the impact of a MICU physical therapy (PT) quality improvement (QI) project on physical therapist practice, and quantify the changes in length of stay (LOS) and mechanical ventilation (MV) time. The goals of the QI Initiative were to increase percentage of MICU admissions receiving PT, decrease time from MICU admission to first PT, and increase the frequency of PT visits. The main question the researcher came to us with was: how to correctly model the longitudinal data in the study?</p>
</section>
<section id="study-design" class="level3">
<h3 class="anchored" data-anchor-id="study-design">Study Design</h3>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; This was a retrospective cohort study, comparing 3 main time periods: Pre-QI Initiative (before April 2015), During QI Initiative (April 2015-Dec 2015), and After-QI Initiative (Jan 2016 and later). The QI initiative was deployed during the 9-month period between April 2015 and December 2015, during which time there were education and staffing changes. Patients were stratified as either having mechanical ventilation or not having mechanical ventilation. The primary outcomes of interest were MICU LOS and time on MV. Secondary outcomes of interest were the non-ICU LOS, total hospital LOS, and discharge location.</p>
</section>
<section id="description-of-the-data" class="level3">
<h3 class="anchored" data-anchor-id="description-of-the-data">Description of the Data</h3>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Data was received as a de-identified .csv. Data points consist of: Admit and Discharge Time, PT Consult Time, Admit to Consult Time, First Therapy Time, Consult to Therapy Time, Admit to Therapy Time, Total Therapy Visits, Days with Therapy Visits, Average, min, and Max Therapy Length, Admit and Discharge Date/Time, Total MV Days, Hospital LOS, Patient Age, Sex, “Problem List”, and Codes (presumably ICD9/10).</p>
</section>
<section id="anticipated-sample-size-study-population" class="level3">
<h3 class="anchored" data-anchor-id="anticipated-sample-size-study-population">Anticipated Sample Size / Study Population</h3>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The sample size is N = ~3000-4000, consisting of patients admitted to the MICU with a LOS between 2 and 30 days (I.e. exclude &lt; 2 days or &gt; 30 days). This was a single site study performed here at Colorado University.</p>
</section>
<section id="hypothesis" class="level3">
<h3 class="anchored" data-anchor-id="hypothesis">Hypothesis</h3>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The hypothesis for the study was that LOS and time on MV would decrease when comparing the pre- and intra-initiative time periods, and when comparing the pre- and post-initiative time periods. Clinical significance for this outcome is considered as a 1-2 day change in LOS. The intended end product of this project is a publication in a PT journal.</p>
</section>
<section id="analysis-plan-sketch" class="level3">
<h3 class="anchored" data-anchor-id="analysis-plan-sketch">Analysis Plan (Sketch)</h3>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Data should first be examined for missingness, as this has not been performed. Similarly, repeat MICU admissions should be explored and controlled for to ensure independence of observations. Death during MICU stay should also be examined and adjusted for if needed. The analysis plan discussed was to utilize splines to capture the trajectory of LOS or time on MV over time by fitting smooth curves to the data. Linear contrasts should be performed to assess if there is a significant difference in LOS or time on MV when comparing two timepoints (i.e.&nbsp;pre- and intra-, pre- and post- , and post- and intra-QI Initiative. Supplementary analyses should be performed to assess secondary outcomes of interest of non-ICU LOS and total hospital LOS.</p>
</section>
</section>
<section id="project-deliverables" class="level2">
<h2 class="anchored" data-anchor-id="project-deliverables">Project Deliverables</h2>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; At this stage, Megan has only asked for insight into what method to use to account for variance in time for her analysis. There are currently no other deliverables.</p>
<p><strong>Timeline / Deadlines</strong></p>
<p>At this time, Megan has not asked for data analysis efforts from us.</p>
<p>Should this change, the anticipated project start date will be 1 week after our next meeting with her, where revisions to the Comprehensive Analysis Report are also expected to be completed. &nbsp;The assigned analysts will reach out to the investigator to confirm the project timeframe and the project start date may be altered if necessary. 2 weeks will be allowed for initial data analysis by the assigned analyst.</p>
<p>A follow-up meeting is to occur no later than <strong>1 month after the next meeting with Megan.</strong> During the follow-up meeting, the project team will discuss and preliminary results of the analysis, mockup the desired tables and figures (1-2 descriptive tables, 1-2 analysis results tables and up to 4 graphs), and discuss next steps. During the follow-up meeting, the team will establish a meeting schedule for the remainder of the project.&nbsp;</p>
<p><strong>Estimated Cost</strong></p>
<p>This represents our best estimate of the effort needed to complete the project. Should the scope of work change substantially, the analyst(s) will discuss changes with the investigator and issue a new or amended project agreement.</p>
<table class="caption-top table">
<tbody>
<tr class="odd">
<td></td>
<td><strong>Effort</strong></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><strong>Months</strong></td>
<td>PhD Faculty</td>
<td>Master’s Faculty</td>
<td>Student</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><strong>1</strong></td>
<td>20%</td>
<td>0%</td>
<td>80%</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td><strong>Total Costs</strong></td>
<td><strong>’Bout Tree Fiddy</strong></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="data-preparation" class="level1">
<h1>Data Preparation</h1>
<p>Let’s begin by loading our libraries</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(naniar) <span class="co"># Used to visualize missing data</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra) <span class="co"># Used for pretty printing (kable_styling)</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(table1) <span class="co"># Used to make Table 1</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gridExtra) <span class="co"># Used to plot ggplots side by side</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(bestNormalize) <span class="co"># Used to find best transformation for a variable</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(corrplot) <span class="co"># Used for correlation matrix</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lmtest) <span class="co"># Used for likelihood ratio test</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'lmtest' was built under R version 4.4.2</code></pre>
</div>
</div>
<p>Import the data set.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"C:/Users/sviea/Documents/Statistical Consulting/Vieau_Project_01/Data Raw/MICUPT_Deidentify.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
Rows: 13109 Columns: 25
── Column specification
──────────────────────────────────────────────────────── Delimiter: "," chr
(9): SEX, PROBLEM LIST DX CODES, PROBLEM LIST DX NAMES, DISCH_DISP, DEP... dbl
(16): ...1, MV_Total, HOSPITAL LOS, ADMIT TO CONSULT, CONSULT TO TREAT, ...
ℹ Use `spec()` to retrieve the full column specification for this data. ℹ
Specify the column types or set `show_col_types = FALSE` to quiet this message.
• `` -&gt; `...1`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(data)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">"id"</span> <span class="co"># Rename the wonky id column</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And take a look at our data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 13,109
Columns: 25
$ id                                    &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 1…
$ SEX                                   &lt;chr&gt; "M", "F", "F", "F", "F", "F", "M…
$ MV_Total                              &lt;dbl&gt; 30, NA, 13, NA, 16, NA, NA, NA, …
$ `HOSPITAL LOS`                        &lt;dbl&gt; 1827, 767, 610, 839, 1109, 549, …
$ `PROBLEM LIST DX CODES`               &lt;chr&gt; "291.81, 305.00, 311, 4", "287.5…
$ `PROBLEM LIST DX NAMES`               &lt;chr&gt; "AKI (acute kidney injury) (HC c…
$ DISCH_DISP                            &lt;chr&gt; "Skilled Nursing Facility", "Hom…
$ `DEPT BEFORE Unit`                    &lt;chr&gt; "PRE-ADMISSION", "PRE-ADMISSION"…
$ `DEPT AFTER Unit`                     &lt;chr&gt; "CARDIOLOGY UNIT", "AMC PULM UNI…
$ `ADMIT TO CONSULT`                    &lt;dbl&gt; 576, 451, 313, 403, 386, 17, NA,…
$ `CONSULT TO TREAT`                    &lt;dbl&gt; 97, NA, 97, 28, 19, NA, NA, NA, …
$ `ADMIT TO TREAT`                      &lt;dbl&gt; 673, NA, 410, 431, 405, NA, NA, …
$ `TOTAL THERAPY VISITS`                &lt;dbl&gt; 8, 0, 2, 2, 4, 0, 0, 0, 0, 0, 2,…
$ Unit_LOS                              &lt;dbl&gt; 1394, 487, 610, 483, 606, 25, 39…
$ `DAYS WITH THERAPY VISITS`            &lt;dbl&gt; 8, 0, 2, 2, 4, 0, 0, 0, 0, 0, 2,…
$ `PERCENT OF DAYS WITH THERAPY VISITS` &lt;dbl&gt; 13.79, 0.00, 8.00, 10.00, 16.00,…
$ `AVG THERAPY LENGTH`                  &lt;dbl&gt; 22, 0, 27, 17, 25, 0, 0, 0, 0, 0…
$ `MAX THERAPY LENGTH`                  &lt;dbl&gt; 30, 0, 30, 20, 30, 0, 0, 0, 0, 0…
$ `MIN THERAPY LENGTH`                  &lt;dbl&gt; 15, 0, 25, 15, 20, 0, 0, 0, 0, 0…
$ `ACTUAL DAYS POST MICU`               &lt;dbl&gt; 18, 12, 0, 15, 17, 4, 0, 8, 2, 5…
$ `PT or OT VISIT DAYS POST MICU`       &lt;dbl&gt; 5, 3, 0, 1, 9, 0, 0, 3, 0, 3, 2,…
$ `PERCENT POST ICU DAYS THERAPY`       &lt;dbl&gt; 27.78, 25.00, 0.00, 6.67, 52.94,…
$ Age_Range                             &lt;chr&gt; "60-69", "40-49", "40-49", "18-3…
$ Admit_MonthYear                       &lt;chr&gt; "2011-08", "2011-08", "2011-08",…
$ Age_Quartile                          &lt;chr&gt; "57-66", "43-56", "43-56", "14-4…</code></pre>
</div>
</div>
<p>It looks like everything is formatted correctly for the most part.</p>
<p>Percents are coded as doubles.</p>
<p><code>Admit_MonthYear</code> is a string (e.g.&nbsp;“2011-08”) that we may have to process in order to create variables for the 3 main time periods: Pre-QI Initiative (before April 2015), During QI Initiative (April 2015-Dec 2015), and After-QI Initiative (Jan 2016 and later).</p>
<p>Let’s take a look at our data for good measure.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pretty print header of wideform data</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(data), <span class="at">format =</span> <span class="st">"html"</span>, <span class="at">full_width =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">SEX</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MV_Total</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">HOSPITAL LOS</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">PROBLEM LIST DX CODES</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">PROBLEM LIST DX NAMES</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">DISCH_DISP</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">DEPT BEFORE Unit</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">DEPT AFTER Unit</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ADMIT TO CONSULT</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">CONSULT TO TREAT</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ADMIT TO TREAT</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">TOTAL THERAPY VISITS</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Unit_LOS</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">DAYS WITH THERAPY VISITS</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">PERCENT OF DAYS WITH THERAPY VISITS</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">AVG THERAPY LENGTH</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MAX THERAPY LENGTH</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MIN THERAPY LENGTH</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ACTUAL DAYS POST MICU</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">PT or OT VISIT DAYS POST MICU</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">PERCENT POST ICU DAYS THERAPY</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Age_Range</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Admit_MonthYear</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Age_Quartile</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">30</td>
<td style="text-align: right;">1827</td>
<td style="text-align: left;">291.81, 305.00, 311, 4</td>
<td style="text-align: left;">AKI (acute kidney injury) (HC c</td>
<td style="text-align: left;">Skilled Nursing Facility</td>
<td style="text-align: left;">PRE-ADMISSION</td>
<td style="text-align: left;">CARDIOLOGY UNIT</td>
<td style="text-align: right;">576</td>
<td style="text-align: right;">97</td>
<td style="text-align: right;">673</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">1394</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">13.79</td>
<td style="text-align: right;">22</td>
<td style="text-align: right;">30</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">27.78</td>
<td style="text-align: left;">60-69</td>
<td style="text-align: left;">2011-08</td>
<td style="text-align: left;">57-66</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">767</td>
<td style="text-align: left;">287.5, 416.8, 584.9, 5</td>
<td style="text-align: left;">Acute renal failure (HC code),</td>
<td style="text-align: left;">Home-Health Care Svc</td>
<td style="text-align: left;">PRE-ADMISSION</td>
<td style="text-align: left;">AMC PULM UNIT</td>
<td style="text-align: right;">451</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">487</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">25.00</td>
<td style="text-align: left;">40-49</td>
<td style="text-align: left;">2011-08</td>
<td style="text-align: left;">43-56</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">610</td>
<td style="text-align: left;">078.5, 284.1, 288.4, 5</td>
<td style="text-align: left;">CMV (cytomegalovirus infectio</td>
<td style="text-align: left;">Expired</td>
<td style="text-align: left;">PRE-ADMISSION</td>
<td style="text-align: left;">POST-DISCHARGE</td>
<td style="text-align: right;">313</td>
<td style="text-align: right;">97</td>
<td style="text-align: right;">410</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">610</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">8.00</td>
<td style="text-align: right;">27</td>
<td style="text-align: right;">30</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">40-49</td>
<td style="text-align: left;">2011-08</td>
<td style="text-align: left;">43-56</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">839</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Long Term Care</td>
<td style="text-align: left;">PRE-ADMISSION</td>
<td style="text-align: left;">CARDIOLOGY UNIT</td>
<td style="text-align: right;">403</td>
<td style="text-align: right;">28</td>
<td style="text-align: right;">431</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">483</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">6.67</td>
<td style="text-align: left;">18-39</td>
<td style="text-align: left;">2011-08</td>
<td style="text-align: left;">14-42</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">1109</td>
<td style="text-align: left;">250.00, 250.60, 356.9</td>
<td style="text-align: left;">Cellulitis, Diabetes mellitus (H</td>
<td style="text-align: left;">Skilled Nursing Facility</td>
<td style="text-align: left;">OLD AMC CARD ICU</td>
<td style="text-align: left;">CARDIOLOGY UNIT</td>
<td style="text-align: right;">386</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">405</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">606</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">16.00</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">30</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">52.94</td>
<td style="text-align: left;">40-49</td>
<td style="text-align: left;">2011-08</td>
<td style="text-align: left;">43-56</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">549</td>
<td style="text-align: left;">041.04, 244.9, 288.60</td>
<td style="text-align: left;">AKI (acute kidney injury) (HC c</td>
<td style="text-align: left;">Hospice/Medical Facility</td>
<td style="text-align: left;">AMC MED SPEC UNIT</td>
<td style="text-align: left;">CARDIOLOGY UNIT</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">40-49</td>
<td style="text-align: left;">2011-08</td>
<td style="text-align: left;">14-42</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Looks good.</p>
<section id="missingness" class="level2">
<h2 class="anchored" data-anchor-id="missingness">Missingness</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gg_miss_var</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>We are missing the most data in <code>MV_Total</code> , followed by <code>CONSULT TO TREAT</code>, <code>ADMIT TO TREAT</code>, and <code>PROBLEM LIST DX CODES</code>. Missingness does not seem to be an issue for the rest of the variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">vis_miss</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Immediately concerning is the 65% missing data on <code>MV_TOTAL</code>, the variable for total time on mechanical ventilation, which happens to me a main outcome of interest.</p>
<p><code>CONSULT TO TREAT</code> has 56% missing and <code>ADMIT TO TREAT</code> has 55% missing. This could be because, in emergency situations where immediate critical care is required, patients might be directly admitted to the MICU without a formal consult.</p>
<p><code>PROBLEM LIST DX CODES</code> and <code>PROBLEM LIST DX NAME</code> have 25% and 20% missing, respectively. Odd that their missingness doesn’t align exactly. This isn’t actually too bad, and our sample size is large enough that we may still be able to include these variables in our analysis if we wanted to. We’d just have to do some processing to place patients into large enough overarching diagnosis categories that we’d have enough patients in each group. Not the researcher’s primary research question however so not looking any further into it. We’d also have to examine missingness and see if there are and patterns or it’s MCAR.</p>
<section id="summary" class="level4">
<h4 class="anchored" data-anchor-id="summary">Summary</h4>
<p>Based on the initial missingness checks, we will exclude variables with excessive missingness.</p>
<p>These variables will be retained for reporting in Table 1 for the researcher, but will be excluded from consideration in the analysis.</p>
<ul>
<li><p><code>Consult to Treat</code> and <code>Admit to Treat</code> are missing &gt;= 55% of values, and will thus be excluded from analysis.</p></li>
<li><p><code>Problem List DX Codes</code> is missing 25% and <code>Problem List DX Names</code> is missing 20% of values. Additionally, it would be challenging to include these variables in the analysis in a meaningful way due to sample size limitations, so these will be excluded from consideration in the final analysis.</p></li>
<li><p><code>Admit to Consult</code> is missing 23% of values.</p></li>
</ul>
<p>All other variables were missing &lt; 1% and thus missingness does not need to be addressed for these variables.</p>
</section>
</section>
<section id="data-quality-check" class="level2">
<h2 class="anchored" data-anchor-id="data-quality-check">Data Quality Check</h2>
<p>Let’s perform some simple min/max checks to assess if data has been entered correctly.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This function summarizes the mins and maxes of numeric variables</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>summarize_column <span class="ot">&lt;-</span> <span class="cf">function</span>(column) {</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.numeric</span>(column)) {</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">data.frame</span>(</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">Type =</span> <span class="st">"Numeric"</span>,</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">Min =</span> <span class="fu">min</span>(column, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">Max =</span> <span class="fu">max</span>(column, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply the function to each column and bind the results into a single data frame</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>summary_df <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(data, summarize_column, <span class="at">.id =</span> <span class="st">"Column"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span> <span class="fu">format</span>(., <span class="at">scientific =</span> <span class="cn">FALSE</span>))) <span class="co"># Eliminates scientific notation</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Pretty print the mins and maxes of longform data_2</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(summary_df, <span class="at">format =</span> <span class="st">"html"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Column</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Type</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Min</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">id</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">13109</td>
</tr>
<tr class="even">
<td style="text-align: left;">MV_Total</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">75</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HOSPITAL LOS</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">4</td>
<td style="text-align: left;">9270</td>
</tr>
<tr class="even">
<td style="text-align: left;">ADMIT TO CONSULT</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">1172</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CONSULT TO TREAT</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">-405</td>
<td style="text-align: left;">3046</td>
</tr>
<tr class="even">
<td style="text-align: left;">ADMIT TO TREAT</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">-1</td>
<td style="text-align: left;">983</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TOTAL THERAPY VISITS</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">69</td>
</tr>
<tr class="even">
<td style="text-align: left;">Unit_LOS</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1811</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DAYS WITH THERAPY VISITS</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">33</td>
</tr>
<tr class="even">
<td style="text-align: left;">PERCENT OF DAYS WITH THERAPY VISITS</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">100</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AVG THERAPY LENGTH</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">-1970</td>
<td style="text-align: left;">2144</td>
</tr>
<tr class="even">
<td style="text-align: left;">MAX THERAPY LENGTH</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">-85</td>
<td style="text-align: left;">4744</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MIN THERAPY LENGTH</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">-6841</td>
<td style="text-align: left;">1253</td>
</tr>
<tr class="even">
<td style="text-align: left;">ACTUAL DAYS POST MICU</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">383</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PT or OT VISIT DAYS POST MICU</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">68</td>
</tr>
<tr class="even">
<td style="text-align: left;">PERCENT POST ICU DAYS THERAPY</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">100</td>
</tr>
</tbody>
</table>


</div>
</div>
<p><code>HOSPITAL LOS</code> has a range of 4 to 9270. Presumably this is in hours, so a range of 0.01 to 386.25 days in the hospital. I believe the variable we are actually interested in for MICU LOS is <code>UNIT LOS</code> however, so a range of 1 to1811 hours, or 0.41 to 75.46 days. (Just realized none of us asked for a data dictionary even though it was a room of ~20 stats master’s students 😅).</p>
<p>The researcher outlined the exclusion criteria of &lt; 2 days or &gt; 30 days in the MICU for her investigation. It looks like we will have to <a href="#Filtering">filter the data set</a> to match these criteria.</p>
<p><code>CONSULT TO TREAT</code> has a range of -405 to 3056. <code>ADMIT TO TREAT</code> has a range of -1 to 983. I think these variables are the time from consultation or admission until the time treatment for that patient began. Again, without a data dictionary I am unsure what to make of those negative values.</p>
<p>Importantly, <code>AVG, MAX, and MIN THERAPY LENGTH</code> all have negative values for the minimums. This doesn’t make any sense at face value, will have to investigate and circle back to the researchers for how this data was coded.</p>
<p>Some variables like <code>MV_Total</code> are in hours, and some like <code>DAYS WITH THERAPY VISITS</code> are in days. I don’t think we need to run any conversions, but this will be important to at least keep track of for interpretations.</p>
<p>Aside from that everything else looks coded properly.</p>
</section>
<section id="Filtering" class="level2">
<h2 class="anchored" data-anchor-id="Filtering">Filtering</h2>
<p>Let’s go ahead and filter the data set according to the experimenter’s exclusion criteria of &lt; 2 days or &gt; 30 days in the MICU so we are not unnecessarily investigating superfluous data in our continued examinations.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter data set based on researcher's exclusion criteria</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data[data<span class="sc">$</span>Unit_LOS <span class="sc">&gt;=</span> <span class="dv">48</span> <span class="sc">&amp;</span> data<span class="sc">$</span>Unit_LOS <span class="sc">&lt;=</span> <span class="dv">720</span>,]</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Check dimensions</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(data_ex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6430   25</code></pre>
</div>
</div>
<p>We now have a dataset of 6430 patients!</p>
</section>
<section id="Clean" class="level2">
<h2 class="anchored" data-anchor-id="Clean">Data Cleaning</h2>
<p>Here we will go one by one through our potential covariates and make sure they are all properly coded and there are no erroenous values.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true" href="">ICD10 Code</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false" href="">Department Before MICU</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false" href="">Department after MICU</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-4" role="tab" aria-controls="tabset-2-4" aria-selected="false" href="">Admit to Consult</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-5" role="tab" aria-controls="tabset-2-5" aria-selected="false" href="">Consult to Treat</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-6-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-6" role="tab" aria-controls="tabset-2-6" aria-selected="false" href="">Admit to Treat</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-7-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-7" role="tab" aria-controls="tabset-2-7" aria-selected="false" href="">Total Therapy Visits</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-8-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-8" role="tab" aria-controls="tabset-2-8" aria-selected="false" href="">Days with Therapy Visits</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-9-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-9" role="tab" aria-controls="tabset-2-9" aria-selected="false" href=""></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-10-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-10" role="tab" aria-controls="tabset-2-10" aria-selected="false" href="">Therapy Length</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-11-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-11" role="tab" aria-controls="tabset-2-11" aria-selected="false" href="">Days Post MICU</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-12-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-12" role="tab" aria-controls="tabset-2-12" aria-selected="false" href="">Post MICU PT or OT Visits</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-13-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-13" role="tab" aria-controls="tabset-2-13" aria-selected="false" href="">Post ICU Days with Therapy</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-14-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-14" role="tab" aria-controls="tabset-2-14" aria-selected="false" href="">Age</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-15-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-15" role="tab" aria-controls="tabset-2-15" aria-selected="false" href="">Age Quartile</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-16-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-16" role="tab" aria-controls="tabset-2-16" aria-selected="false" href="">Admit Date</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<p>Note: <code>PROBLEM LIST DX CODES</code> and <code>PROBLEM LIST DX CODES</code> have 100’s of levels comprising sundry diagnoses.</p>
<p>Without a direction for the specific use of these variables we can’t do much with them, so they will likely be excluded from the final analysis.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get counts</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">table</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">DEPT BEFORE Unit</span><span class="st">`</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Var1</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Freq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">AMC ACE UNIT</td>
<td style="text-align: right;">79</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC ADMISSION TRN UNIT</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC AIP OR</td>
<td style="text-align: right;">60</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC AIP PACU</td>
<td style="text-align: right;">59</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC AIP PACU HOLD INPT</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC AIP PERIOP SVC</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC AIP PRE-OP</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC AOP OR</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC AOP PACU</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC BMT/ONC UNIT</td>
<td style="text-align: right;">232</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC BRONCH LAB</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC BURN ICU</td>
<td style="text-align: right;">82</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC CARD CATH LAB</td>
<td style="text-align: right;">15</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC CARD EP LAB</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC CARD MED UNIT</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC CARD POSTPROC UNIT</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC CARD PRE/POST PROC</td>
<td style="text-align: right;">22</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC CARDIOTHORACIC ICU</td>
<td style="text-align: right;">56</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC CC SURGE UNIT</td>
<td style="text-align: right;">20</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC CICU</td>
<td style="text-align: right;">39</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC CRITICAL CARE ANNX</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC CTRC UNIT</td>
<td style="text-align: right;">14</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC DIALYSIS UNIT</td>
<td style="text-align: right;">10</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC EMERGENCY</td>
<td style="text-align: right;">2962</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC GI PRE/POST</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC INTRNL MED UNIT</td>
<td style="text-align: right;">30</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC IR</td>
<td style="text-align: right;">95</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC LABOR AND DELIVERY</td>
<td style="text-align: right;">10</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC M/S PROG CARE UNIT</td>
<td style="text-align: right;">887</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC MED HLTH SVC UNIT</td>
<td style="text-align: right;">39</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC MED SPEC UNIT</td>
<td style="text-align: right;">284</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC MED SURG UNIT</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC MED/GYN/ONC UNIT</td>
<td style="text-align: right;">131</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC MEDICAL ICU</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC MOTHER BABY UNIT</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC NEONATAL ICU</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC NEURO ICU</td>
<td style="text-align: right;">96</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC NEUROSCIENCES UNIT</td>
<td style="text-align: right;">68</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC ORTHO UNIT</td>
<td style="text-align: right;">34</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC PULM UNIT</td>
<td style="text-align: right;">179</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC SURG SPEC UNIT</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC SURG TRAUMA ICU</td>
<td style="text-align: right;">52</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC SURGICAL ICU</td>
<td style="text-align: right;">57</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC SURGICAL UNIT</td>
<td style="text-align: right;">12</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC THRU UNIT</td>
<td style="text-align: right;">15</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC TRANSPLANT HEP</td>
<td style="text-align: right;">10</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC TRANSPLANT UNIT</td>
<td style="text-align: right;">55</td>
</tr>
<tr class="even">
<td style="text-align: left;">CARDIOLOGY UNIT</td>
<td style="text-align: right;">67</td>
</tr>
<tr class="odd">
<td style="text-align: left;">EXPRESS ADMIT UNIT</td>
<td style="text-align: right;">18</td>
</tr>
<tr class="even">
<td style="text-align: left;">GREENVAL ED</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HEM/ONC UNIT</td>
<td style="text-align: right;">27</td>
</tr>
<tr class="even">
<td style="text-align: left;">INTERNAL MEDICINE UNIT</td>
<td style="text-align: right;">26</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MED SURGE HOLDING UNIT</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">MISSIPPI ED</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">OLD AMC CARD ICU</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="even">
<td style="text-align: left;">PRE-ADMISSION</td>
<td style="text-align: right;">389</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>I lack the clinical knowledge to make use of this variable.</p>
<p>It will likely not be used in the final analysis.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get counts</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">table</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">DEPT AFTER Unit</span><span class="st">`</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Var1</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Freq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">AMC ACE UNIT</td>
<td style="text-align: right;">323</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC AIP OR</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC AIP SUITES UNIT</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC BMT/ONC UNIT</td>
<td style="text-align: right;">253</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC BURN ICU</td>
<td style="text-align: right;">17</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC CARD MED UNIT</td>
<td style="text-align: right;">57</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC CARDIOTHORACIC ICU</td>
<td style="text-align: right;">23</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC CC SURGE UNIT</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC CICU</td>
<td style="text-align: right;">23</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC CRITICAL CARE ANNX</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC DIALYSIS PRE-DISCH</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC DIALYSIS UNIT</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC INTRNL MED UNIT</td>
<td style="text-align: right;">134</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC IR</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC LABOR AND DELIVERY</td>
<td style="text-align: right;">13</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC M/S PROG CARE UNIT</td>
<td style="text-align: right;">991</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC MED HLTH SVC UNIT</td>
<td style="text-align: right;">203</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC MED SPEC UNIT</td>
<td style="text-align: right;">906</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC MED SURG UNIT</td>
<td style="text-align: right;">27</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC MED/GYN/ONC UNIT</td>
<td style="text-align: right;">264</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC MEDICAL ICU</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC NEURO ICU</td>
<td style="text-align: right;">26</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC NEUROSCIENCES UNIT</td>
<td style="text-align: right;">133</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC ORTHO UNIT</td>
<td style="text-align: right;">51</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC PULM UNIT</td>
<td style="text-align: right;">522</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC SURG SPEC UNIT</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC SURG TRAUMA ICU</td>
<td style="text-align: right;">30</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC SURGICAL ICU</td>
<td style="text-align: right;">40</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC SURGICAL UNIT</td>
<td style="text-align: right;">36</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC SURGICALSURGE UNIT</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC THRU UNIT</td>
<td style="text-align: right;">38</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC TRANSPLANT HEP</td>
<td style="text-align: right;">19</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC TRANSPLANT UNIT</td>
<td style="text-align: right;">108</td>
</tr>
<tr class="even">
<td style="text-align: left;">CARDIOLOGY UNIT</td>
<td style="text-align: right;">134</td>
</tr>
<tr class="odd">
<td style="text-align: left;">EXPRESS ADMIT UNIT</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">INTERNAL MEDICINE UNIT</td>
<td style="text-align: right;">113</td>
</tr>
<tr class="odd">
<td style="text-align: left;">OLD AMC CARD ICU</td>
<td style="text-align: right;">27</td>
</tr>
<tr class="even">
<td style="text-align: left;">POST-DISCHARGE</td>
<td style="text-align: right;">1880</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Similarly, I lack the clinical knowledge to make use of this variable without a specific direction from the researcher. It will likely be excluded in this analysis.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-2-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`ADMIT TO CONSULT`"</span>, <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: `aes_string()` was deprecated in ggplot2 3.0.0.
ℹ Please use tidy evaluation idioms with `aes()`.
ℹ See also `vignette("ggplot2-in-packages")` for more information.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 862 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 862 rows containing non-finite outside the scale range
(`stat_qq()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 862 rows containing non-finite outside the scale range
(`stat_qq_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Try a log transform.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform log transform</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>ADMIT_TO_CONSULT_log <span class="ot">&lt;-</span> <span class="fu">log</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">ADMIT TO CONSULT</span><span class="st">`</span>)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"ADMIT_TO_CONSULT_log"</span>, <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 4021 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 4021 rows containing non-finite outside the scale range
(`stat_qq()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 4021 rows containing non-finite outside the scale range
(`stat_qq_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This looks incredibly messy to use. And has 23% missing values. We will likely exclude.</p>
<p>Could we convert it to a binary variable of whether the patient received a consult or not?</p>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-2-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-5-tab">
<p><code>CONSULT TO TREAT</code> contained negative values. Let’s explore</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram for time from consult to treatment</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">CONSULT TO TREAT</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Looks like we have a lot of values extending below 0, so it’s not just some mis-entered data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort by time from consult to treatment</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>sorted_data <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="st">`</span><span class="at">CONSULT TO TREAT</span><span class="st">`</span>) <span class="sc">|&gt;</span> </span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, <span class="st">`</span><span class="at">CONSULT TO TREAT</span><span class="st">`</span>)</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Pretty print table</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">head</span>(sorted_data))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">CONSULT TO TREAT</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">10440</td>
<td style="text-align: right;">-405</td>
</tr>
<tr class="even">
<td style="text-align: right;">11514</td>
<td style="text-align: right;">-385</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7006</td>
<td style="text-align: right;">-189</td>
</tr>
<tr class="even">
<td style="text-align: right;">9262</td>
<td style="text-align: right;">-166</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11502</td>
<td style="text-align: right;">-143</td>
</tr>
<tr class="even">
<td style="text-align: right;">11474</td>
<td style="text-align: right;">-118</td>
</tr>
</tbody>
</table>


</div>
</div>
<p><code>CONSULT TO TREAT</code> looks coded correctly. I believe it just has an event at timepoint zero, most likely admit.</p>
<section id="summary-1" class="level4">
<h4 class="anchored" data-anchor-id="summary-1">Summary</h4>
<p><code>CONSULT TO TREAT</code> is coded correctly. However it has 56% missing values and will thus not be used.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-2-6" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-6-tab">
<p>The -1 value we saw as the min for <code>ADMIT TO TREAT</code> makes me suspicious that’s how missing data was coded for this variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram for time from admit to treatment</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The histogram shows there were very few patients with a value of -1.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort by time from admit to treatment</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>sorted_data <span class="ot">&lt;-</span> data_ex <span class="sc">%&gt;%</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, <span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span>)</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Pretty print table</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(sorted_data), <span class="at">format =</span> <span class="st">"html"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"condensed"</span>, <span class="st">"hover"</span>, <span class="st">"striped"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-condensed table-hover table-striped caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ADMIT TO TREAT</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">8941</td>
<td style="text-align: right;">-1</td>
</tr>
<tr class="even">
<td style="text-align: right;">9949</td>
<td style="text-align: right;">-1</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11126</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">37</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1275</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: right;">3579</td>
<td style="text-align: right;">2</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>There were only 2 patients with an admit to treatment time of -1, and 1 patient with a value of 0. Will have to double check with the experimenters but this looks believable.</p>
<section id="summary-2" class="level4">
<h4 class="anchored" data-anchor-id="summary-2">Summary</h4>
<p>There are two patients with a -1 time to admit.</p>
<p>However, <code>ADMIT TO TREAT</code> has 55% missing values and will thus not be included in the final analysis.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-2-7" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-7-tab">
<p><code>TOTAL THERAPY VISITS</code> is a promising covariate.</p>
<p>Those who had more therapy days could have a quicker recovery if physical therapy improves patient condition.</p>
<p>Or alternatively, more therapy days could be indicative of worse physical health, and could potentially increase the outcome variables of total MV time and MICU LOS.</p>
<p>Either way it is prudent to account for it in the model.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`TOTAL THERAPY VISITS`"</span>, <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Let’s try a log transform.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform log transform of average therapy length</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>TOTAL_THERAPY_VISITS_log <span class="ot">&lt;-</span> <span class="fu">log</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">TOTAL THERAPY VISITS</span><span class="st">`</span>)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"TOTAL_THERAPY_VISITS_log"</span>, <span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2324 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2324 rows containing non-finite outside the scale range
(`stat_qq()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2324 rows containing non-finite outside the scale range
(`stat_qq_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><a href="#Clean">Top of Tabset</a></p>
<section id="summary-3" class="level4">
<h4 class="anchored" data-anchor-id="summary-3">Summary</h4>
<p><code>TOTAL THERAPY VISITS</code> appears to have a logarithmic distribution. Poisson regression should take care of this</p>
</section>
</div>
<div id="tabset-2-8" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-8-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`DAYS WITH THERAPY VISITS`"</span>, <span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><code>DAYS WITH THERAPY VISITS</code> appears to be coded correctly. Poisson regression will handle the distribution.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-2-9" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-9-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`PERCENT OF DAYS WITH THERAPY VISITS`"</span>, <span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Interesting, there was a lot of patients with either 0 or 100% of their days including physical therapy.</p>
<p>This could be a good covariate to include in the final model.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-2-10" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-10-tab">
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href="">Negative Therapy Length</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href="">Average Therapy Length</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false" href="">Max Therapy Length</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false" href="">Min Therapy Length</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>We saw earlier that average, min, and max therapy length had negative values for their minimum, which does not make sense. Let’s investigate.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`AVG THERAPY LENGTH`"</span>, <span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Ah, we can see that we have a one incredibly low and negative values, and some incredibly high values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a table to checkout our frequencies for low and high values</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
-1424     0     4     5     6     7     8     9    10    11    12    13    14 
    1  2374     1     9     4     4    12    13    53    17    38    29    31 
   15    16    17    18    19    20    21    22    23    24    25    26    27 
  117    48    60    43    59   168    89    78   107    88   213   127   117 
   28    29    30    31    32    33    34    35    36    37    38    39    40 
  113   114   174   127   122   102   111   129    92   110    85    82   141 
   41    42    43    44    45    46    47    48    49    50    51    52    53 
   78    79    71    77    80    60    56    42    58    48    23    28    37 
   54    55    56    57    58    59    60    61    62    63    64    65    66 
   34    35    21    15    18    16    23    12    12     5    13    10     5 
   67    68    69    70    71    72    73    74    75    76    77    81    83 
    4     6     5     8    10     4     3     5     5     2     1     1     1 
   85    86    90    93    97   362   617   644  1001  1043  1506  2093  2144 
    2     3     2     1     1     1     1     1     1     1     1     1     1 </code></pre>
</div>
</div>
<p>We have 1 patient with a -1424 average length in therapy that is most likely an erroneous entry, and some patients with very high times in therapy.</p>
<p>I wonder who that patient is that is so advanced they’ve spent negative time in therapy.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Investigate patient with negative therapy lengths</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>negative <span class="ot">&lt;-</span> data_ex[data_ex<span class="sc">$</span><span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span> <span class="sc">==</span> <span class="sc">-</span><span class="dv">1424</span>,] <span class="sc">%&gt;%</span> </span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, <span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span>, <span class="st">`</span><span class="at">MIN THERAPY LENGTH</span><span class="st">`</span>, <span class="st">`</span><span class="at">MAX THERAPY LENGTH</span><span class="st">`</span>)</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Pretty Print</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(negative, <span class="at">format =</span> <span class="st">"html"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"condensed"</span>, <span class="st">"hover"</span>, <span class="st">"striped"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-condensed table-hover table-striped caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">AVG THERAPY LENGTH</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MIN THERAPY LENGTH</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MAX THERAPY LENGTH</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">10462</td>
<td style="text-align: right;">-1424</td>
<td style="text-align: right;">-2726</td>
<td style="text-align: right;">-85</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Aha! This patient has negative values for all therapy lengths.</p>
<p>Let’s see if they are the only one that has negative values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">MIN THERAPY LENGTH</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
-2726     0     3     4     5     6     7     8     9    10    11    12    13 
    1  2376     6     4    41    20    26    78    57   234    67    83    67 
   14    15    16    17    18    19    20    21    22    23    24    25    26 
   94   275    81    60    94    70   230    75    39   178   144   271   115 
   27    28    29    30    31    32    33    34    35    36    37    38    39 
   90    84    86   206    77    75    70    63    70    46    43    61    53 
   40    41    42    43    44    45    46    47    48    49    50    51    52 
  100    38    34    36    34    37    22    26    20    22    29    17     8 
   53    54    55    56    57    58    59    60    61    62    63    64    65 
   17    18    29     9    11     9    13    12     5     8     4     5     8 
   66    67    68    69    70    71    72    73    74    75    76    77    81 
    1     5     2     2     6     6     3     2     4     4     2     1     2 
   83    85    86    90    93    97  1204  1253 
    1     1     2     1     1     1     1     1 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">MAX THERAPY LENGTH</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 -85    0    4    5    6    7    8    9   10   11   12   13   14   15   16   17 
   1 2374    1    8    4    5   10   13   50   14   19   15   22  124   34   20 
  18   19   20   21   22   23   24   25   26   27   28   29   30   31   32   33 
  27   38  153   39   18   73   58  197   64   67   72   62  210   74   68   59 
  34   35   36   37   38   39   40   41   42   43   44   45   46   47   48   49 
  61  106   63   60   98   92  158   79   82   62   61   98   58   58   53   46 
  50   51   52   53   54   55   56   57   58   59   60   61   62   63   64   65 
  81   36   31   70   79   91   57   48   47   44   66   46   28   31   23   25 
  66   67   68   69   70   71   72   73   74   75   76   77   78   79   80   81 
  16   15   35   25   42   17   19   14   22   16   16   10    9    8    9    5 
  82   83   84   85   86   87   88   89   90   91   92   93   94   95   96   97 
   4    7   10   13   10    5    3    6    9    4    7    7    2    3    1    3 
  98   99  100  101  102  103  104  105  107  109  110  117  140 1034 1540 1725 
   1    2    1    2    2    1    1    3    1    1    2    1    1    1    1    1 
2963 3035 3067 3119 4248 
   1    1    1    1    1 </code></pre>
</div>
</div>
<p>They are! What probably happened here was their minimum is actually 85, and their max is actually 2726, and those got reversed into negatives somehow. Similarly, their average should be 1424.</p>
<p>We’ll double check with the investigator, but for now let’s just delete this patient and re run the histogram and qqplot.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove negative patient</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">%&gt;%</span> <span class="fu">filter</span>(data_ex<span class="sc">$</span>id <span class="sc">!=</span> <span class="dv">10462</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`AVG THERAPY LENGTH`"</span>, <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>We may have some outliers that spent very long in therapy</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine potential outliers</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(<span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, <span class="st">`</span><span class="at">MIN THERAPY LENGTH</span><span class="st">`</span>, <span class="st">`</span><span class="at">MAX THERAPY LENGTH</span><span class="st">`</span>, <span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span>) <span class="sc">|&gt;</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n=</span><span class="dv">10</span>) <span class="sc">|&gt;</span> </span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pretty_print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MIN THERAPY LENGTH</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MAX THERAPY LENGTH</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">AVG THERAPY LENGTH</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">178</td>
<td style="text-align: right;">1253</td>
<td style="text-align: right;">3035</td>
<td style="text-align: right;">2144</td>
</tr>
<tr class="even">
<td style="text-align: right;">12985</td>
<td style="text-align: right;">1204</td>
<td style="text-align: right;">4248</td>
<td style="text-align: right;">2093</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3230</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">2963</td>
<td style="text-align: right;">1506</td>
</tr>
<tr class="even">
<td style="text-align: right;">2942</td>
<td style="text-align: right;">32</td>
<td style="text-align: right;">1540</td>
<td style="text-align: right;">1043</td>
</tr>
<tr class="odd">
<td style="text-align: right;">12803</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">3119</td>
<td style="text-align: right;">1001</td>
</tr>
<tr class="even">
<td style="text-align: right;">12640</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">3067</td>
<td style="text-align: right;">644</td>
</tr>
<tr class="odd">
<td style="text-align: right;">6661</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">1725</td>
<td style="text-align: right;">617</td>
</tr>
<tr class="even">
<td style="text-align: right;">10917</td>
<td style="text-align: right;">26</td>
<td style="text-align: right;">1034</td>
<td style="text-align: right;">362</td>
</tr>
<tr class="odd">
<td style="text-align: right;">8071</td>
<td style="text-align: right;">97</td>
<td style="text-align: right;">97</td>
<td style="text-align: right;">97</td>
</tr>
<tr class="even">
<td style="text-align: right;">7733</td>
<td style="text-align: right;">93</td>
<td style="text-align: right;">93</td>
<td style="text-align: right;">93</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Success! That is not a logarithmic relationship, that’s just 8 patients who had an extremely long stay in therapy.</p>
<p>Let’s set these values to <code>NA</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter out outlier patients</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">ifelse</span>(id <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">178</span>, <span class="dv">12985</span>, <span class="dv">3230</span>, <span class="dv">2942</span>, <span class="dv">12803</span>, <span class="dv">12640</span>, <span class="dv">6661</span>, <span class="dv">10917</span>), <span class="cn">NA</span>, <span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>and re-plot</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`AVG THERAPY LENGTH`"</span>, <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 8 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 8 rows containing non-finite outside the scale range
(`stat_qq()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 8 rows containing non-finite outside the scale range
(`stat_qq_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>That’s a normal distribution with a preponderance of patients who did not have physical therapy.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set outlier values to NA</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">MAX THERAPY LENGTH</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">ifelse</span>(id <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">178</span>, <span class="dv">12985</span>, <span class="dv">3230</span>, <span class="dv">2942</span>, <span class="dv">12803</span>, <span class="dv">12640</span>, <span class="dv">6661</span>, <span class="dv">10917</span>), <span class="cn">NA</span>, <span class="st">`</span><span class="at">MAX THERAPY LENGTH</span><span class="st">`</span>))</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`MAX THERAPY LENGTH`"</span>, <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 8 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 8 rows containing non-finite outside the scale range
(`stat_qq()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 8 rows containing non-finite outside the scale range
(`stat_qq_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Max therapy appears mostly normally distributed, not including the patients that did not receive PT.</p>
<p>The highest patient has a max length of 140, and the next highest has a max stay of ~100. Not drastic enough to call that patient an outlier.</p>
<section id="summary-4" class="level4">
<h4 class="anchored" data-anchor-id="summary-4">Summary</h4>
<p><code>MAX THERAPY LENGTH</code> appears normally distributed for those that received PT.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set outlier values to NA</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">MIN THERAPY LENGTH</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">ifelse</span>(id <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">178</span>, <span class="dv">12985</span>), <span class="cn">NA</span>, <span class="st">`</span><span class="at">MIN THERAPY LENGTH</span><span class="st">`</span>))</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`MIN THERAPY LENGTH`"</span>, <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing non-finite outside the scale range
(`stat_qq()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing non-finite outside the scale range
(`stat_qq_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="summary-5" class="level4">
<h4 class="anchored" data-anchor-id="summary-5">Summary</h4>
<p><code>MIN THERAPY LENGTH</code> appears mostly normal for thos who received it.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</section>
</div>
</div>
</div>
</div>
<div id="tabset-2-11" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-11-tab">
<p>This variable represents the number of days a patient has spent in a standard hospital unit after being discharged from the Medical Intensive Care Unit (MICU).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`ACTUAL DAYS POST MICU`"</span>, <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>It appears logarithmic.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Log transform variable</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ACTUAL_DAYS_POST_MICU_log =</span> <span class="fu">log</span>(<span class="st">`</span><span class="at">ACTUAL DAYS POST MICU</span><span class="st">`</span>))</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"ACTUAL_DAYS_POST_MICU_log"</span>, <span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1988 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1988 rows containing non-finite outside the scale range
(`stat_qq()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1988 rows containing non-finite outside the scale range
(`stat_qq_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>That appears normally distributed now!</p>
<section id="summary-6" class="level4">
<h4 class="anchored" data-anchor-id="summary-6">Summary</h4>
<p>Days post MICU is normal after log transforming.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-2-12" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-12-tab">
<p>This variable represents the number of days that patients have been visited by physical therapists (PT) or occupational therapists (OT) after being discharged from the Medical Intensive Care Unit (MICU). It captures the extent of post-ICU rehabilitation services provided to patients and can be important for understanding recovery trajectories.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`PT or OT VISIT DAYS POST MICU`"</span>, <span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This variable is important for our analysis as it will not effect our outcome variables.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-2-13" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-13-tab">
<p>This variable is the percentage of days after a patient is discharged from the Intensive Care Unit (ICU) during which they received therapy, such as physical therapy (PT) or occupational therapy (OT).</p>
<p>This variable is likely not important as it will not effect our outcome variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`PERCENT POST ICU DAYS THERAPY`"</span>, <span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-37-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-2-14" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-14-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine counts</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">table</span>(data_ex<span class="sc">$</span>Age_Range))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Var1</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Freq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">18-39</td>
<td style="text-align: right;">1121</td>
</tr>
<tr class="even">
<td style="text-align: left;">40-49</td>
<td style="text-align: right;">899</td>
</tr>
<tr class="odd">
<td style="text-align: left;">50-59</td>
<td style="text-align: right;">1492</td>
</tr>
<tr class="even">
<td style="text-align: left;">60-69</td>
<td style="text-align: right;">1574</td>
</tr>
<tr class="odd">
<td style="text-align: left;">70+</td>
<td style="text-align: right;">1327</td>
</tr>
<tr class="even">
<td style="text-align: left;">Negative Age</td>
<td style="text-align: right;">16</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>That’s curious, what does “Negative Age” mean?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine negative age</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Age_Range <span class="sc">==</span> <span class="st">"Negative Age"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pretty_print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">SEX</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MV_Total</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">HOSPITAL LOS</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">PROBLEM LIST DX CODES</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">PROBLEM LIST DX NAMES</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">DISCH_DISP</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">DEPT BEFORE Unit</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">DEPT AFTER Unit</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ADMIT TO CONSULT</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">CONSULT TO TREAT</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ADMIT TO TREAT</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">TOTAL THERAPY VISITS</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Unit_LOS</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">DAYS WITH THERAPY VISITS</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">PERCENT OF DAYS WITH THERAPY VISITS</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">AVG THERAPY LENGTH</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MAX THERAPY LENGTH</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MIN THERAPY LENGTH</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ACTUAL DAYS POST MICU</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">PT or OT VISIT DAYS POST MICU</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">PERCENT POST ICU DAYS THERAPY</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Age_Range</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Admit_MonthYear</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Age_Quartile</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ADMIT_TO_CONSULT_log</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">TOTAL_THERAPY_VISITS_log</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ACTUAL_DAYS_POST_MICU_log</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1394</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">139</td>
<td style="text-align: left;">292.81, 296.80, 314.0</td>
<td style="text-align: left;">ADHD (attention deficit hypera</td>
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: left;">AMC EMERGENCY</td>
<td style="text-align: left;">AMC MED SPEC UNIT</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">69</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2012-08</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">0.6931472</td>
</tr>
<tr class="even">
<td style="text-align: right;">2815</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">415</td>
<td style="text-align: left;">289.81, 289.84, 453.0</td>
<td style="text-align: left;">Antiphospholipid antibody synd</td>
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: left;">AMC IR</td>
<td style="text-align: left;">AMC MED SPEC UNIT</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">93</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2013-07</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">2.5649494</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4090</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">150</td>
<td style="text-align: left;">490, 949.0</td>
<td style="text-align: left;">Bronchitis, Burn</td>
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: left;">AMC BURN ICU</td>
<td style="text-align: left;">AMC BURN ICU</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">64</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2014-03</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">0.6931472</td>
</tr>
<tr class="even">
<td style="text-align: right;">4282</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">195</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: left;">AMC IR</td>
<td style="text-align: left;">POST-DISCHARGE</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">190</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2014-05</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">-Inf</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4800</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">365</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Home-Health Care Svc</td>
<td style="text-align: left;">AMC CARDIOTHORACIC ICU</td>
<td style="text-align: left;">AMC M/S PROG CARE UNIT</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2014-08</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">1.7917595</td>
</tr>
<tr class="even">
<td style="text-align: right;">6342</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">55</td>
<td style="text-align: left;">452</td>
<td style="text-align: left;">Portal vein thrombosis</td>
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: left;">AMC IR</td>
<td style="text-align: left;">POST-DISCHARGE</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">49</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2015-06</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">-Inf</td>
</tr>
<tr class="odd">
<td style="text-align: right;">6412</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">66</td>
<td style="text-align: left;">453.40</td>
<td style="text-align: left;">DVT (deep venous thrombosis</td>
<td style="text-align: left;">Discharged/transferred to a Designated Cancer Center or Children’s Hospital</td>
<td style="text-align: left;">AMC IR</td>
<td style="text-align: left;">POST-DISCHARGE</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">48</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2015-06</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">-Inf</td>
</tr>
<tr class="even">
<td style="text-align: right;">6447</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">78</td>
<td style="text-align: left;">453.40</td>
<td style="text-align: left;">DVT (deep venous thrombosis</td>
<td style="text-align: left;">TRANSFER TO CANCER OR CHILDRENS</td>
<td style="text-align: left;">AMC IR</td>
<td style="text-align: left;">POST-DISCHARGE</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">67</td>
<td style="text-align: right;">68</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">73</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">33.33</td>
<td style="text-align: right;">31</td>
<td style="text-align: right;">31</td>
<td style="text-align: right;">31</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2015-07</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: right;">-Inf</td>
</tr>
<tr class="odd">
<td style="text-align: right;">6479</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">55</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Discharged/transferred to a Designated Cancer Center or Children’s Hospital</td>
<td style="text-align: left;">AMC IR</td>
<td style="text-align: left;">POST-DISCHARGE</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">43</td>
<td style="text-align: right;">44</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">49</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">50.00</td>
<td style="text-align: right;">24</td>
<td style="text-align: right;">24</td>
<td style="text-align: right;">24</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2015-07</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: right;">-Inf</td>
</tr>
<tr class="even">
<td style="text-align: right;">7512</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">80</td>
<td style="text-align: left;">244.9, 278.00, 415.19</td>
<td style="text-align: left;">Acquired hypothyroidism, Con</td>
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: left;">AMC IR</td>
<td style="text-align: left;">AMC PULM UNIT</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">56</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">100.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2016-02</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">8292</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">53</td>
<td style="text-align: left;">345.90, 625.8, 780.02</td>
<td style="text-align: left;">Adnexal mass, Anticholinergic</td>
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: left;">PRE-ADMISSION</td>
<td style="text-align: left;">POST-DISCHARGE</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">53</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2016-07</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">-Inf</td>
</tr>
<tr class="even">
<td style="text-align: right;">8779</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">191</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Suicide attempt by drug inges</td>
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: left;">AMC EMERGENCY</td>
<td style="text-align: left;">AMC MED SPEC UNIT</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">89</td>
<td style="text-align: right;">90</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">106</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">20.00</td>
<td style="text-align: right;">45</td>
<td style="text-align: right;">45</td>
<td style="text-align: right;">45</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">33.33</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2016-10</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: right;">1.0986123</td>
</tr>
<tr class="odd">
<td style="text-align: right;">9152</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">430</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Pneumonia of both lungs due t</td>
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: left;">AMC CARDIOTHORACIC ICU</td>
<td style="text-align: left;">AMC MED SPEC UNIT</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">229</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">167</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">100.00</td>
<td style="text-align: right;">54</td>
<td style="text-align: right;">70</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">100.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2017-01</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">2.1972246</td>
<td style="text-align: right;">0.6931472</td>
</tr>
<tr class="even">
<td style="text-align: right;">9398</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">91</td>
<td style="text-align: left;">977.9</td>
<td style="text-align: left;">Intentional drug overdose (HC</td>
<td style="text-align: left;">Court/Law Enforcement</td>
<td style="text-align: left;">AMC EMERGENCY</td>
<td style="text-align: left;">POST-DISCHARGE</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">33</td>
<td style="text-align: right;">31</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">85</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">66.67</td>
<td style="text-align: right;">23</td>
<td style="text-align: right;">32</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2017-02</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">0.6931472</td>
<td style="text-align: right;">-Inf</td>
</tr>
<tr class="odd">
<td style="text-align: right;">9793</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">74</td>
<td style="text-align: left;">453.40</td>
<td style="text-align: left;">DVT (deep venous thrombosis</td>
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: left;">AMC IR</td>
<td style="text-align: left;">AMC MED HLTH SVC UNIT</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">41</td>
<td style="text-align: right;">42</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">50.00</td>
<td style="text-align: right;">52</td>
<td style="text-align: right;">67</td>
<td style="text-align: right;">38</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2017-05</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="even">
<td style="text-align: right;">12029</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">61</td>
<td style="text-align: left;">453.42</td>
<td style="text-align: left;">DVT of lower extremity (deep v</td>
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: left;">AMC CARD PRE/POST PROC</td>
<td style="text-align: left;">POST-DISCHARGE</td>
<td style="text-align: right;">44</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">47</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">53</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">50.00</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2018-09</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">3.78419</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: right;">-Inf</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>I don’t see any pattern.</p>
<p>Let’s plot the counts.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot counts</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">x =</span> Age_Range, <span class="at">fill =</span> Age_Range)) <span class="sc">+</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Count by Age Range"</span>,</span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Age Range"</span>,</span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Count"</span>,</span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"Age Range"</span>) <span class="sc">+</span></span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Pastel2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-40-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>We have a sufficient size for each group and can use age range as a covariate.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-2-15" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-15-tab">
<p>This is just a different variable for age, where they divided the sample up by quartiles.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check counts</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(data_ex<span class="sc">$</span>Age_Quartile)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
14-42 43-56 57-66   67+ 
 1379  1637  1652  1761 </code></pre>
</div>
</div>
<p>We can use either age variables, it really shouldn’t matter unless there is some important clinical distinction that is driving up their divisions in <code>Age_Range</code>.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-2-16" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-16-tab">
<p><code>Admit_MonthYear</code> is a character. Let’s go ahead and convert to datetime using <code>lubridate</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert admit month year to datetime</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Admit_MonthYear =</span> <span class="fu">ym</span>(Admit_MonthYear))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we can plot how many patients were admitted each month.</p>
<p>We can also highlight the timeframe of the quality improvement iniative to visualize pre-, intra-, and post- periods.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the time periods to highlight</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>highlight_periods <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">start =</span> <span class="fu">as.Date</span>(<span class="fu">c</span>(<span class="st">"2015-04-01"</span>)),</span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">end =</span> <span class="fu">as.Date</span>(<span class="fu">c</span>(<span class="st">"2016-01-01"</span>))</span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize and plot the data</span></span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Admit_MonthYear) <span class="sc">|&gt;</span> </span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Admit_MonthYear, <span class="at">y =</span> count)) <span class="sc">+</span></span>
<span id="cb73-12"><a href="#cb73-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb73-13"><a href="#cb73-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb73-14"><a href="#cb73-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data =</span> highlight_periods, <span class="fu">aes</span>(<span class="at">xmin =</span> start, <span class="at">xmax =</span> end, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb73-15"><a href="#cb73-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb73-16"><a href="#cb73-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Admissions Over Time"</span>,</span>
<span id="cb73-17"><a href="#cb73-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit Date"</span>,</span>
<span id="cb73-18"><a href="#cb73-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Count"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-43-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>It does not appear that the number of patients admitted throughout the year really changed that drastically. I don’t think we will have to control for this.</p>
</div>
</div>
</div>
</section>
<section id="Creation" class="level2">
<h2 class="anchored" data-anchor-id="Creation">Variable Creation</h2>
<p>Here we will create any variables necessary for our analysis</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true" href="">Mechanical Ventilation</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false" href="">Received Physical Therapy Variable Creation</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-3" role="tab" aria-controls="tabset-3-3" aria-selected="false" href="">QI-Initiative Time Period</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<p>The researcher expressed that patients would be stratified on Mechanical ventilation v. NO mechanical ventilation. However, I do not see this variable. Let’s go ahead and create it, assuming that patients with NA for <code>MV_TOTAL</code> were simply never on mechanical ventilation.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Dummy code MV status </span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>MV_YN <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(data_ex<span class="sc">$</span>MV_Total), <span class="dv">0</span>, <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s check that worked as intended.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter down to variables of interest to verify dummy coding worked</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>check <span class="ot">&lt;-</span> data_ex <span class="sc">%&gt;%</span></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, MV_Total, MV_YN)</span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Pretty print</span></span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(check), <span class="at">format =</span> <span class="st">"html"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"condensed"</span>, <span class="st">"stripe"</span>, <span class="st">"hover"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-condensed table-striped table-hover caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MV_Total</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MV_YN</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">5</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: right;">8</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">10</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Looks good.</p>
<p><a href="#Creation">Top of Tabset</a></p>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<p>Let’s create a dummy variable for whether patients received PT or not.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create variable for reception of PT</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">PT_YESNO =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(<span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span>), <span class="dv">1</span>,</span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>                           <span class="fu">ifelse</span>(<span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span> <span class="sc">==</span> <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>)))</span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Double check calculations</span></span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span>, <span class="st">`</span><span class="at">DAYS WITH THERAPY VISITS</span><span class="st">`</span>, PT_YESNO) <span class="sc">|&gt;</span> </span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">|&gt;</span> </span>
<span id="cb76-10"><a href="#cb76-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pretty_print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">AVG THERAPY LENGTH</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">DAYS WITH THERAPY VISITS</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">PT_YESNO</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">27</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: right;">17</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: right;">25</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>


</div>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to factor for better plotting later on</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">PT_YESNO =</span> <span class="fu">as.factor</span>(PT_YESNO))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Looks good, not we can answer one of their research questions of whether PT enrollment increased after the intervention.</p>
<p><a href="#Creation">Top of Tabset</a></p>
</div>
<div id="tabset-3-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-3-tab">
<p>Let’s group participants into the time period that they were present during the initiative for.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create new variable based on QI initiative time period.</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">initiative =</span> <span class="fu">ifelse</span>(Admit_MonthYear <span class="sc">&lt;</span> <span class="fu">as.Date</span>(<span class="st">"2015-04-01"</span>), <span class="st">"Pre"</span>,</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">ifelse</span>(Admit_MonthYear <span class="sc">&gt;</span> <span class="fu">as.Date</span>(<span class="st">"2015-12-01"</span>), <span class="st">"Post"</span>, <span class="st">"During"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s double check we did that right.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check counts</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(data_ex<span class="sc">$</span>initiative)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
During   Post    Pre 
   661   2871   2897 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Double check assigning</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, Admit_MonthYear, initiative) <span class="sc">|&gt;</span> </span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Admit_MonthYear <span class="sc">&lt;</span> <span class="fu">as.Date</span>(<span class="st">"2015-04-01"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Admit_MonthYear)) <span class="sc">|&gt;</span> </span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">|&gt;</span> </span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pretty_print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Admit_MonthYear</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">initiative</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">5759</td>
<td style="text-align: left;">2015-03-01</td>
<td style="text-align: left;">Pre</td>
</tr>
<tr class="even">
<td style="text-align: right;">5760</td>
<td style="text-align: left;">2015-03-01</td>
<td style="text-align: left;">Pre</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5761</td>
<td style="text-align: left;">2015-03-01</td>
<td style="text-align: left;">Pre</td>
</tr>
<tr class="even">
<td style="text-align: right;">5763</td>
<td style="text-align: left;">2015-03-01</td>
<td style="text-align: left;">Pre</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5765</td>
<td style="text-align: left;">2015-03-01</td>
<td style="text-align: left;">Pre</td>
</tr>
<tr class="even">
<td style="text-align: right;">5767</td>
<td style="text-align: left;">2015-03-01</td>
<td style="text-align: left;">Pre</td>
</tr>
</tbody>
</table>


</div>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Double check assigning</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, Admit_MonthYear, initiative) <span class="sc">|&gt;</span> </span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Admit_MonthYear <span class="sc">&gt;</span> <span class="fu">as.Date</span>(<span class="st">"2015-04-01"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Admit_MonthYear) <span class="sc">|&gt;</span> </span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">|&gt;</span> </span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pretty_print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Admit_MonthYear</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">initiative</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">6094</td>
<td style="text-align: left;">2015-05-01</td>
<td style="text-align: left;">During</td>
</tr>
<tr class="even">
<td style="text-align: right;">6096</td>
<td style="text-align: left;">2015-05-01</td>
<td style="text-align: left;">During</td>
</tr>
<tr class="odd">
<td style="text-align: right;">6099</td>
<td style="text-align: left;">2015-05-01</td>
<td style="text-align: left;">During</td>
</tr>
<tr class="even">
<td style="text-align: right;">6100</td>
<td style="text-align: left;">2015-05-01</td>
<td style="text-align: left;">During</td>
</tr>
<tr class="odd">
<td style="text-align: right;">6105</td>
<td style="text-align: left;">2015-05-01</td>
<td style="text-align: left;">During</td>
</tr>
<tr class="even">
<td style="text-align: right;">6106</td>
<td style="text-align: left;">2015-05-01</td>
<td style="text-align: left;">During</td>
</tr>
</tbody>
</table>


</div>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Double check assigning</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, Admit_MonthYear, initiative) <span class="sc">|&gt;</span> </span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Admit_MonthYear <span class="sc">&gt;=</span> <span class="fu">as.Date</span>(<span class="st">"2015-12-01"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Admit_MonthYear) <span class="sc">|&gt;</span> </span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">|&gt;</span> </span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pretty_print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Admit_MonthYear</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">initiative</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">7167</td>
<td style="text-align: left;">2015-12-01</td>
<td style="text-align: left;">During</td>
</tr>
<tr class="even">
<td style="text-align: right;">7169</td>
<td style="text-align: left;">2015-12-01</td>
<td style="text-align: left;">During</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7171</td>
<td style="text-align: left;">2015-12-01</td>
<td style="text-align: left;">During</td>
</tr>
<tr class="even">
<td style="text-align: right;">7172</td>
<td style="text-align: left;">2015-12-01</td>
<td style="text-align: left;">During</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7174</td>
<td style="text-align: left;">2015-12-01</td>
<td style="text-align: left;">During</td>
</tr>
<tr class="even">
<td style="text-align: right;">7176</td>
<td style="text-align: left;">2015-12-01</td>
<td style="text-align: left;">During</td>
</tr>
</tbody>
</table>


</div>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Double check assigning</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, Admit_MonthYear, initiative) <span class="sc">|&gt;</span> </span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Admit_MonthYear <span class="sc">&gt;</span> <span class="fu">as.Date</span>(<span class="st">"2015-12-01"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Admit_MonthYear) <span class="sc">|&gt;</span> </span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">|&gt;</span> </span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pretty_print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Admit_MonthYear</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">initiative</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">7324</td>
<td style="text-align: left;">2016-01-01</td>
<td style="text-align: left;">Post</td>
</tr>
<tr class="even">
<td style="text-align: right;">7331</td>
<td style="text-align: left;">2016-01-01</td>
<td style="text-align: left;">Post</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7336</td>
<td style="text-align: left;">2016-01-01</td>
<td style="text-align: left;">Post</td>
</tr>
<tr class="even">
<td style="text-align: right;">7339</td>
<td style="text-align: left;">2016-01-01</td>
<td style="text-align: left;">Post</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7343</td>
<td style="text-align: left;">2016-01-01</td>
<td style="text-align: left;">Post</td>
</tr>
<tr class="even">
<td style="text-align: right;">7345</td>
<td style="text-align: left;">2016-01-01</td>
<td style="text-align: left;">Post</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Looks good.</p>
<p><a href="#Creation">Top of Tabset</a></p>
</div>
</div>
</div>
</section>
</section>
<section id="univariate-distributions" class="level1">
<h1>Univariate Distributions</h1>
<p>Here we will explore the univariate distributions of our variables to assess data quality using histograms and qqplots.</p>
<section id="Outcome_Variables" class="level2">
<h2 class="anchored" data-anchor-id="Outcome_Variables">Outcome Variables</h2>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true" href="">Mechanical Ventilation</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false" href="">MICU Length of Stay</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-3" role="tab" aria-controls="tabset-4-3" aria-selected="false" href="">Hospital Length of Stay</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-4" role="tab" aria-controls="tabset-4-4" aria-selected="false" href="">Non-ICU Length of Stay</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-5" role="tab" aria-controls="tabset-4-5" aria-selected="false" href="">Discharge Location</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<p>First we will begin with mechanical ventilation time (MV)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"MV_Total"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_qq()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_qq_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-49-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>That’s some severe right skewness! Is that logarithmic? Let’s try and transform and see what happens.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform a log transform of mechanical ventilation time and plot</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>MV_Total_log <span class="ot">&lt;-</span> <span class="fu">log</span>(data_ex<span class="sc">$</span>MV_Total)</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"MV_Total_log"</span>, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_qq()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_qq_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-50-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>That’s better. Maybe try a square root transformation?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform a sqrt transformation and plot</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>MV_Total_sqrt <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(data_ex<span class="sc">$</span>MV_Total)</span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"MV_Total_sqrt"</span>, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_qq()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_qq_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-51-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>That looks worse. Out of curiosity I’m going to try using the bestNormalize package I’ve been learning to see if it can recommend the best tranformation.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>BNobject <span class="ot">&lt;-</span> <span class="fu">bestNormalize</span>(data_ex<span class="sc">$</span>MV_Total)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: `progress_estimated()` was deprecated in dplyr 1.0.0.
ℹ The deprecated feature was likely used in the bestNormalize package.
  Please report the issue to the authors.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>BNobject</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Best Normalizing transformation with 3263 Observations
 Estimated Normality Statistics (Pearson P / df, lower =&gt; more normal):
 - arcsinh(x): 24.3547
 - Box-Cox: 24.7039
 - Center+scale: 23.7263
 - Double Reversed Log_b(x+a): 25.4579
 - Exp(x): 344.0186
 - Log_b(x+a): 24.4278
 - orderNorm (ORQ): 23.9759
 - sqrt(x + a): 24.1202
 - Yeo-Johnson: 24.6772
Estimation method: Out-of-sample via CV with 10 folds and 5 repeats
 
Based off these, bestNormalize chose:
center_scale(x) Transformation with 3263 nonmissing obs.
 Estimated statistics:
 - mean (before standardization) = 6.101747 
 - sd (before standardization) = 5.112296 </code></pre>
</div>
</div>
<p>The short explanation of how these values work is that the value closest to 1 is the best transformation, but these are all VERY far from one. So that didn’t help.</p>
<section id="boxplot" class="level4">
<h4 class="anchored" data-anchor-id="boxplot">Boxplot</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Create boxplot to assess for outliers</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">y =</span> MV_Total_log)) <span class="sc">+</span></span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Boxplot of MV Total Log"</span>,</span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"MV Total Log"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_boxplot()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-53-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>There are also no outliers for <code>MV_Total_Log!</code></p>
</section>
<section id="summary-7" class="level4">
<h4 class="anchored" data-anchor-id="summary-7">Summary</h4>
<p>It looks like the best option we have is a log transformation of <code>MV TOTAL</code>.</p>
<p>Alternatively, we will likely end up running a Poisson or Negative Binomial regression to handle this data.</p>
<p><a href="#Outcome_Variables">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"Unit_LOS"</span>, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-54-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>That’s super skewed as well! Let’s try a log transform.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform log transform of MICU LOS</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>Unit_LOS_log <span class="ot">&lt;-</span> <span class="fu">log</span>(data_ex<span class="sc">$</span>Unit_LOS)</span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"Unit_LOS_log"</span>, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-55-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>We’ve got more of an S shape going there. I wonder if a BoxCox transformation is more appropriate?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(bestNormalize)</span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Use bestNormalize to try to find best transformation</span></span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>BNobject <span class="ot">&lt;-</span> <span class="fu">bestNormalize</span>(data_ex<span class="sc">$</span>Unit_LOS)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>BNobject</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Best Normalizing transformation with 6429 Observations
 Estimated Normality Statistics (Pearson P / df, lower =&gt; more normal):
 - arcsinh(x): 9.1854
 - Box-Cox: 5.662
 - Center+scale: 34.243
 - Double Reversed Log_b(x+a): 57.2031
 - Log_b(x+a): 9.1884
 - orderNorm (ORQ): 1.3157
 - sqrt(x + a): 19.5193
 - Yeo-Johnson: 5.6962
Estimation method: Out-of-sample via CV with 10 folds and 5 repeats
 
Based off these, bestNormalize chose:
orderNorm Transformation with 6429 nonmissing obs and ties
 - 515 unique values 
 - Original quantiles:
  0%  25%  50%  75% 100% 
  48   66   95  167  720 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform boxcox transformation</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>Unit_LOS_boxcox <span class="ot">&lt;-</span> <span class="fu">boxcox</span>(data_ex<span class="sc">$</span>Unit_LOS)<span class="sc">$</span>x.t</span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"Unit_LOS_boxcox"</span>, <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-56-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create boxplot to assess for outliers</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">y =</span> Unit_LOS_boxcox)) <span class="sc">+</span></span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-57-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>There are no outliers for boxcox Unit LOS.</p>
<p>That histogram looks better at least, and we don’t have any outliers. The bestNormalize package offers ways to back transform after you run your analysis, but I haven’t gotten that far in learning it yet. It looks like a boxcox transformation is a candidate however.</p>
<section id="summary-8" class="level4">
<h4 class="anchored" data-anchor-id="summary-8">Summary</h4>
<p>Will come back to this. I think there is a specific link function we use in this situation when we have an s-shaped qq plot like that.</p>
<p><a href="#Outcome_Variables">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-4-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`HOSPITAL LOS`"</span>, <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-58-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><code>Hospital LOS</code> also looks logarithmic.</p>
<p>Let’s transform and assess.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform log transform </span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>HOSPITAL_LOS_log <span class="ot">&lt;-</span> <span class="fu">log</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">HOSPITAL LOS</span><span class="st">`</span>)</span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"HOSPITAL_LOS_log"</span>, <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-59-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">y =</span> HOSPITAL_LOS_log)) <span class="sc">+</span></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-59-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Looks good! There are a handful of outliers in there, but the data looks normal and those values will likely be included.</p>
<section id="summary-9" class="level4">
<h4 class="anchored" data-anchor-id="summary-9">Summary</h4>
<p><code>HOSPITAL LOS</code> is normal after a log transform. We will either perform that or a Poisson or Negative Binomial <a href="#Outcome_Variables">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-4-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-4-tab">
<p>We must compute <code>NON_ICU_LOS</code> by subtracting <code>Unit_LOS</code> from <code>HOSPITAL LOS</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute variable for non icu LOS.</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">NON_ICU_LOS =</span> <span class="st">`</span><span class="at">HOSPITAL LOS</span><span class="st">`</span> <span class="sc">-</span> Unit_LOS)</span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"NON_ICU_LOS"</span>, <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-60-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>As expected, that looks exponential.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform log transform</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>NON_ICU_LOS_log <span class="ot">&lt;-</span> <span class="fu">log</span>(data_ex<span class="sc">$</span>NON_ICU_LOS)</span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"NON_ICU_LOS_log"</span>, <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 106 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 106 rows containing non-finite outside the scale range
(`stat_qq()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 106 rows containing non-finite outside the scale range
(`stat_qq_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-61-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>That’s bimodal. Odd.</p>
<p>Let’s try a square root transform</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform log transform</span></span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>NON_ICU_LOS_sqrt <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(data_ex<span class="sc">$</span>NON_ICU_LOS)</span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb118-5"><a href="#cb118-5" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"NON_ICU_LOS_sqrt"</span>, <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-62-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Looks crummy.</p>
<p>Let’s try bestNormalize</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>BNobject <span class="ot">&lt;-</span> <span class="fu">bestNormalize</span>(data_ex<span class="sc">$</span>NON_ICU_LOS)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>BNobject</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Best Normalizing transformation with 6429 Observations
 Estimated Normality Statistics (Pearson P / df, lower =&gt; more normal):
 - arcsinh(x): 7.162
 - Center+scale: 52.1649
 - Double Reversed Log_b(x+a): 58.1332
 - Log_b(x+a): 8.6109
 - orderNorm (ORQ): 1.5855
 - sqrt(x + a): 10.7539
 - Yeo-Johnson: 5.4672
Estimation method: Out-of-sample via CV with 10 folds and 5 repeats
 
Based off these, bestNormalize chose:
orderNorm Transformation with 6429 nonmissing obs and ties
 - 1045 unique values 
 - Original quantiles:
  0%  25%  50%  75% 100% 
   0   32  110  284 9206 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform boxcox transformation</span></span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>NON_ICU_LOS_yeo <span class="ot">&lt;-</span> <span class="fu">yeojohnson</span>(data_ex<span class="sc">$</span>NON_ICU_LOS)<span class="sc">$</span>x.t</span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"NON_ICU_LOS_yeo"</span>, <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-63-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Looks better! Still bimodal but much more normal.</p>
<section id="summary-10" class="level4">
<h4 class="anchored" data-anchor-id="summary-10">Summary</h4>
<p>Looks like Yeo-Johnson transformation may be the way to go.</p>
<p><a href="#Outcome_Variables">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-4-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-5-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine discharge locations</span></span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">table</span>(data_ex<span class="sc">$</span>DISCH_DISP))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Var1</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Freq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Acute IP to RPCU</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">Administrative Discharge</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Admitted as an Inpatient</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">Against Clinical Advice</td>
<td style="text-align: right;">22</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Another Health Care Institution Not Defined w/Planned Readmission</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Court/Law Enforcement</td>
<td style="text-align: right;">22</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Discharge Lounge</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">Discharged to Other Facility</td>
<td style="text-align: right;">23</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Discharged/transferred to a Designated Cancer Center or Children’s Hospital</td>
<td style="text-align: right;">41</td>
</tr>
<tr class="even">
<td style="text-align: left;">Drug/Alch Detox D/C</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expired</td>
<td style="text-align: right;">1137</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expired in Medical Facility</td>
<td style="text-align: right;">8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expired Readmit as Organ Donor</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="even">
<td style="text-align: left;">Federal Hospital</td>
<td style="text-align: right;">43</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Home-Health Care Svc</td>
<td style="text-align: right;">758</td>
</tr>
<tr class="even">
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: right;">2417</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Home or Self Care w/Planned Readmission</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Hospice/Home</td>
<td style="text-align: right;">213</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Hospice/Medical Facility</td>
<td style="text-align: right;">211</td>
</tr>
<tr class="even">
<td style="text-align: left;">Intermediate Care Facility</td>
<td style="text-align: right;">14</td>
</tr>
<tr class="odd">
<td style="text-align: left;">IV Therapy Provider</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Left Against Medical Advice</td>
<td style="text-align: right;">49</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Long Term Care</td>
<td style="text-align: right;">451</td>
</tr>
<tr class="even">
<td style="text-align: left;">Mental Health Facility</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Nursing Facility</td>
<td style="text-align: right;">37</td>
</tr>
<tr class="even">
<td style="text-align: left;">Psychiatric Hospital</td>
<td style="text-align: right;">34</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Rehab Facility</td>
<td style="text-align: right;">249</td>
</tr>
<tr class="even">
<td style="text-align: left;">Short Term Hospital</td>
<td style="text-align: right;">71</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Skilled Nursing Facility</td>
<td style="text-align: right;">596</td>
</tr>
<tr class="even">
<td style="text-align: left;">Swing Bed</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TRANSFER TO CANCER OR CHILDRENS</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>There are a few options we have for to analyze discharge location.</p>
<ul>
<li>We can spit on expired vs not expired</li>
<li>We can split on hom vs other</li>
<li>We can just look at all the groups with the largest N, and collapse the rest into a single variable of ‘other’. This would be
<ul>
<li>Expired (1137), Home (3177), Hospice (424), long term care (451), rehab (249), skilled Nursing facility (596)</li>
</ul></li>
</ul>
<p>We will have to ask the researcher how she wants to group up these discharge locations! Keeping in mind that since we are looking at three different time periods, each group will essentially by a third of what is shown here.</p>
</div>
</div>
</div>
</section>
</section>
<section id="table-1" class="level1">
<h1>Table 1</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up labels of variables.</span></span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">PT_VISITS =</span> <span class="st">`</span><span class="at">TOTAL THERAPY VISITS</span><span class="st">`</span>,</span>
<span id="cb124-4"><a href="#cb124-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">PT_VISITS_PERC  =</span> <span class="st">`</span><span class="at">PERCENT OF DAYS WITH THERAPY VISITS</span><span class="st">`</span>,</span>
<span id="cb124-5"><a href="#cb124-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">DAYS_POST_MICU =</span> <span class="st">`</span><span class="at">ACTUAL DAYS POST MICU</span><span class="st">`</span>,</span>
<span id="cb124-6"><a href="#cb124-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">PT_POST_MICU =</span> <span class="st">`</span><span class="at">PT or OT VISIT DAYS POST MICU</span><span class="st">`</span>,</span>
<span id="cb124-7"><a href="#cb124-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">PERC_POST_ICU =</span> <span class="st">`</span><span class="at">PERCENT POST ICU DAYS THERAPY</span><span class="st">`</span>)</span>
<span id="cb124-8"><a href="#cb124-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-9"><a href="#cb124-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Change label for age from 'negative age' to 'Missing'</span></span>
<span id="cb124-10"><a href="#cb124-10" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb124-11"><a href="#cb124-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Age_Range =</span> <span class="fu">ifelse</span>(Age_Range <span class="sc">==</span> <span class="st">"Negative Age"</span>, <span class="st">"Missing"</span>, Age_Range))</span>
<span id="cb124-12"><a href="#cb124-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-13"><a href="#cb124-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Create labels for variables to make the names of each variable more professional in outputs</span></span>
<span id="cb124-14"><a href="#cb124-14" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span>SEX) <span class="ot">&lt;-</span> <span class="st">"Sex"</span></span>
<span id="cb124-15"><a href="#cb124-15" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span>MV_Total) <span class="ot">&lt;-</span> <span class="st">"Total Mechanical Ventilation Time"</span></span>
<span id="cb124-16"><a href="#cb124-16" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">HOSPITAL LOS</span><span class="st">`</span>) <span class="ot">&lt;-</span> <span class="st">"Hospital Length of Stay"</span></span>
<span id="cb124-17"><a href="#cb124-17" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">ADMIT TO CONSULT</span><span class="st">`</span>) <span class="ot">&lt;-</span> <span class="st">"Time From Admit to Consult"</span></span>
<span id="cb124-18"><a href="#cb124-18" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">CONSULT TO TREAT</span><span class="st">`</span>) <span class="ot">&lt;-</span> <span class="st">"Time from Consult to Treatment"</span></span>
<span id="cb124-19"><a href="#cb124-19" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span>) <span class="ot">&lt;-</span> <span class="st">"Time from Admit to Treatment"</span></span>
<span id="cb124-20"><a href="#cb124-20" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span>PT_VISITS) <span class="ot">&lt;-</span> <span class="st">"Total PT Visits"</span></span>
<span id="cb124-21"><a href="#cb124-21" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span>Unit_LOS) <span class="ot">&lt;-</span> <span class="st">"MICU Length of Stay"</span></span>
<span id="cb124-22"><a href="#cb124-22" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">DAYS WITH THERAPY VISITS</span><span class="st">`</span>) <span class="ot">&lt;-</span> <span class="st">"Days with PT Visits"</span></span>
<span id="cb124-23"><a href="#cb124-23" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span>PT_VISITS_PERC) <span class="ot">&lt;-</span> <span class="st">"% of Days with PT Visits"</span></span>
<span id="cb124-24"><a href="#cb124-24" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span>) <span class="ot">&lt;-</span> <span class="st">"Average Therapy Length"</span></span>
<span id="cb124-25"><a href="#cb124-25" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">MAX THERAPY LENGTH</span><span class="st">`</span>) <span class="ot">&lt;-</span> <span class="st">"Maximum Therapy Length"</span></span>
<span id="cb124-26"><a href="#cb124-26" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">MIN THERAPY LENGTH</span><span class="st">`</span>) <span class="ot">&lt;-</span> <span class="st">"Minimum Therapy Length"</span></span>
<span id="cb124-27"><a href="#cb124-27" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span>DAYS_POST_MICU) <span class="ot">&lt;-</span> <span class="st">"Days Post MICU"</span></span>
<span id="cb124-28"><a href="#cb124-28" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span>PT_POST_MICU) <span class="ot">&lt;-</span> <span class="st">"PT Post MICU"</span></span>
<span id="cb124-29"><a href="#cb124-29" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span>PERC_POST_ICU) <span class="ot">&lt;-</span> <span class="st">"% Post MICU"</span></span>
<span id="cb124-30"><a href="#cb124-30" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span>Age_Range) <span class="ot">&lt;-</span> <span class="st">"Age Range"</span></span>
<span id="cb124-31"><a href="#cb124-31" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span>Age_Quartile) <span class="ot">&lt;-</span> <span class="st">"Age Quartile"</span></span>
<span id="cb124-32"><a href="#cb124-32" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span>NON_ICU_LOS) <span class="ot">&lt;-</span> <span class="st">"NON-ICU Length of Stay"</span></span>
<span id="cb124-33"><a href="#cb124-33" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span>PT_YESNO) <span class="ot">&lt;-</span> <span class="st">"Received PT"</span></span>
<span id="cb124-34"><a href="#cb124-34" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span>MV_YN) <span class="ot">&lt;-</span> <span class="st">"Received Mechanical Ventilation"</span></span>
<span id="cb124-35"><a href="#cb124-35" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span>initiative) <span class="ot">&lt;-</span> <span class="st">"QI Initiative Time Period"</span></span>
<span id="cb124-36"><a href="#cb124-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-37"><a href="#cb124-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Changing labels for clearer output</span></span>
<span id="cb124-38"><a href="#cb124-38" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>SEX <span class="ot">&lt;-</span> <span class="fu">factor</span>(data_ex<span class="sc">$</span>SEX, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"F"</span>, <span class="st">"M"</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Female"</span>, <span class="st">"Male"</span>))</span>
<span id="cb124-39"><a href="#cb124-39" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>PT_YESNO <span class="ot">&lt;-</span> <span class="fu">factor</span>(data_ex<span class="sc">$</span>PT_YESNO, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Yes"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create Table 1 stratified by QI initiative</span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>table1 <span class="ot">&lt;-</span> <span class="fu">table1</span>(<span class="sc">~</span> SEX <span class="sc">+</span> MV_Total <span class="sc">+</span> <span class="st">`</span><span class="at">HOSPITAL LOS</span><span class="st">`</span> <span class="sc">+</span> <span class="st">`</span><span class="at">ADMIT TO CONSULT</span><span class="st">`</span> <span class="sc">+</span> <span class="st">`</span><span class="at">CONSULT TO TREAT</span><span class="st">`</span> <span class="sc">+</span> <span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span> <span class="sc">+</span> PT_VISITS <span class="sc">+</span> Unit_LOS <span class="sc">+</span> <span class="st">`</span><span class="at">DAYS WITH THERAPY VISITS</span><span class="st">`</span> <span class="sc">+</span>  PT_VISITS_PERC <span class="sc">+</span> <span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span> <span class="sc">+</span> <span class="st">`</span><span class="at">MAX THERAPY LENGTH</span><span class="st">`</span> <span class="sc">+</span> <span class="st">`</span><span class="at">MIN THERAPY LENGTH</span><span class="st">`</span> <span class="sc">+</span>  DAYS_POST_MICU <span class="sc">+</span> PT_POST_MICU <span class="sc">+</span> PERC_POST_ICU <span class="sc">+</span> Age_Range <span class="sc">+</span> Age_Quartile <span class="sc">+</span> NON_ICU_LOS <span class="sc">+</span>  PT_YESNO <span class="sc">+</span> MV_YN <span class="sc">|</span> initiative, <span class="at">data =</span> data_ex, <span class="at">caption =</span> <span class="st">"Descriptive Statistics by QI-Initiative Time Period"</span>, <span class="at">overall =</span> <span class="fu">c</span>(<span class="at">left=</span><span class="st">"Total"</span>))</span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a>table1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="Rtable1">
<table class="Rtable1 caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Descriptive Statistics by QI-Initiative Time Period</caption>
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th class="rowlabel firstrow lastrow" data-quarto-table-cell-role="th"></th>
<th class="firstrow lastrow" data-quarto-table-cell-role="th"><span class="stratlabel">Total<br>
<span class="stratn">(N=6429)</span></span></th>
<th class="firstrow lastrow" data-quarto-table-cell-role="th"><span class="stratlabel">During<br>
<span class="stratn">(N=661)</span></span></th>
<th class="firstrow lastrow" data-quarto-table-cell-role="th"><span class="stratlabel">Post<br>
<span class="stratn">(N=2871)</span></span></th>
<th class="firstrow lastrow" data-quarto-table-cell-role="th"><span class="stratlabel">Pre<br>
<span class="stratn">(N=2897)</span></span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td class="rowlabel firstrow">SEX</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="even">
<td class="rowlabel">Female</td>
<td>2920 (45.4%)</td>
<td>308 (46.6%)</td>
<td>1284 (44.7%)</td>
<td>1328 (45.8%)</td>
</tr>
<tr class="odd">
<td class="rowlabel lastrow">Male</td>
<td class="lastrow">3509 (54.6%)</td>
<td class="lastrow">353 (53.4%)</td>
<td class="lastrow">1587 (55.3%)</td>
<td class="lastrow">1569 (54.2%)</td>
</tr>
<tr class="even">
<td class="rowlabel firstrow">Total Mechanical Ventilation Time</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="odd">
<td class="rowlabel">Mean (SD)</td>
<td>6.10 (5.11)</td>
<td>6.24 (5.07)</td>
<td>6.10 (5.12)</td>
<td>6.06 (5.11)</td>
</tr>
<tr class="even">
<td class="rowlabel">Median [Min, Max]</td>
<td>4.00 [1.00, 31.0]</td>
<td>4.00 [1.00, 24.0]</td>
<td>4.00 [1.00, 31.0]</td>
<td>4.00 [1.00, 29.0]</td>
</tr>
<tr class="odd">
<td class="rowlabel lastrow">Missing</td>
<td class="lastrow">3166 (49.2%)</td>
<td class="lastrow">322 (48.7%)</td>
<td class="lastrow">1245 (43.4%)</td>
<td class="lastrow">1599 (55.2%)</td>
</tr>
<tr class="even">
<td class="rowlabel firstrow">Hospital Length of Stay</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="odd">
<td class="rowlabel">Mean (SD)</td>
<td>378 (429)</td>
<td>402 (516)</td>
<td>388 (436)</td>
<td>362 (398)</td>
</tr>
<tr class="even">
<td class="rowlabel lastrow">Median [Min, Max]</td>
<td class="lastrow">247 [49.0, 9270]</td>
<td class="lastrow">266 [51.0, 9270]</td>
<td class="lastrow">255 [49.0, 6770]</td>
<td class="lastrow">241 [49.0, 6360]</td>
</tr>
<tr class="odd">
<td class="rowlabel firstrow">Time From Admit to Consult</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="even">
<td class="rowlabel">Mean (SD)</td>
<td>29.5 (67.6)</td>
<td>6.26 (21.4)</td>
<td>7.98 (30.3)</td>
<td>64.7 (92.6)</td>
</tr>
<tr class="odd">
<td class="rowlabel">Median [Min, Max]</td>
<td>0 [0, 905]</td>
<td>0 [0, 209]</td>
<td>0 [0, 501]</td>
<td>36.0 [0, 905]</td>
</tr>
<tr class="even">
<td class="rowlabel lastrow">Missing</td>
<td class="lastrow">862 (13.4%)</td>
<td class="lastrow">20 (3.0%)</td>
<td class="lastrow">79 (2.8%)</td>
<td class="lastrow">763 (26.3%)</td>
</tr>
<tr class="odd">
<td class="rowlabel firstrow">Time from Consult to Treatment</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="even">
<td class="rowlabel">Mean (SD)</td>
<td>105 (191)</td>
<td>98.3 (183)</td>
<td>105 (192)</td>
<td>107 (191)</td>
</tr>
<tr class="odd">
<td class="rowlabel">Median [Min, Max]</td>
<td>44.0 [-405, 3050]</td>
<td>41.5 [-189, 1770]</td>
<td>46.0 [-405, 3050]</td>
<td>40.0 [-18.0, 2110]</td>
</tr>
<tr class="even">
<td class="rowlabel lastrow">Missing</td>
<td class="lastrow">2388 (37.1%)</td>
<td class="lastrow">89 (13.5%)</td>
<td class="lastrow">642 (22.4%)</td>
<td class="lastrow">1657 (57.2%)</td>
</tr>
<tr class="odd">
<td class="rowlabel firstrow">Time from Admit to Treatment</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="even">
<td class="rowlabel">Mean (SD)</td>
<td>64.0 (66.0)</td>
<td>40.6 (33.1)</td>
<td>50.1 (41.6)</td>
<td>100 (93.4)</td>
</tr>
<tr class="odd">
<td class="rowlabel">Median [Min, Max]</td>
<td>44.0 [-1.00, 636]</td>
<td>32.0 [2.00, 296]</td>
<td>41.0 [-1.00, 477]</td>
<td>68.0 [1.00, 636]</td>
</tr>
<tr class="even">
<td class="rowlabel lastrow">Missing</td>
<td class="lastrow">2372 (36.9%)</td>
<td class="lastrow">86 (13.0%)</td>
<td class="lastrow">630 (21.9%)</td>
<td class="lastrow">1656 (57.2%)</td>
</tr>
<tr class="odd">
<td class="rowlabel firstrow">Total PT Visits</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="even">
<td class="rowlabel">Mean (SD)</td>
<td>1.78 (2.51)</td>
<td>3.18 (3.60)</td>
<td>2.41 (2.76)</td>
<td>0.828 (1.34)</td>
</tr>
<tr class="odd">
<td class="rowlabel lastrow">Median [Min, Max]</td>
<td class="lastrow">1.00 [0, 39.0]</td>
<td class="lastrow">2.00 [0, 27.0]</td>
<td class="lastrow">2.00 [0, 39.0]</td>
<td class="lastrow">0 [0, 17.0]</td>
</tr>
<tr class="even">
<td class="rowlabel firstrow">MICU Length of Stay</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="odd">
<td class="rowlabel">Mean (SD)</td>
<td>139 (113)</td>
<td>140 (117)</td>
<td>139 (113)</td>
<td>138 (112)</td>
</tr>
<tr class="even">
<td class="rowlabel lastrow">Median [Min, Max]</td>
<td class="lastrow">95.0 [48.0, 720]</td>
<td class="lastrow">94.0 [48.0, 692]</td>
<td class="lastrow">94.0 [48.0, 720]</td>
<td class="lastrow">95.0 [48.0, 717]</td>
</tr>
<tr class="odd">
<td class="rowlabel firstrow">Days with PT Visits</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="even">
<td class="rowlabel">Mean (SD)</td>
<td>1.69 (2.29)</td>
<td>2.92 (3.13)</td>
<td>2.30 (2.50)</td>
<td>0.802 (1.29)</td>
</tr>
<tr class="odd">
<td class="rowlabel lastrow">Median [Min, Max]</td>
<td class="lastrow">1.00 [0, 23.0]</td>
<td class="lastrow">2.00 [0, 23.0]</td>
<td class="lastrow">2.00 [0, 22.0]</td>
<td class="lastrow">0 [0, 16.0]</td>
</tr>
<tr class="even">
<td class="rowlabel firstrow">% of Days with PT Visits</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="odd">
<td class="rowlabel">Mean (SD)</td>
<td>30.0 (30.4)</td>
<td>50.5 (30.4)</td>
<td>41.1 (30.8)</td>
<td>14.3 (20.8)</td>
</tr>
<tr class="even">
<td class="rowlabel lastrow">Median [Min, Max]</td>
<td class="lastrow">25.0 [0, 100]</td>
<td class="lastrow">50.0 [0, 100]</td>
<td class="lastrow">40.0 [0, 100]</td>
<td class="lastrow">0 [0, 100]</td>
</tr>
<tr class="odd">
<td class="rowlabel firstrow">Average Therapy Length</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="even">
<td class="rowlabel">Mean (SD)</td>
<td>20.7 (19.0)</td>
<td>28.3 (15.5)</td>
<td>26.5 (17.9)</td>
<td>13.3 (18.0)</td>
</tr>
<tr class="odd">
<td class="rowlabel">Median [Min, Max]</td>
<td>22.0 [0, 97.0]</td>
<td>30.0 [0, 90.0]</td>
<td>29.0 [0, 97.0]</td>
<td>0 [0, 90.0]</td>
</tr>
<tr class="even">
<td class="rowlabel lastrow">Missing</td>
<td class="lastrow">8 (0.1%)</td>
<td class="lastrow">1 (0.2%)</td>
<td class="lastrow">4 (0.1%)</td>
<td class="lastrow">3 (0.1%)</td>
</tr>
<tr class="odd">
<td class="rowlabel firstrow">Maximum Therapy Length</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="even">
<td class="rowlabel">Mean (SD)</td>
<td>25.5 (24.4)</td>
<td>37.5 (22.6)</td>
<td>33.3 (24.0)</td>
<td>15.1 (20.8)</td>
</tr>
<tr class="odd">
<td class="rowlabel">Median [Min, Max]</td>
<td>25.0 [0, 140]</td>
<td>38.0 [0, 140]</td>
<td>35.0 [0, 117]</td>
<td>0 [0, 110]</td>
</tr>
<tr class="even">
<td class="rowlabel lastrow">Missing</td>
<td class="lastrow">8 (0.1%)</td>
<td class="lastrow">1 (0.2%)</td>
<td class="lastrow">4 (0.1%)</td>
<td class="lastrow">3 (0.1%)</td>
</tr>
<tr class="odd">
<td class="rowlabel firstrow">Minimum Therapy Length</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="even">
<td class="rowlabel">Mean (SD)</td>
<td>16.4 (16.4)</td>
<td>20.3 (14.0)</td>
<td>20.3 (15.7)</td>
<td>11.6 (16.4)</td>
</tr>
<tr class="odd">
<td class="rowlabel">Median [Min, Max]</td>
<td>15.0 [0, 97.0]</td>
<td>20.0 [0, 83.0]</td>
<td>20.0 [0, 97.0]</td>
<td>0 [0, 90.0]</td>
</tr>
<tr class="even">
<td class="rowlabel lastrow">Missing</td>
<td class="lastrow">2 (0.0%)</td>
<td class="lastrow">0 (0%)</td>
<td class="lastrow">1 (0.0%)</td>
<td class="lastrow">1 (0.0%)</td>
</tr>
<tr class="odd">
<td class="rowlabel firstrow">Days Post MICU</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="even">
<td class="rowlabel">Mean (SD)</td>
<td>6.69 (13.4)</td>
<td>7.65 (18.7)</td>
<td>7.05 (13.6)</td>
<td>6.11 (11.5)</td>
</tr>
<tr class="odd">
<td class="rowlabel lastrow">Median [Min, Max]</td>
<td class="lastrow">3.00 [0, 383]</td>
<td class="lastrow">4.00 [0, 383]</td>
<td class="lastrow">3.00 [0, 278]</td>
<td class="lastrow">2.00 [0, 175]</td>
</tr>
<tr class="even">
<td class="rowlabel firstrow">PT Post MICU</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="odd">
<td class="rowlabel">Mean (SD)</td>
<td>1.74 (3.53)</td>
<td>2.20 (4.07)</td>
<td>1.78 (3.36)</td>
<td>1.58 (3.54)</td>
</tr>
<tr class="even">
<td class="rowlabel lastrow">Median [Min, Max]</td>
<td class="lastrow">0 [0, 43.0]</td>
<td class="lastrow">1.00 [0, 37.0]</td>
<td class="lastrow">0 [0, 43.0]</td>
<td class="lastrow">0 [0, 43.0]</td>
</tr>
<tr class="odd">
<td class="rowlabel firstrow">% Post MICU</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="even">
<td class="rowlabel">Mean (SD)</td>
<td>18.2 (24.9)</td>
<td>21.9 (25.8)</td>
<td>18.5 (24.8)</td>
<td>17.0 (24.6)</td>
</tr>
<tr class="odd">
<td class="rowlabel lastrow">Median [Min, Max]</td>
<td class="lastrow">0 [0, 100]</td>
<td class="lastrow">14.3 [0, 100]</td>
<td class="lastrow">0 [0, 100]</td>
<td class="lastrow">0 [0, 100]</td>
</tr>
<tr class="even">
<td class="rowlabel firstrow">Age Range</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="odd">
<td class="rowlabel">18-39</td>
<td>1121 (17.4%)</td>
<td>103 (15.6%)</td>
<td>533 (18.6%)</td>
<td>485 (16.7%)</td>
</tr>
<tr class="even">
<td class="rowlabel">40-49</td>
<td>899 (14.0%)</td>
<td>111 (16.8%)</td>
<td>373 (13.0%)</td>
<td>415 (14.3%)</td>
</tr>
<tr class="odd">
<td class="rowlabel">50-59</td>
<td>1492 (23.2%)</td>
<td>141 (21.3%)</td>
<td>620 (21.6%)</td>
<td>731 (25.2%)</td>
</tr>
<tr class="even">
<td class="rowlabel">60-69</td>
<td>1574 (24.5%)</td>
<td>169 (25.6%)</td>
<td>722 (25.1%)</td>
<td>683 (23.6%)</td>
</tr>
<tr class="odd">
<td class="rowlabel">70+</td>
<td>1327 (20.6%)</td>
<td>133 (20.1%)</td>
<td>616 (21.5%)</td>
<td>578 (20.0%)</td>
</tr>
<tr class="even">
<td class="rowlabel lastrow">Missing</td>
<td class="lastrow">16 (0.2%)</td>
<td class="lastrow">4 (0.6%)</td>
<td class="lastrow">7 (0.2%)</td>
<td class="lastrow">5 (0.2%)</td>
</tr>
<tr class="odd">
<td class="rowlabel firstrow">Age Quartile</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="even">
<td class="rowlabel">14-42</td>
<td>1379 (21.4%)</td>
<td>136 (20.6%)</td>
<td>633 (22.0%)</td>
<td>610 (21.1%)</td>
</tr>
<tr class="odd">
<td class="rowlabel">43-56</td>
<td>1637 (25.5%)</td>
<td>169 (25.6%)</td>
<td>668 (23.3%)</td>
<td>800 (27.6%)</td>
</tr>
<tr class="even">
<td class="rowlabel">57-66</td>
<td>1652 (25.7%)</td>
<td>179 (27.1%)</td>
<td>740 (25.8%)</td>
<td>733 (25.3%)</td>
</tr>
<tr class="odd">
<td class="rowlabel lastrow">67+</td>
<td class="lastrow">1761 (27.4%)</td>
<td class="lastrow">177 (26.8%)</td>
<td class="lastrow">830 (28.9%)</td>
<td class="lastrow">754 (26.0%)</td>
</tr>
<tr class="even">
<td class="rowlabel firstrow">NON-ICU Length of Stay</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="odd">
<td class="rowlabel">Mean (SD)</td>
<td>239 (404)</td>
<td>262 (497)</td>
<td>249 (411)</td>
<td>224 (371)</td>
</tr>
<tr class="even">
<td class="rowlabel lastrow">Median [Min, Max]</td>
<td class="lastrow">110 [0, 9210]</td>
<td class="lastrow">125 [0, 9210]</td>
<td class="lastrow">117 [0, 6680]</td>
<td class="lastrow">102 [0, 6310]</td>
</tr>
<tr class="odd">
<td class="rowlabel firstrow">PT_YESNO</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="even">
<td class="rowlabel">No</td>
<td>2374 (36.9%)</td>
<td>86 (13.0%)</td>
<td>630 (21.9%)</td>
<td>1658 (57.2%)</td>
</tr>
<tr class="odd">
<td class="rowlabel lastrow">Yes</td>
<td class="lastrow">4055 (63.1%)</td>
<td class="lastrow">575 (87.0%)</td>
<td class="lastrow">2241 (78.1%)</td>
<td class="lastrow">1239 (42.8%)</td>
</tr>
<tr class="even">
<td class="rowlabel firstrow">Received Mechanical Ventilation</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="odd">
<td class="rowlabel">Mean (SD)</td>
<td>0.508 (0.500)</td>
<td>0.513 (0.500)</td>
<td>0.566 (0.496)</td>
<td>0.448 (0.497)</td>
</tr>
<tr class="even">
<td class="rowlabel lastrow">Median [Min, Max]</td>
<td class="lastrow">1.00 [0, 1.00]</td>
<td class="lastrow">1.00 [0, 1.00]</td>
<td class="lastrow">1.00 [0, 1.00]</td>
<td class="lastrow">0 [0, 1.00]</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="correlation-matrix" class="level1">
<h1>Correlation Matrix</h1>
<section id="remove-variables" class="level4">
<h4 class="anchored" data-anchor-id="remove-variables">Remove Variables</h4>
<p>Here we will remove variables we will not be using in the analysis as previously discussed.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filter dataset for correlation matrix</span></span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a>data_sub <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="st">`</span><span class="at">PROBLEM LIST DX CODES</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">PROBLEM LIST DX NAMES</span><span class="st">`</span>, <span class="sc">-</span>DISCH_DISP, <span class="sc">-</span><span class="st">`</span><span class="at">DEPT BEFORE Unit</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">DEPT AFTER Unit</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">CONSULT TO TREAT</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span>, <span class="sc">-</span> ACTUAL_DAYS_POST_MICU_log, <span class="sc">-</span> ADMIT_TO_CONSULT_log, <span class="sc">-</span>TOTAL_THERAPY_VISITS_log, <span class="sc">-</span>PT_YESNO, <span class="sc">-</span>initiative)</span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-5"><a href="#cb126-5" aria-hidden="true" tabindex="-1"></a>data_sub <span class="ot">&lt;-</span> data_sub[,<span class="dv">1</span><span class="sc">:</span><span class="dv">22</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's clean our output by making a trimmed dataset excluding extraneous variables</span></span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a>data_for_matrix <span class="ot">&lt;-</span> data_sub <span class="sc">|&gt;</span> </span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Age_Range, <span class="sc">-</span>Admit_MonthYear, <span class="sc">-</span>Age_Quartile, <span class="sc">-</span>Unit_LOS_log, <span class="sc">-</span>MV_Total_sqrt, <span class="sc">-</span>MV_Total_log, <span class="sc">-</span> MV_YN) <span class="sc">|&gt;</span> </span>
<span id="cb127-4"><a href="#cb127-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Unit_LOS, MV_Total, <span class="fu">everything</span>())</span>
<span id="cb127-5"><a href="#cb127-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-6"><a href="#cb127-6" aria-hidden="true" tabindex="-1"></a><span class="co"># We factored our variables at the start. To make a correlation matrix we must reconvert those back to numeric</span></span>
<span id="cb127-7"><a href="#cb127-7" aria-hidden="true" tabindex="-1"></a>data_for_matrix <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">lapply</span>(data_for_matrix, <span class="cf">function</span>(x) <span class="cf">if</span> (<span class="fu">is.factor</span>(x)) <span class="fu">as.numeric</span>(x) <span class="cf">else</span> x))</span>
<span id="cb127-8"><a href="#cb127-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-9"><a href="#cb127-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-10"><a href="#cb127-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a correlation matrix with all variables of the trimmed data set</span></span>
<span id="cb127-11"><a href="#cb127-11" aria-hidden="true" tabindex="-1"></a>correlation_matrix <span class="ot">&lt;-</span> <span class="fu">cor</span>(data_for_matrix, <span class="at">use =</span> <span class="st">"complete.obs"</span>)</span>
<span id="cb127-12"><a href="#cb127-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-13"><a href="#cb127-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the matrix</span></span>
<span id="cb127-14"><a href="#cb127-14" aria-hidden="true" tabindex="-1"></a><span class="fu">corrplot</span>(correlation_matrix, <span class="at">method =</span> <span class="st">"color"</span>, <span class="at">addCoef.col =</span> <span class="st">"Black"</span>, <span class="at">tl.cex =</span> <span class="fl">0.8</span>, <span class="at">number.cex =</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-68-1.png" class="img-fluid figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="main-obserations" class="level4">
<h4 class="anchored" data-anchor-id="main-obserations">Main Obserations</h4>
<p>The variables that are most correlated with our outcome variables of <code>UNIT_LOS</code> and <code>MV_Total</code> are:</p>
<ul>
<li><code>HOSPITAL_LOS</code></li>
<li><code>ADMIT.TO.CONSULT</code></li>
<li><code>PT_VISITS</code></li>
<li><code>DAYS.WITH.THERAPY.VISITS</code></li>
<li><code>AVERAGE THERAPY LENGTH</code></li>
<li><code>MAX THERAPY LENGTH</code></li>
</ul>
<p>These will be important to examine and potentially control for in our modelS.</p>
</section>
</section>
<section id="Bi" class="level1">
<h1>Bivariate Comparisons</h1>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true" href="">Hospital Length of Stay</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false" href="">Admit to Consult Time</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-3" role="tab" aria-controls="tabset-5-3" aria-selected="false" href="">Physical Therapy Visits</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-4" role="tab" aria-controls="tabset-5-4" aria-selected="false" href="">Days with Therapy Visits</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-5" role="tab" aria-controls="tabset-5-5" aria-selected="false" href="">Average Therapy Length</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-6-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-6" role="tab" aria-controls="tabset-5-6" aria-selected="false" href="">Maximum Therapy Length</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-7-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-7" role="tab" aria-controls="tabset-5-7" aria-selected="false" href="">Admit to Consult</a></li></ul>
<div class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create scatterplot</span></span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">HOSPITAL LOS</span><span class="st">`</span>, <span class="at">y =</span> Unit_LOS)) <span class="sc">+</span></span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb128-4"><a href="#cb128-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb128-5"><a href="#cb128-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"MICU Length of Stay by Hospital Length of Stay"</span>,</span>
<span id="cb128-6"><a href="#cb128-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Hospital Length of Stay"</span>,</span>
<span id="cb128-7"><a href="#cb128-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"MICU Length of stay"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-69-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This is an interesting shape! This sharp pattern is because some patients were admitted directly into the MICU. So there is a 1 to 1 connection between their hospital length of stay and MICU length of stay.</p>
<p>Basically we probably can’t use <code>UNIT_LOS</code> as a covariate in this model because it is so intrinsically intertwined with <code>MICU LOS</code>.</p>
<p><a href="#Bi">Top of Tabset</a></p>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<section id="micu-length-of-stay-1" class="level3">
<h3 class="anchored" data-anchor-id="micu-length-of-stay-1">MICU Length of Stay</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create scatterplot</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">ADMIT TO CONSULT</span><span class="st">`</span>, <span class="at">y =</span> Unit_LOS)) <span class="sc">+</span></span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb129-5"><a href="#cb129-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"MICU Length of Stay by Admit to Consult Time"</span>,</span>
<span id="cb129-6"><a href="#cb129-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit to Consult Time"</span>,</span>
<span id="cb129-7"><a href="#cb129-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"MICU Length of stay"</span>) <span class="sc">+</span></span>
<span id="cb129-8"><a href="#cb129-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 862 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 862 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-70-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>We can see that a lot of patients that were in the hospital did not receive a consult (values= 0). We may have to filter these patients out or run a zero-inflated regression.</p>
<p>The longer it took between a patient’s admit to consult the longer they stayed in the MICU.</p>
<section id="total-mechanical-ventilation" class="level4">
<h4 class="anchored" data-anchor-id="total-mechanical-ventilation">Total Mechanical Ventilation</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create scatterplot</span></span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">ADMIT TO CONSULT</span><span class="st">`</span>, <span class="at">y =</span> MV_Total)) <span class="sc">+</span></span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb133-5"><a href="#cb133-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Total Mechanical Ventilation Time by Admit to Consult Time"</span>,</span>
<span id="cb133-6"><a href="#cb133-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit to Consult Time"</span>,</span>
<span id="cb133-7"><a href="#cb133-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Mechanical Ventilation Time"</span>) <span class="sc">+</span></span>
<span id="cb133-8"><a href="#cb133-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3541 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3541 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-71-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the regression</span></span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(MV_Total <span class="sc">~</span> <span class="st">`</span><span class="at">ADMIT TO CONSULT</span><span class="st">`</span>, <span class="at">data =</span> data_ex)</span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = MV_Total ~ `ADMIT TO CONSULT`, data = data_ex)

Residuals:
    Min      1Q  Median      3Q     Max 
-13.803  -3.698  -1.698   1.302  25.302 

Coefficients:
                   Estimate Std. Error t value            Pr(&gt;|t|)    
(Intercept)        5.697910   0.102746   55.46 &lt;0.0000000000000002 ***
`ADMIT TO CONSULT` 0.013812   0.001163   11.87 &lt;0.0000000000000002 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 5.042 on 2886 degrees of freedom
  (3541 observations deleted due to missingness)
Multiple R-squared:  0.04656,   Adjusted R-squared:  0.04623 
F-statistic: 140.9 on 1 and 2886 DF,  p-value: &lt; 0.00000000000000022</code></pre>
</div>
</div>
<p>Similarly, many patients that were not mechanically ventilated.</p>
<p>Otherwise there is a strong linear relationship here.</p>
<p>The longer it took between a patient’s admit to consult the more time they spent mechanically ventilated.</p>
<p><a href="#Bi">Top of Tabset</a></p>
</section>
</section>
</div>
<div id="tabset-5-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-3-tab">
<section id="micu-length-of-stay-2" class="level4">
<h4 class="anchored" data-anchor-id="micu-length-of-stay-2">MICU Length of Stay</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create scatterplot</span></span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">x =</span> PT_VISITS, <span class="at">y =</span> Unit_LOS)) <span class="sc">+</span></span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb139-4"><a href="#cb139-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb139-5"><a href="#cb139-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"MICU Length of Stay by Hospital Length of Stay"</span>,</span>
<span id="cb139-6"><a href="#cb139-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Number of PT Visits"</span>,</span>
<span id="cb139-7"><a href="#cb139-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"MICU Length of stay"</span>) <span class="sc">+</span></span>
<span id="cb139-8"><a href="#cb139-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-73-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the regression</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(Unit_LOS <span class="sc">~</span> PT_VISITS, <span class="at">data =</span> data_ex)</span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = Unit_LOS ~ PT_VISITS, data = data_ex)

Residuals:
    Min      1Q  Median      3Q     Max 
-550.70  -52.52  -27.32   23.08  590.68 

Coefficients:
            Estimate Std. Error t value            Pr(&gt;|t|)    
(Intercept)  93.3168     1.4189   65.77 &lt;0.0000000000000002 ***
PT_VISITS    25.5992     0.4609   55.54 &lt;0.0000000000000002 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 92.93 on 6427 degrees of freedom
Multiple R-squared:  0.3243,    Adjusted R-squared:  0.3242 
F-statistic:  3085 on 1 and 6427 DF,  p-value: &lt; 0.00000000000000022</code></pre>
</div>
</div>
<p>This makes sense, patients that needed more intense and frequent PT visits did so because they had more extreme conditions and therefore stayed longer in the MICU.</p>
</section>
<section id="total-mechanical-ventilation-time" class="level4">
<h4 class="anchored" data-anchor-id="total-mechanical-ventilation-time">Total Mechanical Ventilation Time</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create scatterplot</span></span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">x =</span> PT_VISITS, <span class="at">y =</span> MV_Total)) <span class="sc">+</span></span>
<span id="cb143-3"><a href="#cb143-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb143-4"><a href="#cb143-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb143-5"><a href="#cb143-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Mechanical Ventilation Time by Number of PT Visits"</span>,</span>
<span id="cb143-6"><a href="#cb143-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Number of PT Visits"</span>,</span>
<span id="cb143-7"><a href="#cb143-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Mechanical Ventilation Time"</span>) <span class="sc">+</span></span>
<span id="cb143-8"><a href="#cb143-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-75-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the regression</span></span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(MV_Total <span class="sc">~</span> PT_VISITS, <span class="at">data =</span> data_ex)</span>
<span id="cb147-3"><a href="#cb147-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = MV_Total ~ PT_VISITS, data = data_ex)

Residuals:
    Min      1Q  Median      3Q     Max 
-17.226  -2.926  -1.445   1.555  24.555 

Coefficients:
            Estimate Std. Error t value            Pr(&gt;|t|)    
(Intercept)  4.44472    0.09995   44.47 &lt;0.0000000000000002 ***
PT_VISITS    0.74087    0.02654   27.92 &lt;0.0000000000000002 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 4.594 on 3261 degrees of freedom
  (3166 observations deleted due to missingness)
Multiple R-squared:  0.1929,    Adjusted R-squared:  0.1927 
F-statistic: 779.4 on 1 and 3261 DF,  p-value: &lt; 0.00000000000000022</code></pre>
</div>
</div>
<p>Patients that had more PT visits had more time on mechanical ventilation, but they probably had more PT visits BECAUSE they were mechanically ventilated.</p>
<p><a href="#Bi">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-5-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-4-tab">
<section id="micu-length-of-stay-3" class="level4">
<h4 class="anchored" data-anchor-id="micu-length-of-stay-3">MICU Length of Stay</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create scatterplot</span></span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">DAYS WITH THERAPY VISITS</span><span class="st">`</span>, <span class="at">y =</span> Unit_LOS)) <span class="sc">+</span></span>
<span id="cb149-3"><a href="#cb149-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb149-4"><a href="#cb149-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb149-5"><a href="#cb149-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"MICU Length of Stay by Days with Therapy Visits"</span>,</span>
<span id="cb149-6"><a href="#cb149-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Days with Therapy Visits"</span>,</span>
<span id="cb149-7"><a href="#cb149-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"MICU Length of stay"</span>) <span class="sc">+</span></span>
<span id="cb149-8"><a href="#cb149-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-77-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the regression</span></span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(Unit_LOS <span class="sc">~</span> <span class="st">`</span><span class="at">DAYS WITH THERAPY VISITS</span><span class="st">`</span>, <span class="at">data =</span> data_ex)</span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = Unit_LOS ~ `DAYS WITH THERAPY VISITS`, data = data_ex)

Residuals:
    Min      1Q  Median      3Q     Max 
-154.48  -53.74  -25.99   23.14  594.01 

Coefficients:
                           Estimate Std. Error t value            Pr(&gt;|t|)    
(Intercept)                 89.9908     1.4213   63.32 &lt;0.0000000000000002 ***
`DAYS WITH THERAPY VISITS`  28.9367     0.5005   57.81 &lt;0.0000000000000002 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 91.69 on 6427 degrees of freedom
Multiple R-squared:  0.3421,    Adjusted R-squared:  0.342 
F-statistic:  3342 on 1 and 6427 DF,  p-value: &lt; 0.00000000000000022</code></pre>
</div>
</div>
<p>This is basically the same variables as <code>PT_VISITS</code>.</p>
</section>
<section id="mechanical-ventilation-time" class="level4">
<h4 class="anchored" data-anchor-id="mechanical-ventilation-time">Mechanical Ventilation Time</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create scatterplot</span></span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">x =</span> PT_VISITS, <span class="at">y =</span> MV_Total)) <span class="sc">+</span></span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb153-4"><a href="#cb153-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb153-5"><a href="#cb153-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Mechanical Ventilation Time by Number of PT Visits"</span>,</span>
<span id="cb153-6"><a href="#cb153-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Number of PT Visits"</span>,</span>
<span id="cb153-7"><a href="#cb153-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Mechanical Ventilation Time"</span>) <span class="sc">+</span></span>
<span id="cb153-8"><a href="#cb153-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-79-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the regression</span></span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(MV_Total <span class="sc">~</span> <span class="st">`</span><span class="at">DAYS WITH THERAPY VISITS</span><span class="st">`</span>, <span class="at">data =</span> data_ex)</span>
<span id="cb157-3"><a href="#cb157-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = MV_Total ~ `DAYS WITH THERAPY VISITS`, data = data_ex)

Residuals:
    Min      1Q  Median      3Q     Max 
-15.858  -3.002  -1.308   1.692  24.692 

Coefficients:
                           Estimate Std. Error t value            Pr(&gt;|t|)    
(Intercept)                 4.30784    0.10094   42.68 &lt;0.0000000000000002 ***
`DAYS WITH THERAPY VISITS`  0.84686    0.02918   29.02 &lt;0.0000000000000002 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 4.558 on 3261 degrees of freedom
  (3166 observations deleted due to missingness)
Multiple R-squared:  0.2053,    Adjusted R-squared:  0.205 
F-statistic: 842.2 on 1 and 3261 DF,  p-value: &lt; 0.00000000000000022</code></pre>
</div>
</div>
<p><a href="#Bi">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-5-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-5-tab">
<section id="micu-length-of-stay-4" class="level4">
<h4 class="anchored" data-anchor-id="micu-length-of-stay-4">MICU Length of Stay</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create scatterplot</span></span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span>, <span class="at">y =</span> Unit_LOS)) <span class="sc">+</span></span>
<span id="cb159-3"><a href="#cb159-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb159-4"><a href="#cb159-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb159-5"><a href="#cb159-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"MICU Length of Stay by Average Therapy Length"</span>,</span>
<span id="cb159-6"><a href="#cb159-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Average Therapy Length"</span>,</span>
<span id="cb159-7"><a href="#cb159-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"MICU Length of stay"</span>) <span class="sc">+</span></span>
<span id="cb159-8"><a href="#cb159-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 8 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 8 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-81-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the regression</span></span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(Unit_LOS <span class="sc">~</span> <span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span>, <span class="at">data =</span> data_ex)</span>
<span id="cb163-3"><a href="#cb163-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = Unit_LOS ~ `AVG THERAPY LENGTH`, data = data_ex)

Residuals:
    Min      1Q  Median      3Q     Max 
-192.34  -60.60  -36.47   26.57  576.25 

Coefficients:
                      Estimate Std. Error t value            Pr(&gt;|t|)    
(Intercept)          107.74921    2.02087   53.32 &lt;0.0000000000000002 ***
`AVG THERAPY LENGTH`   1.49068    0.07199   20.71 &lt;0.0000000000000002 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 109.3 on 6419 degrees of freedom
  (8 observations deleted due to missingness)
Multiple R-squared:  0.06262,   Adjusted R-squared:  0.06247 
F-statistic: 428.8 on 1 and 6419 DF,  p-value: &lt; 0.00000000000000022</code></pre>
</div>
</div>
<p>Weaker but significant relationship.</p>
</section>
<section id="total-mechanical-ventilation-time-1" class="level4">
<h4 class="anchored" data-anchor-id="total-mechanical-ventilation-time-1">Total Mechanical Ventilation Time</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create scatterplot</span></span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span>, <span class="at">y =</span> MV_Total)) <span class="sc">+</span></span>
<span id="cb165-3"><a href="#cb165-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb165-4"><a href="#cb165-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb165-5"><a href="#cb165-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"MICU Length of Stay by Average Therapy Length"</span>,</span>
<span id="cb165-6"><a href="#cb165-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Average Therapy Length"</span>,</span>
<span id="cb165-7"><a href="#cb165-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Total Mechanical Ventilation Time"</span>) <span class="sc">+</span></span>
<span id="cb165-8"><a href="#cb165-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3171 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3171 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-83-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the regression</span></span>
<span id="cb169-2"><a href="#cb169-2" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(MV_Total <span class="sc">~</span> <span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span>, <span class="at">data =</span> data_ex)</span>
<span id="cb169-3"><a href="#cb169-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = MV_Total ~ `AVG THERAPY LENGTH`, data = data_ex)

Residuals:
   Min     1Q Median     3Q    Max 
-7.799 -3.204 -1.743  1.937 24.095 

Coefficients:
                     Estimate Std. Error t value            Pr(&gt;|t|)    
(Intercept)          5.056876   0.135267   37.38 &lt;0.0000000000000002 ***
`AVG THERAPY LENGTH` 0.046198   0.004582   10.08 &lt;0.0000000000000002 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 5.029 on 3256 degrees of freedom
  (3171 observations deleted due to missingness)
Multiple R-squared:  0.03028,   Adjusted R-squared:  0.02998 
F-statistic: 101.7 on 1 and 3256 DF,  p-value: &lt; 0.00000000000000022</code></pre>
</div>
</div>
<p>Significant but weak. We should control for <code>Average therapy length</code>.</p>
<p><a href="#Bi">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-5-6" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-6-tab">
<section id="micu-length-of-stay-5" class="level4">
<h4 class="anchored" data-anchor-id="micu-length-of-stay-5">MICU Length of Stay</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create scatterplot</span></span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">MAX THERAPY LENGTH</span><span class="st">`</span>, <span class="at">y =</span> Unit_LOS)) <span class="sc">+</span></span>
<span id="cb171-3"><a href="#cb171-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb171-4"><a href="#cb171-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb171-5"><a href="#cb171-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"MICU Length of Stay by Max Therapy Length"</span>,</span>
<span id="cb171-6"><a href="#cb171-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Max Therapy Length"</span>,</span>
<span id="cb171-7"><a href="#cb171-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"MICU Length of stay"</span>) <span class="sc">+</span></span>
<span id="cb171-8"><a href="#cb171-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 8 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 8 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-85-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the regression</span></span>
<span id="cb175-2"><a href="#cb175-2" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(Unit_LOS <span class="sc">~</span> <span class="st">`</span><span class="at">MAX THERAPY LENGTH</span><span class="st">`</span>, <span class="at">data =</span> data_ex)</span>
<span id="cb175-3"><a href="#cb175-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = Unit_LOS ~ `MAX THERAPY LENGTH`, data = data_ex)

Residuals:
    Min      1Q  Median      3Q     Max 
-223.39  -62.47  -29.45   26.55  587.55 

Coefficients:
                     Estimate Std. Error t value            Pr(&gt;|t|)    
(Intercept)          96.45479    1.90712   50.58 &lt;0.0000000000000002 ***
`MAX THERAPY LENGTH`  1.65082    0.05402   30.56 &lt;0.0000000000000002 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 105.5 on 6419 degrees of freedom
  (8 observations deleted due to missingness)
Multiple R-squared:  0.127, Adjusted R-squared:  0.1269 
F-statistic:   934 on 1 and 6419 DF,  p-value: &lt; 0.00000000000000022</code></pre>
</div>
</div>
</section>
<section id="total-mechanical-ventilation-time-2" class="level4">
<h4 class="anchored" data-anchor-id="total-mechanical-ventilation-time-2">Total Mechanical Ventilation Time</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create scatterplot</span></span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">MAX THERAPY LENGTH</span><span class="st">`</span>, <span class="at">y =</span> MV_Total)) <span class="sc">+</span></span>
<span id="cb177-3"><a href="#cb177-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb177-4"><a href="#cb177-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb177-5"><a href="#cb177-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"MICU Length of Stay by Maximum Therapy Length"</span>,</span>
<span id="cb177-6"><a href="#cb177-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Maximum Therapy Length"</span>,</span>
<span id="cb177-7"><a href="#cb177-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Total Mechanical Ventilation Time"</span>) <span class="sc">+</span></span>
<span id="cb177-8"><a href="#cb177-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3171 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3171 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-87-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the regression</span></span>
<span id="cb181-2"><a href="#cb181-2" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(MV_Total <span class="sc">~</span> <span class="st">`</span><span class="at">MAX THERAPY LENGTH</span><span class="st">`</span>, <span class="at">data =</span> data_ex)</span>
<span id="cb181-3"><a href="#cb181-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = MV_Total ~ `MAX THERAPY LENGTH`, data = data_ex)

Residuals:
   Min     1Q Median     3Q    Max 
-7.855 -3.249 -1.570  1.573 24.430 

Coefficients:
                     Estimate Std. Error t value            Pr(&gt;|t|)    
(Intercept)          4.570439   0.129017   35.42 &lt;0.0000000000000002 ***
`MAX THERAPY LENGTH` 0.052895   0.003337   15.85 &lt;0.0000000000000002 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 4.921 on 3256 degrees of freedom
  (3171 observations deleted due to missingness)
Multiple R-squared:  0.07163,   Adjusted R-squared:  0.07134 
F-statistic: 251.2 on 1 and 3256 DF,  p-value: &lt; 0.00000000000000022</code></pre>
</div>
</div>
<p><a href="#Bi">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-5-7" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-7-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Admit_MonthYear) <span class="sc">|&gt;</span> </span>
<span id="cb183-3"><a href="#cb183-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">ADMIT_TO_CONSULT_avg =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">ADMIT TO CONSULT</span><span class="st">`</span>, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<span id="cb183-4"><a href="#cb183-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Admit_MonthYear, <span class="at">y =</span> ADMIT_TO_CONSULT_avg)) <span class="sc">+</span></span>
<span id="cb183-5"><a href="#cb183-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb183-6"><a href="#cb183-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb183-7"><a href="#cb183-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_rect</span>(<span class="at">data =</span> highlight_periods, <span class="fu">aes</span>(<span class="at">xmin =</span> start, <span class="at">xmax =</span> end, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb183-8"><a href="#cb183-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb183-9"><a href="#cb183-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fu">as.Date</span>(<span class="st">"2015-09-01"</span>), <span class="at">y =</span> <span class="cn">Inf</span>, </span>
<span id="cb183-10"><a href="#cb183-10" aria-hidden="true" tabindex="-1"></a>           <span class="at">label =</span> <span class="st">"QI-Initiative"</span>, <span class="at">color =</span> <span class="st">"skyblue2"</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">vjust =</span> <span class="fl">1.5</span>,) <span class="sc">+</span></span>
<span id="cb183-11"><a href="#cb183-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Time from Admit to Consult over Time"</span>,</span>
<span id="cb183-12"><a href="#cb183-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit Date"</span>,</span>
<span id="cb183-13"><a href="#cb183-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Time from Admit to Consult"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-89-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>They also successfully decreased the time from admit to consult. Megan may be interested in this.</p>
</div>
</div>
</div>
</section>
<section id="seasonality" class="level1">
<h1>Seasonality</h1>
<p>The investigator is concerned about seasonality effects, let’s investigate.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb184"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="co"># First we need to create variables for month and year</span></span>
<span id="cb184-2"><a href="#cb184-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb184-3"><a href="#cb184-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">year</span>(Admit_MonthYear),</span>
<span id="cb184-4"><a href="#cb184-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">Month =</span> <span class="fu">as.factor</span>(<span class="fu">month</span>(Admit_MonthYear)))</span>
<span id="cb184-5"><a href="#cb184-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-6"><a href="#cb184-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize and plot the data</span></span>
<span id="cb184-7"><a href="#cb184-7" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb184-8"><a href="#cb184-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Month) <span class="sc">|&gt;</span> </span>
<span id="cb184-9"><a href="#cb184-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_Unit_LOS =</span> <span class="fu">mean</span>(Unit_LOS, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<span id="cb184-10"><a href="#cb184-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Month, <span class="at">y =</span> avg_Unit_LOS, <span class="at">group =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb184-11"><a href="#cb184-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb184-12"><a href="#cb184-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> </span>
<span id="cb184-13"><a href="#cb184-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Average MICU LOS per Year"</span>,</span>
<span id="cb184-14"><a href="#cb184-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Month"</span>,</span>
<span id="cb184-15"><a href="#cb184-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Avg MICU LOS"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-90-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>It appears that we do have seasonailty in our main outcome variable, and will have to account for this in our final model.</p>
</section>
<section id="Main_Goals" class="level1">
<h1>Analysis: Main Goals</h1>
<section id="goal-1-increase-frequency-of-pt-visits" class="level3">
<h3 class="anchored" data-anchor-id="goal-1-increase-frequency-of-pt-visits">Goal 1: Increase Frequency of PT Visits</h3>
<p>The first goal of the QI-initiative was to increase the frequency of PT visits.</p>
<p>To assess this, we will perform a Poisson Regression with the following formula:</p>
<p><span class="math inline">\(Log( E(admissions with PT_i | QI-Initiative_i ) ) = β_0 + β_1 * QI-Initiative_i + β2 *Covariates_i + ...\)</span></p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true" href="">Visualization</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false" href="">Analysis</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-3" role="tab" aria-controls="tabset-6-3" aria-selected="false" href="">Interpretation</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-4" role="tab" aria-controls="tabset-6-4" aria-selected="false" href="">Summary</a></li></ul>
<div class="tab-content">
<div id="tabset-6-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize and plot the data</span></span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb185-3"><a href="#cb185-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Admit_MonthYear) <span class="sc">|&gt;</span> </span>
<span id="cb185-4"><a href="#cb185-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_pct_therapy =</span> <span class="fu">mean</span>(PT_VISITS_PERC, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<span id="cb185-5"><a href="#cb185-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Admit_MonthYear, <span class="at">y =</span> avg_pct_therapy)) <span class="sc">+</span></span>
<span id="cb185-6"><a href="#cb185-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb185-7"><a href="#cb185-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb185-8"><a href="#cb185-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data =</span> highlight_periods, <span class="fu">aes</span>(<span class="at">xmin =</span> start, <span class="at">xmax =</span> end, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb185-9"><a href="#cb185-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb185-10"><a href="#cb185-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Average Percentage of Days with Physical Therapy Over Time"</span>,</span>
<span id="cb185-11"><a href="#cb185-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit Date"</span>,</span>
<span id="cb185-12"><a href="#cb185-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Average Days with Physical Therapy (%)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-91-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Interesting! They successfully and drastically increased the percentage of days that patients had physical therapy (roughly from 10-20% pre-iniative to 50-60% post iniative). This percentage did seem to drop off over time during the post- initiative period however, though it is still higher than it was pre-initiative (now roughly 30-40%).</p>
<p><a href="#Main_Goals">Top of Tabset</a></p>
</div>
<div id="tabset-6-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-2-tab">
<p>First, we must determine whether it is more appropriate to run a Poisson Regression or a Negative Binomial Regression.</p>
<p>To do this we will compare the mean and the variance of this <code>PT_VISITS</code>. If the variance is greater than the mean, than we have overdispersion and a negative binomial model is more appropriate.</p>
<section id="check-for-overdispersion" class="level4">
<h4 class="anchored" data-anchor-id="check-for-overdispersion">Check for Overdispersion</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb186"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare mean and variance</span></span>
<span id="cb186-2"><a href="#cb186-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">"Mean = "</span>, <span class="fu">mean</span>(data_ex<span class="sc">$</span>PT_VISITS))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Mean = 1.77601493233784"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb188"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">"Variance = "</span>, <span class="fu">var</span>(data_ex<span class="sc">$</span>PT_VISITS))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Variance = 6.32381168366"</code></pre>
</div>
</div>
<p>In our case, the variance is higher than the mean, indicating that we have overdispersion, and hence the negative binomial model is more appropriate going forward.</p>
<p>We can also verify this by using the examining the dispersion of our poisson model.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb190"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Factoring initiative for better output in models</span></span>
<span id="cb190-2"><a href="#cb190-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">factor</span>(data_ex<span class="sc">$</span>initiative, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Pre"</span>,<span class="st">"During"</span>,<span class="st">"Post"</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Pre"</span>, <span class="st">"During"</span>, <span class="st">"Post"</span>))</span>
<span id="cb190-3"><a href="#cb190-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-4"><a href="#cb190-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to unordered factor </span></span>
<span id="cb190-5"><a href="#cb190-5" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">factor</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ordered =</span> <span class="cn">FALSE</span>)</span>
<span id="cb190-6"><a href="#cb190-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-7"><a href="#cb190-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the Poisson regression</span></span>
<span id="cb190-8"><a href="#cb190-8" aria-hidden="true" tabindex="-1"></a>model_goal1 <span class="ot">&lt;-</span> <span class="fu">glm</span>(PT_VISITS <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month, <span class="at">data =</span> data_ex, <span class="at">family =</span> <span class="fu">poisson</span>())</span>
<span id="cb190-9"><a href="#cb190-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-10"><a href="#cb190-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Check for overdispersion</span></span>
<span id="cb190-11"><a href="#cb190-11" aria-hidden="true" tabindex="-1"></a>dispersion <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">residuals</span>(model_goal1, <span class="at">type =</span> <span class="st">"pearson"</span>)<span class="sc">^</span><span class="dv">2</span>) <span class="sc">/</span> <span class="fu">df.residual</span>(model_goal1)</span>
<span id="cb190-12"><a href="#cb190-12" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(dispersion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.804571</code></pre>
</div>
</div>
<p>The dispersion parameter is significantly greater than 1, and thus we have overdispersion.</p>
</section>
<section id="performing-the-negative-binomial-regression" class="level4">
<h4 class="anchored" data-anchor-id="performing-the-negative-binomial-regression">Performing the Negative Binomial Regression</h4>
<p>Since we know we have overdispersion, we can now perform the negative binomial regression</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb192"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit a Negative Binomial model</span></span>
<span id="cb192-2"><a href="#cb192-2" aria-hidden="true" tabindex="-1"></a>model_goal1_nb <span class="ot">&lt;-</span> <span class="fu">glm.nb</span>(PT_VISITS <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month, <span class="at">data =</span> data_ex)</span>
<span id="cb192-3"><a href="#cb192-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb192-4"><a href="#cb192-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine Model</span></span>
<span id="cb192-5"><a href="#cb192-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_goal1_nb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm.nb(formula = PT_VISITS ~ initiative + Age_Range + Month, 
    data = data_ex, init.theta = 1.329337456, link = log)

Coefficients:
                  Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)      -0.273038   0.064280  -4.248           0.00002160 ***
initiativeDuring  1.366772   0.049117  27.827 &lt; 0.0000000000000002 ***
initiativePost    1.061190   0.033130  32.031 &lt; 0.0000000000000002 ***
Age_Range40-49   -0.060811   0.055147  -1.103               0.2702    
Age_Range50-59    0.113391   0.047838   2.370               0.0178 *  
Age_Range60-69    0.222445   0.046640   4.769           0.00000185 ***
Age_Range70+      0.197815   0.048396   4.087           0.00004362 ***
Age_RangeMissing -0.645948   0.345327  -1.871               0.0614 .  
Month2            0.044569   0.071819   0.621               0.5349    
Month3           -0.018687   0.070966  -0.263               0.7923    
Month4            0.036146   0.069172   0.523               0.6013    
Month5           -0.084582   0.072762  -1.162               0.2450    
Month6            0.006537   0.074343   0.088               0.9299    
Month7           -0.121148   0.075096  -1.613               0.1067    
Month8           -0.062293   0.072783  -0.856               0.3921    
Month9           -0.057558   0.073175  -0.787               0.4315    
Month10          -0.047572   0.071430  -0.666               0.5054    
Month11          -0.013689   0.072683  -0.188               0.8506    
Month12          -0.094636   0.071895  -1.316               0.1881    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for Negative Binomial(1.3293) family taken to be 1)

    Null deviance: 8128.6  on 6428  degrees of freedom
Residual deviance: 6712.3  on 6410  degrees of freedom
AIC: 22097

Number of Fisher Scoring iterations: 1

              Theta:  1.3293 
          Std. Err.:  0.0469 

 2 x log-likelihood:  -22057.0280 </code></pre>
</div>
</div>
</section>
<section id="zero-inflated-negative-binomial-regression" class="level4">
<h4 class="anchored" data-anchor-id="zero-inflated-negative-binomial-regression">Zero Inflated Negative Binomial Regression</h4>
<p>A zero inflated regression is appropriate in the case of excess zeroes that are generated by a separate process from the count values. This means there are two processes: one that generates only zeros (e.g., not participating in an activity) and another that generates counts including zeros (e.g., participating but not succeeding).</p>
<p>In our case, there are likely a lot of patients that had no need for PT, and those that did but chose not to receive it, thus create two processes for a zero in our outcome variables.</p>
<p>Let’s test.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb194"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit the zero-inflated negative binomial</span></span>
<span id="cb194-2"><a href="#cb194-2" aria-hidden="true" tabindex="-1"></a>model_goal1_zifb <span class="ot">&lt;-</span> <span class="fu">zeroinfl</span>(PT_VISITS <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month<span class="sc">|</span> initiative, <span class="at">data =</span> data_ex, <span class="at">dist =</span> <span class="st">"negbin"</span>)</span>
<span id="cb194-3"><a href="#cb194-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb194-4"><a href="#cb194-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine Model</span></span>
<span id="cb194-5"><a href="#cb194-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_goal1_zifb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
zeroinfl(formula = PT_VISITS ~ initiative + Age_Range + Month | initiative, 
    data = data_ex, dist = "negbin")

Pearson residuals:
    Min      1Q  Median      3Q     Max 
-1.0269 -0.6696 -0.4325  0.2633 13.0625 

Count model coefficients (negbin with log link):
                   Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)      -0.0818396  0.0723589  -1.131             0.258046    
initiativeDuring  1.1902300  0.0570086  20.878 &lt; 0.0000000000000002 ***
initiativePost    0.8837664  0.0450187  19.631 &lt; 0.0000000000000002 ***
Age_Range40-49   -0.0643893  0.0552386  -1.166             0.243753    
Age_Range50-59    0.1104175  0.0479298   2.304             0.021238 *  
Age_Range60-69    0.2113330  0.0466976   4.526           0.00000602 ***
Age_Range70+      0.1792556  0.0485264   3.694             0.000221 ***
Age_RangeMissing -0.6367955  0.3389955  -1.878             0.060316 .  
Month2            0.0435463  0.0716525   0.608             0.543359    
Month3           -0.0282732  0.0712077  -0.397             0.691328    
Month4            0.0308881  0.0688003   0.449             0.653465    
Month5           -0.0855587  0.0724708  -1.181             0.237763    
Month6           -0.0004388  0.0743549  -0.006             0.995292    
Month7           -0.1230890  0.0748576  -1.644             0.100112    
Month8           -0.0693541  0.0726897  -0.954             0.340027    
Month9           -0.0598741  0.0733125  -0.817             0.414102    
Month10          -0.0611560  0.0717762  -0.852             0.394193    
Month11          -0.0201034  0.0728436  -0.276             0.782563    
Month12          -0.1136277  0.0723158  -1.571             0.116120    
Log(theta)        0.3723130  0.0388579   9.581 &lt; 0.0000000000000002 ***

Zero-inflation model coefficients (binomial with logit link):
                  Estimate Std. Error z value            Pr(&gt;|z|)    
(Intercept)        -1.6395     0.1935  -8.473 &lt;0.0000000000000002 ***
initiativeDuring  -18.2004  1456.7803  -0.012               0.990    
initiativePost    -13.8942   119.5187  -0.116               0.907    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 

Theta = 1.4511 
Number of iterations in BFGS optimization: 48 
Log-likelihood: -1.101e+04 on 23 Df</code></pre>
</div>
<div class="sourceCode cell-code" id="cb196"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get 95% CI's</span></span>
<span id="cb196-2"><a href="#cb196-2" aria-hidden="true" tabindex="-1"></a>CIs <span class="ot">&lt;-</span> <span class="fu">confint</span>(model_goal1_zifb)</span>
<span id="cb196-3"><a href="#cb196-3" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(CIs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2.5 %</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">97.5 %</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">count_(Intercept)</td>
<td style="text-align: right;">-0.2236605</td>
<td style="text-align: right;">0.0599814</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_initiativeDuring</td>
<td style="text-align: right;">1.0784952</td>
<td style="text-align: right;">1.3019648</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_initiativePost</td>
<td style="text-align: right;">0.7955313</td>
<td style="text-align: right;">0.9720014</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_Age_Range40-49</td>
<td style="text-align: right;">-0.1726549</td>
<td style="text-align: right;">0.0438764</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_Age_Range50-59</td>
<td style="text-align: right;">0.0164767</td>
<td style="text-align: right;">0.2043583</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_Age_Range60-69</td>
<td style="text-align: right;">0.1198074</td>
<td style="text-align: right;">0.3028585</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_Age_Range70+</td>
<td style="text-align: right;">0.0841457</td>
<td style="text-align: right;">0.2743655</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_Age_RangeMissing</td>
<td style="text-align: right;">-1.3012145</td>
<td style="text-align: right;">0.0276234</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_Month2</td>
<td style="text-align: right;">-0.0968901</td>
<td style="text-align: right;">0.1839826</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_Month3</td>
<td style="text-align: right;">-0.1678377</td>
<td style="text-align: right;">0.1112913</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_Month4</td>
<td style="text-align: right;">-0.1039579</td>
<td style="text-align: right;">0.1657341</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_Month5</td>
<td style="text-align: right;">-0.2275989</td>
<td style="text-align: right;">0.0564815</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_Month6</td>
<td style="text-align: right;">-0.1461716</td>
<td style="text-align: right;">0.1452941</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_Month7</td>
<td style="text-align: right;">-0.2698072</td>
<td style="text-align: right;">0.0236292</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_Month8</td>
<td style="text-align: right;">-0.2118232</td>
<td style="text-align: right;">0.0731151</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_Month9</td>
<td style="text-align: right;">-0.2035640</td>
<td style="text-align: right;">0.0838158</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_Month10</td>
<td style="text-align: right;">-0.2018347</td>
<td style="text-align: right;">0.0795227</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_Month11</td>
<td style="text-align: right;">-0.1628741</td>
<td style="text-align: right;">0.1226673</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_Month12</td>
<td style="text-align: right;">-0.2553642</td>
<td style="text-align: right;">0.0281087</td>
</tr>
<tr class="even">
<td style="text-align: left;">zero_(Intercept)</td>
<td style="text-align: right;">-2.0188013</td>
<td style="text-align: right;">-1.2602783</td>
</tr>
<tr class="odd">
<td style="text-align: left;">zero_initiativeDuring</td>
<td style="text-align: right;">-2873.4372979</td>
<td style="text-align: right;">2837.0365622</td>
</tr>
<tr class="even">
<td style="text-align: left;">zero_initiativePost</td>
<td style="text-align: right;">-248.1466546</td>
<td style="text-align: right;">220.3582190</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="change-reference-level" class="level4">
<h4 class="anchored" data-anchor-id="change-reference-level">Change Reference Level</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb197"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change reference level</span></span>
<span id="cb197-2"><a href="#cb197-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"During"</span>)</span>
<span id="cb197-3"><a href="#cb197-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb197-4"><a href="#cb197-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit the zero-inflated negative binomial</span></span>
<span id="cb197-5"><a href="#cb197-5" aria-hidden="true" tabindex="-1"></a>model_goal1_zifb <span class="ot">&lt;-</span> <span class="fu">zeroinfl</span>(PT_VISITS <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month<span class="sc">|</span> initiative, <span class="at">data =</span> data_ex, <span class="at">dist =</span> <span class="st">"negbin"</span>)</span>
<span id="cb197-6"><a href="#cb197-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb197-7"><a href="#cb197-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine Model</span></span>
<span id="cb197-8"><a href="#cb197-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_goal1_zifb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
zeroinfl(formula = PT_VISITS ~ initiative + Age_Range + Month | initiative, 
    data = data_ex, dist = "negbin")

Pearson residuals:
    Min      1Q  Median      3Q     Max 
-1.0269 -0.6696 -0.4325  0.2633 13.0625 

Count model coefficients (negbin with log link):
                   Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)       1.1083910  0.0741617  14.946 &lt; 0.0000000000000002 ***
initiativePre    -1.1902358  0.0570088 -20.878 &lt; 0.0000000000000002 ***
initiativePost   -0.3064641  0.0451732  -6.784      0.0000000000117 ***
Age_Range40-49   -0.0643886  0.0552386  -1.166             0.243758    
Age_Range50-59    0.1104184  0.0479298   2.304             0.021237 *  
Age_Range60-69    0.2113341  0.0466975   4.526      0.0000060226215 ***
Age_Range70+      0.1792576  0.0485263   3.694             0.000221 ***
Age_RangeMissing -0.6367642  0.3389948  -1.878             0.060328 .  
Month2            0.0435445  0.0716525   0.608             0.543374    
Month3           -0.0282763  0.0712076  -0.397             0.691296    
Month4            0.0308883  0.0688002   0.449             0.653463    
Month5           -0.0855615  0.0724708  -1.181             0.237748    
Month6           -0.0004382  0.0743548  -0.006             0.995298    
Month7           -0.1230904  0.0748575  -1.644             0.100108    
Month8           -0.0693555  0.0726896  -0.954             0.340016    
Month9           -0.0598746  0.0733125  -0.817             0.414098    
Month10          -0.0611457  0.0717761  -0.852             0.394273    
Month11          -0.0200983  0.0728435  -0.276             0.782616    
Month12          -0.1136336  0.0723158  -1.571             0.116101    
Log(theta)        0.3723142  0.0388580   9.581 &lt; 0.0000000000000002 ***

Zero-inflation model coefficients (binomial with logit link):
               Estimate Std. Error z value Pr(&gt;|z|)
(Intercept)     -19.455   1201.469  -0.016    0.987
initiativePre    17.815   1201.469   0.015    0.988
initiativePost    3.241   1213.147   0.003    0.998
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 

Theta = 1.4511 
Number of iterations in BFGS optimization: 48 
Log-likelihood: -1.101e+04 on 23 Df</code></pre>
</div>
<div class="sourceCode cell-code" id="cb199"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get 95% CI's</span></span>
<span id="cb199-2"><a href="#cb199-2" aria-hidden="true" tabindex="-1"></a>CIs <span class="ot">&lt;-</span> <span class="fu">confint</span>(model_goal1_zifb)</span>
<span id="cb199-3"><a href="#cb199-3" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(CIs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2.5 %</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">97.5 %</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">count_(Intercept)</td>
<td style="text-align: right;">0.9630367</td>
<td style="text-align: right;">1.2537452</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_initiativePre</td>
<td style="text-align: right;">-1.3019711</td>
<td style="text-align: right;">-1.0785005</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_initiativePost</td>
<td style="text-align: right;">-0.3950020</td>
<td style="text-align: right;">-0.2179262</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_Age_Range40-49</td>
<td style="text-align: right;">-0.1726541</td>
<td style="text-align: right;">0.0438770</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_Age_Range50-59</td>
<td style="text-align: right;">0.0164777</td>
<td style="text-align: right;">0.2043591</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_Age_Range60-69</td>
<td style="text-align: right;">0.1198086</td>
<td style="text-align: right;">0.3028596</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_Age_Range70+</td>
<td style="text-align: right;">0.0841477</td>
<td style="text-align: right;">0.2743674</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_Age_RangeMissing</td>
<td style="text-align: right;">-1.3011817</td>
<td style="text-align: right;">0.0276533</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_Month2</td>
<td style="text-align: right;">-0.0968918</td>
<td style="text-align: right;">0.1839808</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_Month3</td>
<td style="text-align: right;">-0.1678407</td>
<td style="text-align: right;">0.1112881</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_Month4</td>
<td style="text-align: right;">-0.1039576</td>
<td style="text-align: right;">0.1657342</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_Month5</td>
<td style="text-align: right;">-0.2276016</td>
<td style="text-align: right;">0.0564786</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_Month6</td>
<td style="text-align: right;">-0.1461710</td>
<td style="text-align: right;">0.1452946</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_Month7</td>
<td style="text-align: right;">-0.2698085</td>
<td style="text-align: right;">0.0236276</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_Month8</td>
<td style="text-align: right;">-0.2118246</td>
<td style="text-align: right;">0.0731135</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_Month9</td>
<td style="text-align: right;">-0.2035644</td>
<td style="text-align: right;">0.0838152</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_Month10</td>
<td style="text-align: right;">-0.2018244</td>
<td style="text-align: right;">0.0795330</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_Month11</td>
<td style="text-align: right;">-0.1628690</td>
<td style="text-align: right;">0.1226723</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_Month12</td>
<td style="text-align: right;">-0.2553699</td>
<td style="text-align: right;">0.0281027</td>
</tr>
<tr class="even">
<td style="text-align: left;">zero_(Intercept)</td>
<td style="text-align: right;">-2374.2898688</td>
<td style="text-align: right;">2335.3808039</td>
</tr>
<tr class="odd">
<td style="text-align: left;">zero_initiativePre</td>
<td style="text-align: right;">-2337.0203921</td>
<td style="text-align: right;">2372.6503263</td>
</tr>
<tr class="even">
<td style="text-align: left;">zero_initiativePost</td>
<td style="text-align: right;">-2374.4834764</td>
<td style="text-align: right;">2380.9649000</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="model-selection" class="level4">
<h4 class="anchored" data-anchor-id="model-selection">Model Selection</h4>
<p>We can now compare model performance using AIC and BIC to determine if the ZIF model improves performance.</p>
<p>For fun let’s include the poisson regression model and see how it compares,</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb200"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare model performance</span></span>
<span id="cb200-2"><a href="#cb200-2" aria-hidden="true" tabindex="-1"></a>bic_p <span class="ot">&lt;-</span> <span class="fu">BIC</span>(model_goal1)</span>
<span id="cb200-3"><a href="#cb200-3" aria-hidden="true" tabindex="-1"></a>bic_nb <span class="ot">&lt;-</span> <span class="fu">BIC</span>(model_goal1_nb)</span>
<span id="cb200-4"><a href="#cb200-4" aria-hidden="true" tabindex="-1"></a>bic_zifb <span class="ot">&lt;-</span> <span class="fu">BIC</span>(model_goal1_zifb)</span>
<span id="cb200-5"><a href="#cb200-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-6"><a href="#cb200-6" aria-hidden="true" tabindex="-1"></a>aic_p <span class="ot">&lt;-</span> <span class="fu">AIC</span>(model_goal1)</span>
<span id="cb200-7"><a href="#cb200-7" aria-hidden="true" tabindex="-1"></a>aic_nb <span class="ot">&lt;-</span> <span class="fu">AIC</span>(model_goal1_nb)</span>
<span id="cb200-8"><a href="#cb200-8" aria-hidden="true" tabindex="-1"></a>aic_zifb <span class="ot">&lt;-</span> <span class="fu">AIC</span>(model_goal1_zifb)</span>
<span id="cb200-9"><a href="#cb200-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-10"><a href="#cb200-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a data frame to display the values </span></span>
<span id="cb200-11"><a href="#cb200-11" aria-hidden="true" tabindex="-1"></a>model_comparison <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Model =</span> <span class="fu">c</span>(<span class="st">"Poisson Model"</span>, <span class="st">"Negative Binomial Model"</span>, <span class="st">"ZIF Negative Binomial Model"</span>), </span>
<span id="cb200-12"><a href="#cb200-12" aria-hidden="true" tabindex="-1"></a>                               <span class="at">BIC =</span> <span class="fu">c</span>(bic_p, bic_nb, bic_zifb), </span>
<span id="cb200-13"><a href="#cb200-13" aria-hidden="true" tabindex="-1"></a>                               <span class="at">AIC =</span> <span class="fu">c</span>(bic_p, aic_nb, aic_zifb))</span>
<span id="cb200-14"><a href="#cb200-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-15"><a href="#cb200-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Print resulting table</span></span>
<span id="cb200-16"><a href="#cb200-16" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(model_comparison)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Model</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">BIC</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">AIC</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Poisson Model</td>
<td style="text-align: right;">25476.48</td>
<td style="text-align: right;">25476.48</td>
</tr>
<tr class="even">
<td style="text-align: left;">Negative Binomial Model</td>
<td style="text-align: right;">22232.40</td>
<td style="text-align: right;">22097.03</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ZIF Negative Binomial Model</td>
<td style="text-align: right;">22227.93</td>
<td style="text-align: right;">22072.25</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>We can also perform a likelihood ratio test to get a significance value we can report.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb201"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the likelihood ratio test </span></span>
<span id="cb201-2"><a href="#cb201-2" aria-hidden="true" tabindex="-1"></a>lr_test <span class="ot">&lt;-</span> <span class="fu">lrtest</span>(model_goal1_nb, model_goal1_zifb) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in modelUpdate(objects[[i - 1]], objects[[i]]): original model was of
class "negbin", updated model is of class "zeroinfl"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb203"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the test result </span></span>
<span id="cb203-2"><a href="#cb203-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(lr_test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Likelihood ratio test

Model 1: PT_VISITS ~ initiative + Age_Range + Month
Model 2: PT_VISITS ~ initiative + Age_Range + Month | initiative
  #Df LogLik Df Chisq   Pr(&gt;Chisq)    
1  20 -11028                          
2  23 -11013  3 30.78 0.0000009459 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<p>We can see that AIC and BIC both prefer the zero inflated model, and thus the <strong>Zero Inflated Binomial Regression will be chosen as the final model for goal 1.</strong></p>
<p><a href="#Main_Goals">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-6-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-3-tab">
<section id="overall-model" class="level5">
<h5 class="anchored" data-anchor-id="overall-model">Overall Model</h5>
<p>The likelihood ratio test indicates that the Zero-Inflated Negative Binomial model provides a significantly better fit than the standard Negative Binomial model (χ² = 30.78, df = 3, p &lt; 0.0001), supporting the decision to run the analysis as a zero inflated model.</p>
</section>
<section id="main-effects" class="level5">
<h5 class="anchored" data-anchor-id="main-effects">Main Effects</h5>
<p>QI-initiative time period is a significant predictor for frequency of PT visits, while controlling for age, admission month, and zero inflation. Compared to patients in the Pre time period, patients in the During time period had a mean number of PT visits that was 3.29 times higher (z = 20.88, 95% CI: [2.94, 3.68], p &lt; 0.0001), and patients in the Post time period had a mean number of PT visits that was 2.42 times higher (z = 19.63, 95% CI: [2.22, 2.64], p &lt; 0.0001). Additionally, compared to patients in the During time period, those in the Post time period had a mean number of PT visits that was 0.74 times the mean number of PT visits (z = -6.78, 95% CI: [0.67, 0.80], p &lt; 0.0001).</p>
</section>
<section id="age-1" class="level5">
<h5 class="anchored" data-anchor-id="age-1">Age</h5>
<p>Age was a significant predictor for frequency of PT visits, while controlling for QI-initiative time period, admission month, and zero inflation. Compared to those who were 18-39, patients who were 50-59 had a 1.12 times higher mean number of PT visits (z = 2.30, 95% CI: [1.02, 1.23], p = 0.021), patients who were 60-69 had a 1.24 times higher mean number of PT visits (z = 4.53, 95% CI: [1.13, 1.35], p = &lt; 0.0001), and patients who were 70+ had a 1.20 times higher mean number of PT visits (z = 3.69, 95% CI: [1.09, 1.32], p = 0.0002). Patients who were 40-49 did not have a statistically significant difference in mean number of PT visits compared to those who were 18-39 (z = -1.166, 95% CI: [0.84, 1.04], p = 0.24).</p>
</section>
<section id="seasonality-1" class="level4">
<h4 class="anchored" data-anchor-id="seasonality-1">Seasonality</h4>
<p>Month was not a significant predictor in this model (p’s for each month &gt; 0.5), but was included in the final model to account for potential seasonality effects.</p>
<section id="overdispersion" class="level5">
<h5 class="anchored" data-anchor-id="overdispersion">Overdispersion</h5>
<p>The estimate of log(θ) in this model is highly significant (𝛽^log(θ) = 0.3723, z = 9.581, p &lt; 0.0001), indicating strong evidence against the null hypothesis that log(theta) equals zero. When exponentiated, θ = exp(0.3723) ≈ 1.45, suggesting that the variance of the count data is approximately 1.45 times greater than the mean, which highlights significant overdispersion. This confirms that the use of a negative binomial distribution is appropriate for modeling our data, as it effectively handles the extra variability compared to a simpler Poisson model.</p>
</section>
<section id="zero-inflation" class="level5">
<h5 class="anchored" data-anchor-id="zero-inflation">Zero Inflation</h5>
<p>When controlling for age range and month, the initiative time period did not significantly affect the probability of zero PT visits (all p’s &gt; 0.05). This suggests that the likelihood of being a structural zero is independent of QI-initiative time period.</p>
<p><a href="#Main_Goals">Top of Tabset</a></p>
</section>
</section>
</div>
<div id="tabset-6-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-4-tab">
<p>We found that, while controlling for age, admission month, and zero inflation, those in the During time period had a 3.29 times higher (p &lt; 0.0001), and those in the Post time period had a 2.42 times higher (p &lt; 0.0001) average number of PT visits compared to patients in the Pre time period.</p>
<p>Additionally, there was a slight decrease in the number of PT visits from the During to Post time periods, with those in the Post period having a mean number of PT visits that was 0.74 times the mean number of PT visits of those in the During period (p &lt; 0.0001).</p>
<p>Additionally, there was an overall effect for age, where patients that were 50 and older received more PT visits than those who were 18-39.</p>
<p><a href="#Main_Goals">Top of Tabset</a></p>
</div>
</div>
</div>
</section>
<section id="Goal_Two" class="level2">
<h2 class="anchored" data-anchor-id="Goal_Two">Goal 2: Decrease Time from Admit to Therapy</h2>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-7-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-1" role="tab" aria-controls="tabset-7-1" aria-selected="true" href="">Visualization</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-2" role="tab" aria-controls="tabset-7-2" aria-selected="false" href="">Analysis</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-3" role="tab" aria-controls="tabset-7-3" aria-selected="false" href="">Interpretation</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-4" role="tab" aria-controls="tabset-7-4" aria-selected="false" href="">Summary</a></li></ul>
<div class="tab-content">
<div id="tabset-7-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-7-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb205"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb205-1"><a href="#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize and plot the data</span></span>
<span id="cb205-2"><a href="#cb205-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb205-3"><a href="#cb205-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Admit_MonthYear) <span class="sc">|&gt;</span> </span>
<span id="cb205-4"><a href="#cb205-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_ADMIT_TO_TREAT =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span>, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<span id="cb205-5"><a href="#cb205-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Admit_MonthYear, <span class="at">y =</span> avg_ADMIT_TO_TREAT)) <span class="sc">+</span></span>
<span id="cb205-6"><a href="#cb205-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb205-7"><a href="#cb205-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb205-8"><a href="#cb205-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data =</span> highlight_periods, <span class="fu">aes</span>(<span class="at">xmin =</span> start, <span class="at">xmax =</span> end, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb205-9"><a href="#cb205-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb205-10"><a href="#cb205-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fu">as.Date</span>(<span class="st">"2015-09-01"</span>), <span class="at">y =</span> <span class="cn">Inf</span>, </span>
<span id="cb205-11"><a href="#cb205-11" aria-hidden="true" tabindex="-1"></a>           <span class="at">label =</span> <span class="st">"QI-Initiative"</span>, <span class="at">color =</span> <span class="st">"skyblue2"</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">vjust =</span> <span class="fl">1.5</span>,) <span class="sc">+</span></span>
<span id="cb205-12"><a href="#cb205-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Time from Admit to Therapy over Time"</span>,</span>
<span id="cb205-13"><a href="#cb205-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit Date"</span>,</span>
<span id="cb205-14"><a href="#cb205-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Time from Admit to Therapy"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-100-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>They successfully decreased the time from a patient’s first admit to their first physical therapy session.</p>
<p>This means that patients were receiving PT sooner.</p>
<p><a href="#Goal_Two">Top of Tabset</a></p>
</div>
<div id="tabset-7-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-2-tab">
<section id="correct-erroneous-value" class="level4">
<h4 class="anchored" data-anchor-id="correct-erroneous-value">Correct Erroneous Value</h4>
<p>Note: We have a patient with a -1 value for admit to treat time, which is not allowed in a poisson or negative binomial model, and is also not possible, so we will set this to NA.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb206"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove patient with -1 value for Admit to Treat time</span></span>
<span id="cb206-2"><a href="#cb206-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb206-3"><a href="#cb206-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">ifelse</span>(<span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span> <span class="sc">==</span> <span class="sc">-</span><span class="dv">1</span>, <span class="cn">NA</span>, <span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="check-for-overdispersion-1" class="level4">
<h4 class="anchored" data-anchor-id="check-for-overdispersion-1">Check for Overdispersion</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb207"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb207-1"><a href="#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare mean and variance</span></span>
<span id="cb207-2"><a href="#cb207-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">"Mean = "</span>, <span class="fu">mean</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span>, <span class="at">na.rm =</span> T))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Mean = 64.0505548705302"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb209"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare mean and variance</span></span>
<span id="cb209-2"><a href="#cb209-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">"Variance = "</span>, <span class="fu">var</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span>, <span class="at">na.rm =</span> T))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Variance = 4357.15605235608"</code></pre>
</div>
</div>
<p>The variance is drastically greater than the mean, indicating that a negative binomial regression is more appropriate.</p>
</section>
<section id="performing-the-negative-binomial-regression-1" class="level4">
<h4 class="anchored" data-anchor-id="performing-the-negative-binomial-regression-1">Performing the Negative Binomial Regression</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb211"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change reference level</span></span>
<span id="cb211-2"><a href="#cb211-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"Pre"</span>)</span>
<span id="cb211-3"><a href="#cb211-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-4"><a href="#cb211-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit a Negative Binomial model</span></span>
<span id="cb211-5"><a href="#cb211-5" aria-hidden="true" tabindex="-1"></a>model_goal2_nb <span class="ot">&lt;-</span> <span class="fu">glm.nb</span>(<span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span> <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month, <span class="at">data =</span> data_ex)</span>
<span id="cb211-6"><a href="#cb211-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-7"><a href="#cb211-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine Model</span></span>
<span id="cb211-8"><a href="#cb211-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_goal2_nb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm.nb(formula = `ADMIT TO TREAT` ~ initiative + Age_Range + 
    Month, data = data_ex, init.theta = 1.905416461, link = log)

Coefficients:
                 Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)       4.80921    0.05097  94.352 &lt; 0.0000000000000002 ***
initiativeDuring -0.90877    0.03818 -23.799 &lt; 0.0000000000000002 ***
initiativePost   -0.68123    0.02619 -26.011 &lt; 0.0000000000000002 ***
Age_Range40-49   -0.04231    0.04386  -0.965              0.33466    
Age_Range50-59   -0.09619    0.03853  -2.497              0.01254 *  
Age_Range60-69   -0.20893    0.03732  -5.599   0.0000000216117672 ***
Age_Range70+     -0.29512    0.03831  -7.704   0.0000000000000132 ***
Age_RangeMissing -0.08866    0.28107  -0.315              0.75244    
Month2           -0.10441    0.05612  -1.861              0.06280 .  
Month3           -0.22800    0.05552  -4.107   0.0000401640330485 ***
Month4           -0.05793    0.05380  -1.077              0.28158    
Month5           -0.13516    0.05661  -2.387              0.01697 *  
Month6           -0.01397    0.05769  -0.242              0.80871    
Month7           -0.05004    0.05825  -0.859              0.39024    
Month8           -0.14759    0.05705  -2.587              0.00968 ** 
Month9           -0.02213    0.05760  -0.384              0.70080    
Month10          -0.14067    0.05550  -2.535              0.01126 *  
Month11          -0.04380    0.05692  -0.770              0.44158    
Month12           0.13821    0.05574   2.480              0.01315 *  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for Negative Binomial(1.9054) family taken to be 1)

    Null deviance: 5456.7  on 4054  degrees of freedom
Residual deviance: 4362.4  on 4036  degrees of freedom
  (2374 observations deleted due to missingness)
AIC: 40580

Number of Fisher Scoring iterations: 1

              Theta:  1.9054 
          Std. Err.:  0.0408 

 2 x log-likelihood:  -40540.4070 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb213"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(model_goal2_nb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-103-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-103-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-103-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-103-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb214"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb214-1"><a href="#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get 95% CI's</span></span>
<span id="cb214-2"><a href="#cb214-2" aria-hidden="true" tabindex="-1"></a>CIs <span class="ot">&lt;-</span> <span class="fu">confint</span>(model_goal2_nb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Waiting for profiling to be done...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb216"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb216-1"><a href="#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(CIs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2.5 %</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">97.5 %</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">4.7120641</td>
<td style="text-align: right;">4.9079359</td>
</tr>
<tr class="even">
<td style="text-align: left;">initiativeDuring</td>
<td style="text-align: right;">-0.9834647</td>
<td style="text-align: right;">-0.8335268</td>
</tr>
<tr class="odd">
<td style="text-align: left;">initiativePost</td>
<td style="text-align: right;">-0.7326325</td>
<td style="text-align: right;">-0.6300536</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range40-49</td>
<td style="text-align: right;">-0.1281864</td>
<td style="text-align: right;">0.0437423</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range50-59</td>
<td style="text-align: right;">-0.1718161</td>
<td style="text-align: right;">-0.0208904</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range60-69</td>
<td style="text-align: right;">-0.2822603</td>
<td style="text-align: right;">-0.1360419</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range70+</td>
<td style="text-align: right;">-0.3703048</td>
<td style="text-align: right;">-0.2202836</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_RangeMissing</td>
<td style="text-align: right;">-0.5990260</td>
<td style="text-align: right;">0.5131790</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month2</td>
<td style="text-align: right;">-0.2143237</td>
<td style="text-align: right;">0.0056342</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month3</td>
<td style="text-align: right;">-0.3367475</td>
<td style="text-align: right;">-0.1192098</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month4</td>
<td style="text-align: right;">-0.1639076</td>
<td style="text-align: right;">0.0478547</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month5</td>
<td style="text-align: right;">-0.2461411</td>
<td style="text-align: right;">-0.0240624</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month6</td>
<td style="text-align: right;">-0.1268364</td>
<td style="text-align: right;">0.0992183</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month7</td>
<td style="text-align: right;">-0.1638300</td>
<td style="text-align: right;">0.0640878</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month8</td>
<td style="text-align: right;">-0.2593483</td>
<td style="text-align: right;">-0.0356320</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month9</td>
<td style="text-align: right;">-0.1347782</td>
<td style="text-align: right;">0.0907884</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month10</td>
<td style="text-align: right;">-0.2491417</td>
<td style="text-align: right;">-0.0322093</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month11</td>
<td style="text-align: right;">-0.1549653</td>
<td style="text-align: right;">0.0675434</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month12</td>
<td style="text-align: right;">0.0292075</td>
<td style="text-align: right;">0.2472504</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="change-reference-category" class="level4">
<h4 class="anchored" data-anchor-id="change-reference-category">Change Reference Category</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb217"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change reference level</span></span>
<span id="cb217-2"><a href="#cb217-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"During"</span>)</span>
<span id="cb217-3"><a href="#cb217-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-4"><a href="#cb217-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit a Negative Binomial model</span></span>
<span id="cb217-5"><a href="#cb217-5" aria-hidden="true" tabindex="-1"></a>model_goal2_nb <span class="ot">&lt;-</span> <span class="fu">glm.nb</span>(<span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span> <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month, <span class="at">data =</span> data_ex)</span>
<span id="cb217-6"><a href="#cb217-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-7"><a href="#cb217-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine Model</span></span>
<span id="cb217-8"><a href="#cb217-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_goal2_nb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm.nb(formula = `ADMIT TO TREAT` ~ initiative + Age_Range + 
    Month, data = data_ex, init.theta = 1.905416461, link = log)

Coefficients:
                 Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)       3.90044    0.05827  66.937 &lt; 0.0000000000000002 ***
initiativePre     0.90877    0.03818  23.799 &lt; 0.0000000000000002 ***
initiativePost    0.22755    0.03574   6.366   0.0000000001935898 ***
Age_Range40-49   -0.04231    0.04386  -0.965              0.33466    
Age_Range50-59   -0.09619    0.03853  -2.497              0.01254 *  
Age_Range60-69   -0.20893    0.03732  -5.599   0.0000000216117672 ***
Age_Range70+     -0.29512    0.03831  -7.704   0.0000000000000132 ***
Age_RangeMissing -0.08866    0.28107  -0.315              0.75244    
Month2           -0.10441    0.05612  -1.861              0.06280 .  
Month3           -0.22800    0.05552  -4.107   0.0000401640330485 ***
Month4           -0.05793    0.05380  -1.077              0.28158    
Month5           -0.13516    0.05661  -2.387              0.01697 *  
Month6           -0.01397    0.05769  -0.242              0.80871    
Month7           -0.05004    0.05825  -0.859              0.39024    
Month8           -0.14759    0.05705  -2.587              0.00968 ** 
Month9           -0.02213    0.05760  -0.384              0.70080    
Month10          -0.14067    0.05550  -2.535              0.01126 *  
Month11          -0.04380    0.05692  -0.770              0.44158    
Month12           0.13821    0.05574   2.480              0.01315 *  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for Negative Binomial(1.9054) family taken to be 1)

    Null deviance: 5456.7  on 4054  degrees of freedom
Residual deviance: 4362.4  on 4036  degrees of freedom
  (2374 observations deleted due to missingness)
AIC: 40580

Number of Fisher Scoring iterations: 1

              Theta:  1.9054 
          Std. Err.:  0.0408 

 2 x log-likelihood:  -40540.4070 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb219"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get 95% CI's</span></span>
<span id="cb219-2"><a href="#cb219-2" aria-hidden="true" tabindex="-1"></a>CIs <span class="ot">&lt;-</span> <span class="fu">confint</span>(model_goal2_nb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Waiting for profiling to be done...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb221"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(CIs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2.5 %</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">97.5 %</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">3.7868281</td>
<td style="text-align: right;">4.0154190</td>
</tr>
<tr class="even">
<td style="text-align: left;">initiativePre</td>
<td style="text-align: right;">0.8335268</td>
<td style="text-align: right;">0.9834647</td>
</tr>
<tr class="odd">
<td style="text-align: left;">initiativePost</td>
<td style="text-align: right;">0.1571288</td>
<td style="text-align: right;">0.2972099</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range40-49</td>
<td style="text-align: right;">-0.1281864</td>
<td style="text-align: right;">0.0437423</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range50-59</td>
<td style="text-align: right;">-0.1718161</td>
<td style="text-align: right;">-0.0208904</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range60-69</td>
<td style="text-align: right;">-0.2822603</td>
<td style="text-align: right;">-0.1360419</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range70+</td>
<td style="text-align: right;">-0.3703048</td>
<td style="text-align: right;">-0.2202836</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_RangeMissing</td>
<td style="text-align: right;">-0.5990260</td>
<td style="text-align: right;">0.5131790</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month2</td>
<td style="text-align: right;">-0.2143237</td>
<td style="text-align: right;">0.0056342</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month3</td>
<td style="text-align: right;">-0.3367475</td>
<td style="text-align: right;">-0.1192098</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month4</td>
<td style="text-align: right;">-0.1639076</td>
<td style="text-align: right;">0.0478547</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month5</td>
<td style="text-align: right;">-0.2461411</td>
<td style="text-align: right;">-0.0240624</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month6</td>
<td style="text-align: right;">-0.1268364</td>
<td style="text-align: right;">0.0992183</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month7</td>
<td style="text-align: right;">-0.1638300</td>
<td style="text-align: right;">0.0640878</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month8</td>
<td style="text-align: right;">-0.2593483</td>
<td style="text-align: right;">-0.0356320</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month9</td>
<td style="text-align: right;">-0.1347782</td>
<td style="text-align: right;">0.0907884</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month10</td>
<td style="text-align: right;">-0.2491417</td>
<td style="text-align: right;">-0.0322093</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month11</td>
<td style="text-align: right;">-0.1549653</td>
<td style="text-align: right;">0.0675434</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month12</td>
<td style="text-align: right;">0.0292075</td>
<td style="text-align: right;">0.2472504</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Since patients that did not receive a consult were coded as <code>NA</code> instead of 0, we do not have to perform a zero inflated regression this time.</p>
<section id="model-comparison" class="level5">
<h5 class="anchored" data-anchor-id="model-comparison">Model Comparison</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb222"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb222-1"><a href="#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the Poisson regression</span></span>
<span id="cb222-2"><a href="#cb222-2" aria-hidden="true" tabindex="-1"></a>model_goal2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(<span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span> <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month, <span class="at">data =</span> data_ex, <span class="at">family =</span> <span class="fu">poisson</span>())</span>
<span id="cb222-3"><a href="#cb222-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-4"><a href="#cb222-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare model performance</span></span>
<span id="cb222-5"><a href="#cb222-5" aria-hidden="true" tabindex="-1"></a>bic_p <span class="ot">&lt;-</span> <span class="fu">BIC</span>(model_goal2)</span>
<span id="cb222-6"><a href="#cb222-6" aria-hidden="true" tabindex="-1"></a>bic_nb <span class="ot">&lt;-</span> <span class="fu">BIC</span>(model_goal2_nb)</span>
<span id="cb222-7"><a href="#cb222-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-8"><a href="#cb222-8" aria-hidden="true" tabindex="-1"></a>aic_p <span class="ot">&lt;-</span> <span class="fu">AIC</span>(model_goal2)</span>
<span id="cb222-9"><a href="#cb222-9" aria-hidden="true" tabindex="-1"></a>aic_nb <span class="ot">&lt;-</span> <span class="fu">AIC</span>(model_goal2_nb)</span>
<span id="cb222-10"><a href="#cb222-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-11"><a href="#cb222-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a data frame to display the values </span></span>
<span id="cb222-12"><a href="#cb222-12" aria-hidden="true" tabindex="-1"></a>model_comparison <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Model =</span> <span class="fu">c</span>(<span class="st">"Poisson Model"</span>, <span class="st">"Negative Binomial Model"</span>), </span>
<span id="cb222-13"><a href="#cb222-13" aria-hidden="true" tabindex="-1"></a>                               <span class="at">BIC =</span> <span class="fu">c</span>(bic_p, bic_nb), </span>
<span id="cb222-14"><a href="#cb222-14" aria-hidden="true" tabindex="-1"></a>                               <span class="at">AIC =</span> <span class="fu">c</span>(bic_p, aic_nb))</span>
<span id="cb222-15"><a href="#cb222-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-16"><a href="#cb222-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Print resulting table</span></span>
<span id="cb222-17"><a href="#cb222-17" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(model_comparison)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Model</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">BIC</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">AIC</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Poisson Model</td>
<td style="text-align: right;">175456.25</td>
<td style="text-align: right;">175456.25</td>
</tr>
<tr class="even">
<td style="text-align: left;">Negative Binomial Model</td>
<td style="text-align: right;">40706.56</td>
<td style="text-align: right;">40580.41</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>AIC and BIC drastically prefer the negative binomial model, indicating it is a better fit for our data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb223"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the likelihood ratio test </span></span>
<span id="cb223-2"><a href="#cb223-2" aria-hidden="true" tabindex="-1"></a>lr_test <span class="ot">&lt;-</span> <span class="fu">lrtest</span>(model_goal2, model_goal2_nb) </span>
<span id="cb223-3"><a href="#cb223-3" aria-hidden="true" tabindex="-1"></a>lr_test</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Likelihood ratio test

Model 1: `ADMIT TO TREAT` ~ initiative + Age_Range + Month
Model 2: `ADMIT TO TREAT` ~ initiative + Age_Range + Month
  #Df LogLik Df  Chisq            Pr(&gt;Chisq)    
1  19 -87649                                    
2  20 -20270  1 134758 &lt; 0.00000000000000022 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<p>The likelihood ratio test also confirms the negative binomial model performs better.</p>
<p><a href="#Goal_Two">Top of Tabset</a></p>
</section>
</section>
</div>
<div id="tabset-7-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-3-tab">
<section id="overall-model-1" class="level4">
<h4 class="anchored" data-anchor-id="overall-model-1">Overall Model</h4>
<p>The likelihood ratio test indicates that the Negative Binomial model provides a significantly better fit than the Poisson model (χ² = 134758, df = 1, p &lt; 0.0001), supporting the decision to run the analysis as a Negative Binomial model due to overdispersion.</p>
</section>
<section id="main-effects-1" class="level4">
<h4 class="anchored" data-anchor-id="main-effects-1">Main Effects</h4>
<p>QI-initiative time period is a significant predictor for time from admit to treatment, while controlling for age and admission month. Compared to patients in the Pre time period, patients in the During time period had a mean admit to treatment time that was 0.40 times that of patients in the Pre period (z = 23.80, 95% CI: [0.37, 0.43], p &lt; 0.0001), and patients in the Post time period had a mean admit to treatment time that was 0.51 times that of patients in the Pre period (z = -26.01, 95% CI: [0.48, 0.53], p &lt; 0.0001). Additionally, compared to patients in the During time period, those in the Post time period had a mean admit to treatment time that was 1.26 times higher than that of patients during the During period (z = 6.37, 95% CI: [1.17, 1.35], p &lt; 0.0001), indicating a slight increase in admit to treatment time after the During period.</p>
</section>
<section id="age-2" class="level4">
<h4 class="anchored" data-anchor-id="age-2">Age</h4>
<p>Age was a significant predictor for time from admit to treatment, while controlling for QI-initiative time period and admission month. Compared to those who were 18-39, patients who were 50-59 had 0.91 times (z = -2.497, 95% CI: [0.84, 0.98], p = 0.0125), patients who were 60-69 had 0.81 times (z = -5.60, 95% CI: [0.75, 0.87], p &lt; 0.0001), and patients who were 70+ had 0.74 times (z = -7.70, 95% CI: [0.69, 0.80], p &lt; 0.0001) the admit to treatment time. Patients who were 40-49 did not have a statistically significant difference in admit to treatment time compared to those who were 18-39 (z = -0.97, 95% CI: [-.88, 1.04], p = 0.33).</p>
</section>
<section id="seasonality-2" class="level4">
<h4 class="anchored" data-anchor-id="seasonality-2">Seasonality</h4>
<p>Admission Month was a significant predictor for admit to treatment time, while controlling for QI-initiative time period and age. For instance, those admitted during March had an admit to treatment time that was 0.80 times that of those admitted during January (z = -4.11, 95% CI: [0.71, 0.89, p &lt; 0.0001]).</p>
<p>Since possible comparisons between months are myriad (12!), and the goal of this project was not to compare outcome variables between months (merely to control for these differences due to seasonality), further comparisons will not be made.</p>
<p><a href="#Goal_Two">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-7-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-4-tab">
<section id="qi-initiative" class="level4">
<h4 class="anchored" data-anchor-id="qi-initiative">QI-Initiative</h4>
<p>The QI-initiative successfully decreased the wait time from admit to therapy, with patients admitted in the During period having a mean wait time that was 0.40 times that of patients in the Pre period (p &lt; 0.0001), and patients admitted in the Post period having a wait time that was 0.51 times that of patients in the Pre period (p &lt; 0.0001).</p>
<p>Additionally, there was a slight increase in wait time from admit to therapy after the QI-initiative, with those admitted in the Post time period having a mean wait time that was 1.26 times higher than that of patients during the During period (p &lt; 0.0001).</p>
<p>The QI-initiative effectively halved the wait time from admission to therapy!</p>
</section>
<section id="age-3" class="level4">
<h4 class="anchored" data-anchor-id="age-3">Age</h4>
<p>There was an overall effect where patients that were 50 and older had an average admit to therapy wait time that was faster than patients who were 18-39. This indicates that patients who were 50 and older were being prioritized to receive physical therapy sooner.</p>
</section>
<section id="seasonality-3" class="level4">
<h4 class="anchored" data-anchor-id="seasonality-3">Seasonality</h4>
<p>There were significant differences in wait time from admit to therapy based on the month the patient was admitted, likely just due to differences in staffing (such as in December and January), making this important that we included <code>Admission Month</code> as a covariate in our model that we controlled for.</p>
<p><a href="#Goal_Two">Top of Tabset</a></p>
</section>
</div>
</div>
</div>
</section>
<section id="Goal_3" class="level2">
<h2 class="anchored" data-anchor-id="Goal_3">Goal 3: Increase Percentage of Admissions Receiving Physical Therapy</h2>
</section>
<section id="visualization-2" class="level2">
<h2 class="anchored" data-anchor-id="visualization-2">Visualization</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb225"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb225-1"><a href="#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert factor to numeric </span></span>
<span id="cb225-2"><a href="#cb225-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>PT_YESNO <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(data_ex<span class="sc">$</span>PT_YESNO)</span>
<span id="cb225-3"><a href="#cb225-3" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>PT_YESNO <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(data_ex<span class="sc">$</span>PT_YESNO <span class="sc">==</span> <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb225-4"><a href="#cb225-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-5"><a href="#cb225-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize and calculate percentages</span></span>
<span id="cb225-6"><a href="#cb225-6" aria-hidden="true" tabindex="-1"></a>summary_data <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb225-7"><a href="#cb225-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Admit_MonthYear, PT_YESNO) <span class="sc">|&gt;</span> </span>
<span id="cb225-8"><a href="#cb225-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb225-9"><a href="#cb225-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_count =</span> <span class="fu">sum</span>(count)) <span class="sc">|&gt;</span> </span>
<span id="cb225-10"><a href="#cb225-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb225-11"><a href="#cb225-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percentage =</span> (count <span class="sc">/</span> total_count) <span class="sc">*</span> <span class="dv">100</span>) <span class="sc">|&gt;</span> </span>
<span id="cb225-12"><a href="#cb225-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(PT_YESNO <span class="sc">==</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Admit_MonthYear'. You can override using
the `.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb227"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb227-1"><a href="#cb227-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the data</span></span>
<span id="cb227-2"><a href="#cb227-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(summary_data, <span class="fu">aes</span>(<span class="at">x =</span> Admit_MonthYear, <span class="at">y =</span> percentage)) <span class="sc">+</span></span>
<span id="cb227-3"><a href="#cb227-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb227-4"><a href="#cb227-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb227-5"><a href="#cb227-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data =</span> highlight_periods, <span class="fu">aes</span>(<span class="at">xmin =</span> start, <span class="at">xmax =</span> end, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb227-6"><a href="#cb227-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb227-7"><a href="#cb227-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fu">as.Date</span>(<span class="st">"2015-09-01"</span>), <span class="at">y =</span> <span class="cn">Inf</span>, </span>
<span id="cb227-8"><a href="#cb227-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">label =</span> <span class="st">"QI-Initiative"</span>, <span class="at">color =</span> <span class="st">"skyblue2"</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">vjust =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb227-9"><a href="#cb227-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Percentage of Admissions Receiving Physical Therapy"</span>,</span>
<span id="cb227-10"><a href="#cb227-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit Date"</span>,</span>
<span id="cb227-11"><a href="#cb227-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Percentage"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-107-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>They successfully increased the percentage of patients receiving PT from ~40% pre-initiative to ~80% during the initiative. This percentage then decreases to ~70% post-initiative</p>
<p><a href="#Goal_3">Top of Tabset</a></p>
</section>
<section id="analysis-2" class="level2">
<h2 class="anchored" data-anchor-id="analysis-2">Analysis</h2>
<p>For this model, we will perform a logistic regression to see if the likelihood of receiving physical therapy differs by QI-initiative time period.</p>
<section id="performing-the-logistic-regression" class="level4">
<h4 class="anchored" data-anchor-id="performing-the-logistic-regression">Performing the Logistic Regression</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb228"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb228-1"><a href="#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change reference level</span></span>
<span id="cb228-2"><a href="#cb228-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"Pre"</span>)</span>
<span id="cb228-3"><a href="#cb228-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb228-4"><a href="#cb228-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit the logistic regression</span></span>
<span id="cb228-5"><a href="#cb228-5" aria-hidden="true" tabindex="-1"></a>model_goal3 <span class="ot">&lt;-</span> <span class="fu">glm</span>(<span class="st">`</span><span class="at">PT_YESNO</span><span class="st">`</span> <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month, <span class="at">data =</span> data_ex, <span class="at">family =</span> <span class="fu">binomial</span>())</span>
<span id="cb228-6"><a href="#cb228-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb228-7"><a href="#cb228-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine Model</span></span>
<span id="cb228-8"><a href="#cb228-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_goal3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = PT_YESNO ~ initiative + Age_Range + Month, family = binomial(), 
    data = data_ex)

Coefficients:
                   Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)      -0.6578736  0.1161025  -5.666    0.000000014590105 ***
initiativeDuring  2.2538376  0.1242219  18.144 &lt; 0.0000000000000002 ***
initiativePost    1.5770714  0.0597127  26.411 &lt; 0.0000000000000002 ***
Age_Range40-49    0.1942255  0.0991812   1.958               0.0502 .  
Age_Range50-59    0.3539295  0.0875728   4.042    0.000053099439427 ***
Age_Range60-69    0.6444913  0.0882813   7.300    0.000000000000287 ***
Age_Range70+      0.7649869  0.0924630   8.273 &lt; 0.0000000000000002 ***
Age_RangeMissing -0.8542230  0.5543659  -1.541               0.1233    
Month2            0.0243884  0.1355416   0.180               0.8572    
Month3           -0.0339455  0.1314318  -0.258               0.7962    
Month4            0.0586231  0.1354835   0.433               0.6652    
Month5           -0.1217848  0.1394411  -0.873               0.3825    
Month6            0.0337387  0.1436000   0.235               0.8142    
Month7           -0.1237332  0.1420266  -0.871               0.3836    
Month8           -0.1786557  0.1377618  -1.297               0.1947    
Month9           -0.1873778  0.1357049  -1.381               0.1673    
Month10           0.0001322  0.1337587   0.001               0.9992    
Month11          -0.0958790  0.1371818  -0.699               0.4846    
Month12          -0.1006050  0.1348584  -0.746               0.4557    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 8467.8  on 6428  degrees of freedom
Residual deviance: 7380.2  on 6410  degrees of freedom
AIC: 7418.2

Number of Fisher Scoring iterations: 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb230"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb230-1"><a href="#cb230-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(model_goal3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-108-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-108-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-108-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-108-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb231"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb231-1"><a href="#cb231-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get 95% CI's</span></span>
<span id="cb231-2"><a href="#cb231-2" aria-hidden="true" tabindex="-1"></a>CIs <span class="ot">&lt;-</span> <span class="fu">confint</span>(model_goal3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Waiting for profiling to be done...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb233"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb233-1"><a href="#cb233-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(CIs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2.5 %</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">97.5 %</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">-0.8854116</td>
<td style="text-align: right;">-0.4301324</td>
</tr>
<tr class="even">
<td style="text-align: left;">initiativeDuring</td>
<td style="text-align: right;">2.0157006</td>
<td style="text-align: right;">2.5031759</td>
</tr>
<tr class="odd">
<td style="text-align: left;">initiativePost</td>
<td style="text-align: right;">1.4605436</td>
<td style="text-align: right;">1.6946369</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range40-49</td>
<td style="text-align: right;">-0.0000084</td>
<td style="text-align: right;">0.3888436</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range50-59</td>
<td style="text-align: right;">0.1824136</td>
<td style="text-align: right;">0.5257444</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range60-69</td>
<td style="text-align: right;">0.4717069</td>
<td style="text-align: right;">0.8178179</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range70+</td>
<td style="text-align: right;">0.5841624</td>
<td style="text-align: right;">0.9466712</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_RangeMissing</td>
<td style="text-align: right;">-1.9681144</td>
<td style="text-align: right;">0.2375779</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month2</td>
<td style="text-align: right;">-0.2412973</td>
<td style="text-align: right;">0.2901867</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month3</td>
<td style="text-align: right;">-0.2917846</td>
<td style="text-align: right;">0.2235710</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month4</td>
<td style="text-align: right;">-0.2067830</td>
<td style="text-align: right;">0.3244798</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month5</td>
<td style="text-align: right;">-0.3950084</td>
<td style="text-align: right;">0.1517726</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month6</td>
<td style="text-align: right;">-0.2473472</td>
<td style="text-align: right;">0.3157631</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month7</td>
<td style="text-align: right;">-0.4020100</td>
<td style="text-align: right;">0.1549117</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month8</td>
<td style="text-align: right;">-0.4487760</td>
<td style="text-align: right;">0.0914084</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month9</td>
<td style="text-align: right;">-0.4536273</td>
<td style="text-align: right;">0.0784819</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month10</td>
<td style="text-align: right;">-0.2621441</td>
<td style="text-align: right;">0.2623375</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month11</td>
<td style="text-align: right;">-0.3648504</td>
<td style="text-align: right;">0.1730579</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month12</td>
<td style="text-align: right;">-0.3650582</td>
<td style="text-align: right;">0.1637370</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="change-the-reference-category" class="level4">
<h4 class="anchored" data-anchor-id="change-the-reference-category">Change the Reference Category</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb234"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb234-1"><a href="#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change reference level</span></span>
<span id="cb234-2"><a href="#cb234-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"During"</span>)</span>
<span id="cb234-3"><a href="#cb234-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb234-4"><a href="#cb234-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit the logistic regression</span></span>
<span id="cb234-5"><a href="#cb234-5" aria-hidden="true" tabindex="-1"></a>model_goal3 <span class="ot">&lt;-</span> <span class="fu">glm</span>(<span class="st">`</span><span class="at">PT_YESNO</span><span class="st">`</span> <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month, <span class="at">data =</span> data_ex, <span class="at">family =</span> <span class="fu">binomial</span>())</span>
<span id="cb234-6"><a href="#cb234-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb234-7"><a href="#cb234-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine Model</span></span>
<span id="cb234-8"><a href="#cb234-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_goal3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = PT_YESNO ~ initiative + Age_Range + Month, family = binomial(), 
    data = data_ex)

Coefficients:
                   Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)       1.5959640  0.1644078   9.707 &lt; 0.0000000000000002 ***
initiativePre    -2.2538376  0.1242219 -18.144 &lt; 0.0000000000000002 ***
initiativePost   -0.6767663  0.1265678  -5.347    0.000000089392076 ***
Age_Range40-49    0.1942255  0.0991812   1.958               0.0502 .  
Age_Range50-59    0.3539295  0.0875728   4.042    0.000053099439427 ***
Age_Range60-69    0.6444913  0.0882813   7.300    0.000000000000287 ***
Age_Range70+      0.7649869  0.0924630   8.273 &lt; 0.0000000000000002 ***
Age_RangeMissing -0.8542230  0.5543659  -1.541               0.1233    
Month2            0.0243884  0.1355416   0.180               0.8572    
Month3           -0.0339455  0.1314318  -0.258               0.7962    
Month4            0.0586231  0.1354835   0.433               0.6652    
Month5           -0.1217848  0.1394411  -0.873               0.3825    
Month6            0.0337387  0.1436000   0.235               0.8142    
Month7           -0.1237332  0.1420266  -0.871               0.3836    
Month8           -0.1786557  0.1377618  -1.297               0.1947    
Month9           -0.1873778  0.1357049  -1.381               0.1673    
Month10           0.0001322  0.1337587   0.001               0.9992    
Month11          -0.0958790  0.1371818  -0.699               0.4846    
Month12          -0.1006050  0.1348584  -0.746               0.4557    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 8467.8  on 6428  degrees of freedom
Residual deviance: 7380.2  on 6410  degrees of freedom
AIC: 7418.2

Number of Fisher Scoring iterations: 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb236"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb236-1"><a href="#cb236-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get 95% CI's</span></span>
<span id="cb236-2"><a href="#cb236-2" aria-hidden="true" tabindex="-1"></a>CIs <span class="ot">&lt;-</span> <span class="fu">confint</span>(model_goal3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Waiting for profiling to be done...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb238"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb238-1"><a href="#cb238-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(CIs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2.5 %</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">97.5 %</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">1.2770502</td>
<td style="text-align: right;">1.9218819</td>
</tr>
<tr class="even">
<td style="text-align: left;">initiativePre</td>
<td style="text-align: right;">-2.5031759</td>
<td style="text-align: right;">-2.0157006</td>
</tr>
<tr class="odd">
<td style="text-align: left;">initiativePost</td>
<td style="text-align: right;">-0.9303411</td>
<td style="text-align: right;">-0.4336533</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range40-49</td>
<td style="text-align: right;">-0.0000084</td>
<td style="text-align: right;">0.3888436</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range50-59</td>
<td style="text-align: right;">0.1824136</td>
<td style="text-align: right;">0.5257444</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range60-69</td>
<td style="text-align: right;">0.4717069</td>
<td style="text-align: right;">0.8178179</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range70+</td>
<td style="text-align: right;">0.5841624</td>
<td style="text-align: right;">0.9466712</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_RangeMissing</td>
<td style="text-align: right;">-1.9681144</td>
<td style="text-align: right;">0.2375779</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month2</td>
<td style="text-align: right;">-0.2412973</td>
<td style="text-align: right;">0.2901867</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month3</td>
<td style="text-align: right;">-0.2917846</td>
<td style="text-align: right;">0.2235710</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month4</td>
<td style="text-align: right;">-0.2067830</td>
<td style="text-align: right;">0.3244798</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month5</td>
<td style="text-align: right;">-0.3950084</td>
<td style="text-align: right;">0.1517726</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month6</td>
<td style="text-align: right;">-0.2473472</td>
<td style="text-align: right;">0.3157631</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month7</td>
<td style="text-align: right;">-0.4020100</td>
<td style="text-align: right;">0.1549117</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month8</td>
<td style="text-align: right;">-0.4487760</td>
<td style="text-align: right;">0.0914084</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month9</td>
<td style="text-align: right;">-0.4536273</td>
<td style="text-align: right;">0.0784819</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month10</td>
<td style="text-align: right;">-0.2621441</td>
<td style="text-align: right;">0.2623375</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month11</td>
<td style="text-align: right;">-0.3648504</td>
<td style="text-align: right;">0.1730579</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month12</td>
<td style="text-align: right;">-0.3650582</td>
<td style="text-align: right;">0.1637370</td>
</tr>
</tbody>
</table>


</div>
</div>
<p><a href="#Goal_3">Top of Tabset</a></p>
</section>
</section>
<section id="interpretation-2" class="level2">
<h2 class="anchored" data-anchor-id="interpretation-2">Interpretation</h2>
<section id="main-effects-2" class="level4">
<h4 class="anchored" data-anchor-id="main-effects-2">Main Effects</h4>
<p>QI-initiative time period is a significant predictor for the likelihood of receiving PT, while controlling for age and admission month. Compared to patients in the Pre time period, the odds of receiving physical therapy in the During period were approximately 9.52 times higher (z = 18.144, 95% CI: [7.51, 12.22], p &lt; 0.0001), and the odds of receiving physical therapy in the Post time period were 4.84 times higher (z = 26.41, 95% CI: [4.31, 5.44], p &lt; 0.0001). The odds of receiving physical therapy in the Post time period were 0.51 the odds of receiving physical therapy in the during period (z = -5.35, 95% CI: [0.39,0.65], p &lt; 0.0001).</p>
</section>
<section id="age-4" class="level4">
<h4 class="anchored" data-anchor-id="age-4">Age</h4>
<p>Age was a significant predictor for the likelihood of receiving PT, while controlling for QI-initiative time period and admission month. Compared to those who were 18-39, the odds of receiving physical therapy were 1.42 times higher for patients aged 50-59 (z = 4.04, 95% CI: [1.20, 1.69], p &lt; 0.0001), 1.91 times higher for patients aged 60-69 (z = 7.30, 95% CI: [1.60, 2.27], p &lt; 0.0001 ), and 2.15 times higher for patients age 70+ (z = 8.273, 95% CI: [1.79,], p = 2.58). The odds of receiving PT did not differ significantly between patients who were 18-39 and those who were 40-49 (z = 1.96, 95% CI: [1.00, 1.48], p = 0.0502).</p>
</section>
<section id="seasonality-4" class="level4">
<h4 class="anchored" data-anchor-id="seasonality-4">Seasonality</h4>
<p>Admission Month was not a significant predictor for the likelihood of receiving PT (p’s for each month &gt; 0.5), but was included in the final model to account for potential seasonality effects.</p>
<p><a href="#Goal_3">Top of Tabset</a></p>
</section>
</section>
<section id="summary-13" class="level2">
<h2 class="anchored" data-anchor-id="summary-13">Summary</h2>
<section id="qi-initiative-1" class="level4">
<h4 class="anchored" data-anchor-id="qi-initiative-1">QI-Initiative</h4>
<p>The QI-initiative was successful at increasing the likelihood that patients received physical therapy. Compared to patients in the Pre time period, the odds of receiving physical therapy in the During period were approximately 9.52 times higher (p &lt; 0.0001), and the odds of receiving physical therapy in the Post time period were 4.84 times higher (p &lt; 0.0001).</p>
<p>Additionally, there was a decrease in the likelihood of receiving PT after the During period, with the odds of receiving physical therapy in the Post time period being 0.51 the odds of receiving physical therapy in the during period (p &lt; 0.0001).</p>
</section>
<section id="age-5" class="level4">
<h4 class="anchored" data-anchor-id="age-5">Age</h4>
<p>There was an overall effect, where patients 50 years and older were more likely to receive PT compared to those 18-39 years old, while controlling for QI-initiative time period and admission month.</p>
<p>This is again evidence that older patients were receiving priority for PT.</p>
<p><a href="#Goal_3">Top of Tabset</a></p>
<p>::::</p>
</section>
</section>
</section>
<section id="some-rough-plotting-will-change" class="level1">
<h1>Some Rough Plotting, will change</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb239"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb239-1"><a href="#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the effects package</span></span>
<span id="cb239-2"><a href="#cb239-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(effects)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: carData</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>lattice theme set by effectsTheme()
See ?effectsTheme for details.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb242"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb242-1"><a href="#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the effect of the predictors</span></span>
<span id="cb242-2"><a href="#cb242-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">allEffects</span>(model_goal2_nb), </span>
<span id="cb242-3"><a href="#cb242-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Effect Plots for Predictors"</span>,</span>
<span id="cb242-4"><a href="#cb242-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">"Predicted Counts"</span>,</span>
<span id="cb242-5"><a href="#cb242-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Predictors"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-110-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb243"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb243-1"><a href="#cb243-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the effect of the predictors</span></span>
<span id="cb243-2"><a href="#cb243-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">allEffects</span>(model_goal3), </span>
<span id="cb243-3"><a href="#cb243-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Effect Plots for Predictors"</span>,</span>
<span id="cb243-4"><a href="#cb243-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">"Predicted Counts"</span>,</span>
<span id="cb243-5"><a href="#cb243-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Predictors"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-111-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb244"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb244-1"><a href="#cb244-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the effect of the predictors</span></span>
<span id="cb244-2"><a href="#cb244-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">allEffects</span>(model_goal1_nb), </span>
<span id="cb244-3"><a href="#cb244-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Effect Plots for Predictors"</span>,</span>
<span id="cb244-4"><a href="#cb244-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">"Predicted Counts"</span>,</span>
<span id="cb244-5"><a href="#cb244-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Predictors"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-112-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="analysis-primary-outcome-variables" class="level1">
<h1>Analysis: Primary Outcome Variables</h1>
<section id="micu-los" class="level2">
<h2 class="anchored" data-anchor-id="micu-los">MICU LOS</h2>
<section id="check-for-overdispersion-2" class="level4">
<h4 class="anchored" data-anchor-id="check-for-overdispersion-2">Check for Overdispersion</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb245"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb245-1"><a href="#cb245-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare mean and variance</span></span>
<span id="cb245-2"><a href="#cb245-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">"Mean = "</span>, <span class="fu">mean</span>(data_ex<span class="sc">$</span>Unit_LOS, <span class="at">na.rm =</span> T))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Mean = 138.781303468658"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb247"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb247-1"><a href="#cb247-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare mean and variance</span></span>
<span id="cb247-2"><a href="#cb247-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">"Variance = "</span>, <span class="fu">var</span>(data_ex<span class="sc">$</span>Unit_LOS, <span class="at">na.rm =</span> T))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Variance = 12778.5408389354"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb249"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb249-1"><a href="#cb249-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change reference level</span></span>
<span id="cb249-2"><a href="#cb249-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"Pre"</span>)</span>
<span id="cb249-3"><a href="#cb249-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-4"><a href="#cb249-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit a Negative Binomial model</span></span>
<span id="cb249-5"><a href="#cb249-5" aria-hidden="true" tabindex="-1"></a>model_MICU1 <span class="ot">&lt;-</span> <span class="fu">glm.nb</span>(Unit_LOS <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month <span class="sc">+</span> MV_YN <span class="sc">+</span> initiative<span class="sc">*</span>MV_YN, <span class="at">data =</span> data_ex)</span>
<span id="cb249-6"><a href="#cb249-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-7"><a href="#cb249-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine Model</span></span>
<span id="cb249-8"><a href="#cb249-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_MICU1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm.nb(formula = Unit_LOS ~ initiative + Age_Range + Month + 
    MV_YN + initiative * MV_YN, data = data_ex, init.theta = 2.89638124, 
    link = log)

Coefficients:
                        Estimate Std. Error z value            Pr(&gt;|z|)    
(Intercept)             4.575005   0.033081 138.298 &lt;0.0000000000000002 ***
initiativeDuring       -0.059210   0.036828  -1.608              0.1079    
initiativePost         -0.056642   0.022643  -2.502              0.0124 *  
Age_Range40-49          0.008848   0.026690   0.332              0.7403    
Age_Range50-59          0.041945   0.023536   1.782              0.0747 .  
Age_Range60-69          0.040613   0.023288   1.744              0.0812 .  
Age_Range70+            0.009633   0.024181   0.398              0.6904    
Age_RangeMissing       -0.267162   0.151154  -1.767              0.0771 .  
Month2                  0.023969   0.035963   0.666              0.5051    
Month3                 -0.033916   0.035145  -0.965              0.3345    
Month4                  0.034315   0.035180   0.975              0.3294    
Month5                 -0.061465   0.036543  -1.682              0.0926 .  
Month6                 -0.012577   0.037528  -0.335              0.7375    
Month7                 -0.022236   0.037368  -0.595              0.5518    
Month8                  0.018430   0.036409   0.506              0.6127    
Month9                  0.029887   0.036174   0.826              0.4087    
Month10                -0.025767   0.035414  -0.728              0.4669    
Month11                 0.038192   0.036284   1.053              0.2925    
Month12                 0.017155   0.035652   0.481              0.6304    
MV_YN                   0.626973   0.022275  28.147 &lt;0.0000000000000002 ***
initiativeDuring:MV_YN  0.045840   0.051418   0.892              0.3726    
initiativePost:MV_YN   -0.012359   0.031583  -0.391              0.6956    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for Negative Binomial(2.8964) family taken to be 1)

    Null deviance: 8520.7  on 6428  degrees of freedom
Residual deviance: 6747.5  on 6407  degrees of freedom
AIC: 72759

Number of Fisher Scoring iterations: 1

              Theta:  2.8964 
          Std. Err.:  0.0495 

 2 x log-likelihood:  -72712.5680 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb251"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb251-1"><a href="#cb251-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change reference level</span></span>
<span id="cb251-2"><a href="#cb251-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"During"</span>)</span>
<span id="cb251-3"><a href="#cb251-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-4"><a href="#cb251-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit a Negative Binomial model</span></span>
<span id="cb251-5"><a href="#cb251-5" aria-hidden="true" tabindex="-1"></a>model_MICU1 <span class="ot">&lt;-</span> <span class="fu">glm.nb</span>(Unit_LOS <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month <span class="sc">+</span> MV_YN <span class="sc">+</span> PT_YESNO <span class="sc">+</span> initiative<span class="sc">*</span>MV_YN <span class="sc">+</span> initiative<span class="sc">*</span>PT_YESNO, <span class="at">data =</span> data_ex)</span>
<span id="cb251-6"><a href="#cb251-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-7"><a href="#cb251-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine Model</span></span>
<span id="cb251-8"><a href="#cb251-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_MICU1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm.nb(formula = Unit_LOS ~ initiative + Age_Range + Month + 
    MV_YN + PT_YESNO + initiative * MV_YN + initiative * PT_YESNO, 
    data = data_ex, init.theta = 3.224202545, link = log)

Coefficients:
                         Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)              4.080354   0.072560  56.234 &lt; 0.0000000000000002 ***
initiativePre            0.301220   0.068476   4.399  0.00001087802318015 ***
initiativePost           0.141583   0.071128   1.991               0.0465 *  
Age_Range40-49           0.002130   0.025356   0.084               0.9331    
Age_Range50-59           0.016160   0.022380   0.722               0.4703    
Age_Range60-69          -0.002159   0.022209  -0.097               0.9226    
Age_Range70+            -0.042520   0.023088  -1.842               0.0655 .  
Age_RangeMissing        -0.157385   0.143748  -1.095               0.2736    
Month2                   0.025042   0.034145   0.733               0.4633    
Month3                  -0.028549   0.033380  -0.855               0.3924    
Month4                   0.030444   0.033405   0.911               0.3621    
Month5                  -0.041242   0.034701  -1.188               0.2346    
Month6                  -0.008787   0.035632  -0.247               0.8052    
Month7                  -0.007606   0.035488  -0.214               0.8303    
Month8                   0.032067   0.034582   0.927               0.3538    
Month9                   0.049173   0.034364   1.431               0.1524    
Month10                 -0.028129   0.033647  -0.836               0.4032    
Month11                  0.042015   0.034463   1.219               0.2228    
Month12                  0.016852   0.033878   0.497               0.6189    
MV_YN                    0.661031   0.044056  15.004 &lt; 0.0000000000000002 ***
PT_YESNO                 0.515947   0.065797   7.841  0.00000000000000445 ***
initiativePre:MV_YN     -0.068529   0.048844  -1.403               0.1606    
initiativePost:MV_YN    -0.067318   0.048916  -1.376               0.1688    
initiativePre:PT_YESNO  -0.041756   0.069080  -0.604               0.5455    
initiativePost:PT_YESNO -0.108273   0.070554  -1.535               0.1249    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for Negative Binomial(3.2242) family taken to be 1)

    Null deviance: 9461.8  on 6428  degrees of freedom
Residual deviance: 6706.5  on 6404  degrees of freedom
AIC: 72019

Number of Fisher Scoring iterations: 1

              Theta:  3.2242 
          Std. Err.:  0.0555 

 2 x log-likelihood:  -71966.9100 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb253"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb253-1"><a href="#cb253-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the Poisson regression</span></span>
<span id="cb253-2"><a href="#cb253-2" aria-hidden="true" tabindex="-1"></a>model_MICU2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(Unit_LOS <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month, <span class="at">data =</span> data_ex, <span class="at">family =</span> <span class="fu">poisson</span>())</span>
<span id="cb253-3"><a href="#cb253-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb253-4"><a href="#cb253-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine Model</span></span>
<span id="cb253-5"><a href="#cb253-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_MICU2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = Unit_LOS ~ initiative + Age_Range + Month, family = poisson(), 
    data = data_ex)

Coefficients:
                  Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)       4.994730   0.005511 906.269 &lt; 0.0000000000000002 ***
initiativePre    -0.019047   0.003722  -5.117       0.000000310608 ***
initiativePost   -0.011393   0.003733  -3.052             0.002276 ** 
Age_Range40-49   -0.020990   0.003820  -5.495       0.000000039047 ***
Age_Range50-59    0.015264   0.003338   4.572       0.000004824519 ***
Age_Range60-69    0.011279   0.003305   3.413             0.000643 ***
Age_Range70+     -0.051842   0.003477 -14.911 &lt; 0.0000000000000002 ***
Age_RangeMissing -0.561893   0.028363 -19.811 &lt; 0.0000000000000002 ***
Month2           -0.001573   0.005044  -0.312             0.755103    
Month3           -0.103632   0.005047 -20.535 &lt; 0.0000000000000002 ***
Month4           -0.027146   0.004954  -5.480       0.000000042546 ***
Month5           -0.121404   0.005283 -22.978 &lt; 0.0000000000000002 ***
Month6           -0.033936   0.005304  -6.398       0.000000000158 ***
Month7           -0.088840   0.005358 -16.579 &lt; 0.0000000000000002 ***
Month8           -0.057586   0.005175 -11.128 &lt; 0.0000000000000002 ***
Month9           -0.004862   0.005071  -0.959             0.337711    
Month10          -0.075986   0.005051 -15.043 &lt; 0.0000000000000002 ***
Month11           0.003963   0.005076   0.781             0.434998    
Month12           0.013370   0.004977   2.687             0.007218 ** 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for poisson family taken to be 1)

    Null deviance: 454959  on 6428  degrees of freedom
Residual deviance: 452121  on 6410  degrees of freedom
AIC: 494196

Number of Fisher Scoring iterations: 5</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb255"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb255-1"><a href="#cb255-1" aria-hidden="true" tabindex="-1"></a><span class="fu">exp</span>(<span class="fl">0.672813</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.959742</code></pre>
</div>
</div>
</section>
</section>
<section id="mv-time" class="level2">
<h2 class="anchored" data-anchor-id="mv-time">MV Time</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb257"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb257-1"><a href="#cb257-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change reference level</span></span>
<span id="cb257-2"><a href="#cb257-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"Pre"</span>)</span>
<span id="cb257-3"><a href="#cb257-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-4"><a href="#cb257-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit a Negative Binomial model</span></span>
<span id="cb257-5"><a href="#cb257-5" aria-hidden="true" tabindex="-1"></a>model_MV1 <span class="ot">&lt;-</span> <span class="fu">glm.nb</span>(MV_Total <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month <span class="sc">+</span> PT_YESNO <span class="sc">+</span> initiative<span class="sc">*</span>PT_YESNO, <span class="at">data =</span> data_ex)</span>
<span id="cb257-6"><a href="#cb257-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine Model</span></span>
<span id="cb257-7"><a href="#cb257-7" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_MV1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm.nb(formula = MV_Total ~ initiative + Age_Range + Month + 
    PT_YESNO + initiative * PT_YESNO, data = data_ex, init.theta = 2.683472494, 
    link = log)

Coefficients:
                           Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)                1.671885   0.054963  30.418 &lt; 0.0000000000000002 ***
initiativeDuring          -0.174017   0.117174  -1.485              0.13751    
initiativePost            -0.068835   0.050237  -1.370              0.17062    
Age_Range40-49             0.007595   0.045868   0.166              0.86848    
Age_Range50-59             0.035102   0.040031   0.877              0.38055    
Age_Range60-69             0.027379   0.039866   0.687              0.49223    
Age_Range70+               0.027671   0.042442   0.652              0.51443    
Age_RangeMissing          -0.223865   0.536852  -0.417              0.67668    
Month2                    -0.067732   0.059670  -1.135              0.25633    
Month3                    -0.109009   0.060592  -1.799              0.07201 .  
Month4                    -0.072982   0.059303  -1.231              0.21845    
Month5                    -0.175880   0.062532  -2.813              0.00491 ** 
Month6                    -0.069501   0.063094  -1.102              0.27066    
Month7                    -0.146947   0.065898  -2.230              0.02575 *  
Month8                    -0.116529   0.063499  -1.835              0.06649 .  
Month9                     0.012630   0.061063   0.207              0.83613    
Month10                   -0.187107   0.060154  -3.110              0.00187 ** 
Month11                   -0.044106   0.060853  -0.725              0.46858    
Month12                   -0.052045   0.058538  -0.889              0.37396    
PT_YESNO                   0.382438   0.041038   9.319 &lt; 0.0000000000000002 ***
initiativeDuring:PT_YESNO  0.074419   0.127737   0.583              0.56017    
initiativePost:PT_YESNO   -0.057312   0.061872  -0.926              0.35429    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for Negative Binomial(2.6835) family taken to be 1)

    Null deviance: 3394.0  on 3262  degrees of freedom
Residual deviance: 3213.6  on 3241  degrees of freedom
  (3166 observations deleted due to missingness)
AIC: 17919

Number of Fisher Scoring iterations: 1

              Theta:  2.6835 
          Std. Err.:  0.0920 

 2 x log-likelihood:  -17872.8420 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb259"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb259-1"><a href="#cb259-1" aria-hidden="true" tabindex="-1"></a><span class="fu">exp</span>(<span class="fl">0.456857</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.579103</code></pre>
</div>
</div>
</section>
</section>
<section id="plotting" class="level1">
<h1>Plotting</h1>
<section id="average-micu-los" class="level2">
<h2 class="anchored" data-anchor-id="average-micu-los">Average MICU LOS</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb261"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb261-1"><a href="#cb261-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize and plot the data</span></span>
<span id="cb261-2"><a href="#cb261-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb261-3"><a href="#cb261-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Admit_MonthYear) <span class="sc">|&gt;</span> </span>
<span id="cb261-4"><a href="#cb261-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_Unit_LOS =</span> <span class="fu">mean</span>(Unit_LOS, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<span id="cb261-5"><a href="#cb261-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Admit_MonthYear, <span class="at">y =</span> avg_Unit_LOS)) <span class="sc">+</span></span>
<span id="cb261-6"><a href="#cb261-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb261-7"><a href="#cb261-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb261-8"><a href="#cb261-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data =</span> highlight_periods, <span class="fu">aes</span>(<span class="at">xmin =</span> start, <span class="at">xmax =</span> end, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb261-9"><a href="#cb261-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb261-10"><a href="#cb261-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Average MICU LOS over Time"</span>,</span>
<span id="cb261-11"><a href="#cb261-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit Date"</span>,</span>
<span id="cb261-12"><a href="#cb261-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Avg MICU LOS"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-118-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>It does not appear that <code>MICU_LOS</code> has decreased across any of the time periods.</p>
<p>This is including patients that did not receive PT, so of course there’s no difference.</p>
<section id="micu-los-over-time-by-mechanical-ventilation" class="level4">
<h4 class="anchored" data-anchor-id="micu-los-over-time-by-mechanical-ventilation">MICU LOS over Time by Mechanical Ventilation</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb262"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb262-1"><a href="#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Dummy code MV status </span></span>
<span id="cb262-2"><a href="#cb262-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>MV_YN <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(data_ex<span class="sc">$</span>MV_Total), <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb262-3"><a href="#cb262-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb262-4"><a href="#cb262-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Make it a factor for better plotting</span></span>
<span id="cb262-5"><a href="#cb262-5" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb262-6"><a href="#cb262-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">MV_YN =</span> <span class="fu">as.factor</span>(MV_YN))</span>
<span id="cb262-7"><a href="#cb262-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb262-8"><a href="#cb262-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize and plot the data</span></span>
<span id="cb262-9"><a href="#cb262-9" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb262-10"><a href="#cb262-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Admit_MonthYear, MV_YN) <span class="sc">|&gt;</span> </span>
<span id="cb262-11"><a href="#cb262-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_Unit_LOS =</span> <span class="fu">mean</span>(Unit_LOS, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<span id="cb262-12"><a href="#cb262-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Admit_MonthYear, <span class="at">y =</span> avg_Unit_LOS, <span class="at">color =</span> MV_YN, <span class="at">group =</span> MV_YN)) <span class="sc">+</span></span>
<span id="cb262-13"><a href="#cb262-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb262-14"><a href="#cb262-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb262-15"><a href="#cb262-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data =</span> highlight_periods, <span class="fu">aes</span>(<span class="at">xmin =</span> start, <span class="at">xmax =</span> end, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb262-16"><a href="#cb262-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb262-17"><a href="#cb262-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Average MICU LOS over Time by Mechanical Ventilation"</span>,</span>
<span id="cb262-18"><a href="#cb262-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit Date"</span>,</span>
<span id="cb262-19"><a href="#cb262-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Avg MICU LOS"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Admit_MonthYear'. You can override using
the `.groups` argument.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-119-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This shows that those who were mechanically ventilated had a higher MICU length of stay. This does not appear to have differed in relation to the QI iniative.</p>
<p>I am also including those that did not receive PT here, so that would explain the null finding.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb264"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb264-1"><a href="#cb264-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize and plot the data</span></span>
<span id="cb264-2"><a href="#cb264-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb264-3"><a href="#cb264-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Admit_MonthYear, MV_YN, PT_YESNO) <span class="sc">|&gt;</span> </span>
<span id="cb264-4"><a href="#cb264-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_Unit_LOS =</span> <span class="fu">mean</span>(Unit_LOS, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<span id="cb264-5"><a href="#cb264-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Admit_MonthYear, <span class="at">y =</span> avg_Unit_LOS, <span class="at">color =</span> PT_YESNO)) <span class="sc">+</span></span>
<span id="cb264-6"><a href="#cb264-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb264-7"><a href="#cb264-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">se =</span> F) <span class="sc">+</span></span>
<span id="cb264-8"><a href="#cb264-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb264-9"><a href="#cb264-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data =</span> highlight_periods, <span class="fu">aes</span>(<span class="at">xmin =</span> start, <span class="at">xmax =</span> end, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb264-10"><a href="#cb264-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb264-11"><a href="#cb264-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Average MICU LOS over Time by Mechanical Ventilation"</span>,</span>
<span id="cb264-12"><a href="#cb264-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit Date"</span>,</span>
<span id="cb264-13"><a href="#cb264-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Avg MICU LOS"</span>) <span class="sc">+</span></span>
<span id="cb264-14"><a href="#cb264-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>MV_YN)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-120-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>I <em>think</em> this might show an interaction. For those on mechanical ventilation, they seemed to decrease in MICU LOS more if they received PT.</p>
<p>For those not on MV, the PT did not seem to change their average LOS.</p>
</section>
<section id="average-micu-los-over-time-by-physical-therapy" class="level4">
<h4 class="anchored" data-anchor-id="average-micu-los-over-time-by-physical-therapy">Average MICU LOS over Time by Physical Therapy</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb265"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb265-1"><a href="#cb265-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make it a factor for better plotting</span></span>
<span id="cb265-2"><a href="#cb265-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb265-3"><a href="#cb265-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">PT_YESNO =</span> <span class="fu">as.factor</span>(PT_YESNO))</span>
<span id="cb265-4"><a href="#cb265-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb265-5"><a href="#cb265-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize and plot the data</span></span>
<span id="cb265-6"><a href="#cb265-6" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb265-7"><a href="#cb265-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Admit_MonthYear, PT_YESNO) <span class="sc">|&gt;</span> </span>
<span id="cb265-8"><a href="#cb265-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_Unit_LOS =</span> <span class="fu">mean</span>(Unit_LOS, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<span id="cb265-9"><a href="#cb265-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Admit_MonthYear <span class="sc">&gt;</span> <span class="fu">as.Date</span>(<span class="st">"2012-01-01"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb265-10"><a href="#cb265-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Admit_MonthYear, <span class="at">y =</span> avg_Unit_LOS, <span class="at">color =</span> PT_YESNO, <span class="at">group =</span> PT_YESNO)) <span class="sc">+</span></span>
<span id="cb265-11"><a href="#cb265-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb265-12"><a href="#cb265-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb265-13"><a href="#cb265-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data =</span> highlight_periods, <span class="fu">aes</span>(<span class="at">xmin =</span> start, <span class="at">xmax =</span> end, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb265-14"><a href="#cb265-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb265-15"><a href="#cb265-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Average MICU LOS over Time by Physical Therapy"</span>,</span>
<span id="cb265-16"><a href="#cb265-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit Date"</span>,</span>
<span id="cb265-17"><a href="#cb265-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Avg MICU LOS"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Admit_MonthYear'. You can override using
the `.groups` argument.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-121-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb267"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb267-1"><a href="#cb267-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize and plot the data</span></span>
<span id="cb267-2"><a href="#cb267-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb267-3"><a href="#cb267-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Admit_MonthYear, PT_YESNO) <span class="sc">|&gt;</span> </span>
<span id="cb267-4"><a href="#cb267-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_Unit_LOS =</span> <span class="fu">mean</span>(Unit_LOS, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<span id="cb267-5"><a href="#cb267-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Admit_MonthYear <span class="sc">&gt;</span> <span class="fu">as.Date</span>(<span class="st">"2012-01-01"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb267-6"><a href="#cb267-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Admit_MonthYear, <span class="at">y =</span> avg_Unit_LOS, <span class="at">color =</span> PT_YESNO, <span class="at">group =</span> PT_YESNO)) <span class="sc">+</span></span>
<span id="cb267-7"><a href="#cb267-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb267-8"><a href="#cb267-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">se =</span> F) <span class="sc">+</span></span>
<span id="cb267-9"><a href="#cb267-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb267-10"><a href="#cb267-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data =</span> highlight_periods, <span class="fu">aes</span>(<span class="at">xmin =</span> start, <span class="at">xmax =</span> end, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb267-11"><a href="#cb267-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb267-12"><a href="#cb267-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Average MICU LOS over Time by Physical Therapy"</span>,</span>
<span id="cb267-13"><a href="#cb267-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit Date"</span>,</span>
<span id="cb267-14"><a href="#cb267-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Avg MICU LOS"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Admit_MonthYear'. You can override using
the `.groups` argument.
`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-122-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Interesting! It does look like average MICU length of stay decreased slighly immediately after the QI initiative. It also looks like it may be increasing slightly from then on.</p>
<p>That does appear that those received PT had a decrease before and after the iniative</p>
<p>But overall it looks like the QI may have successfuly decreased MICU LOS.</p>
</section>
<section id="fitting-with-splines" class="level4">
<h4 class="anchored" data-anchor-id="fitting-with-splines">Fitting with Splines</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb269"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb269-1"><a href="#cb269-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(splines)</span>
<span id="cb269-2"><a href="#cb269-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize and plot the data</span></span>
<span id="cb269-3"><a href="#cb269-3" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb269-4"><a href="#cb269-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Admit_MonthYear, PT_YESNO) <span class="sc">|&gt;</span> </span>
<span id="cb269-5"><a href="#cb269-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_Unit_LOS =</span> <span class="fu">mean</span>(Unit_LOS, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<span id="cb269-6"><a href="#cb269-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Admit_MonthYear <span class="sc">&gt;</span> <span class="fu">as.Date</span>(<span class="st">"2012-01-01"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb269-7"><a href="#cb269-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Admit_MonthYear, <span class="at">y =</span> avg_Unit_LOS, <span class="at">color =</span> PT_YESNO, <span class="at">group =</span> PT_YESNO)) <span class="sc">+</span></span>
<span id="cb269-8"><a href="#cb269-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb269-9"><a href="#cb269-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">formula =</span> y <span class="sc">~</span> <span class="fu">ns</span>(x, <span class="at">df =</span> <span class="dv">4</span>), <span class="at">se =</span> F) <span class="sc">+</span></span>
<span id="cb269-10"><a href="#cb269-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb269-11"><a href="#cb269-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data =</span> highlight_periods, <span class="fu">aes</span>(<span class="at">xmin =</span> start, <span class="at">xmax =</span> end, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb269-12"><a href="#cb269-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb269-13"><a href="#cb269-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Average MICU LOS over Time by Physical Therapy"</span>,</span>
<span id="cb269-14"><a href="#cb269-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit Date"</span>,</span>
<span id="cb269-15"><a href="#cb269-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Avg MICU LOS"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Admit_MonthYear'. You can override using
the `.groups` argument.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-123-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>:::</p>
</section>
<section id="some-graphing" class="level4">
<h4 class="anchored" data-anchor-id="some-graphing">Some Graphing</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb271"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb271-1"><a href="#cb271-1" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb271-2"><a href="#cb271-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">initiative =</span> <span class="fu">as.factor</span>(initiative)) <span class="sc">|&gt;</span> </span>
<span id="cb271-3"><a href="#cb271-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">initiative =</span> <span class="fu">relevel</span>(initiative, <span class="at">ref =</span> <span class="st">"Pre"</span>))</span>
<span id="cb271-4"><a href="#cb271-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb271-5"><a href="#cb271-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">x =</span> PT_YESNO, <span class="at">y =</span> Unit_LOS_log, <span class="at">fill =</span> initiative)) <span class="sc">+</span></span>
<span id="cb271-6"><a href="#cb271-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb271-7"><a href="#cb271-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb271-8"><a href="#cb271-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Pastel2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-124-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This shows that MICU LOS decreased in the during and post QI initiative periods compared to the pre-iniatitive period.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb272"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb272-1"><a href="#cb272-1" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb272-2"><a href="#cb272-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(PT_YESNO <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb272-3"><a href="#cb272-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> initiative, <span class="at">y =</span> Unit_LOS_log, <span class="at">fill =</span> initiative)) <span class="sc">+</span></span>
<span id="cb272-4"><a href="#cb272-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb272-5"><a href="#cb272-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb272-6"><a href="#cb272-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Pastel2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-125-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb273"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb273-1"><a href="#cb273-1" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb273-2"><a href="#cb273-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(PT_YESNO <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb273-3"><a href="#cb273-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> initiative, <span class="at">y =</span> Unit_LOS_log, <span class="at">fill =</span> initiative)) <span class="sc">+</span></span>
<span id="cb273-4"><a href="#cb273-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb273-5"><a href="#cb273-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb273-6"><a href="#cb273-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Pastel2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-126-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>There is an interaction here between PT and unit LOS and initiative.</p>
<p>In other words, you HAVE to filter based on PT</p>
</section>
<section id="mv-total" class="level4">
<h4 class="anchored" data-anchor-id="mv-total">MV Total</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb274"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb274-1"><a href="#cb274-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">x =</span> PT_YESNO, <span class="at">y =</span> MV_Total_log, <span class="at">fill =</span> initiative)) <span class="sc">+</span></span>
<span id="cb274-2"><a href="#cb274-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb274-3"><a href="#cb274-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb274-4"><a href="#cb274-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Pastel2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_boxplot()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-127-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="bonus" class="level1">
<h1>Bonus</h1>
<section id="check-for-repeat-admissions" class="level2">
<h2 class="anchored" data-anchor-id="check-for-repeat-admissions">Check for Repeat Admissions</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb276"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb276-1"><a href="#cb276-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check for repeate admissions</span></span>
<span id="cb276-2"><a href="#cb276-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(data_ex<span class="sc">$</span>id))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6429</code></pre>
</div>
<div class="sourceCode cell-code" id="cb278"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb278-1"><a href="#cb278-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(data_ex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6429   42</code></pre>
</div>
</div>
<p>The number of unique patient id’s is the same number as the number of rows in our data set.</p>
<p>So we do not have repeate admissions in this data set and do not need to account for repeated measures! (We meet the assumption of independent observations)</p>
<p>:::</p>
</section>
</section>
<section id="to-do" class="level1">
<h1>To Do</h1>
<p>Come back to the likelihood of being a structural zero for ZINF models.</p>
<p>Plot disjointed lm’s across each time period</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb280"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb280-1"><a href="#cb280-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize and plot the data</span></span>
<span id="cb280-2"><a href="#cb280-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb280-3"><a href="#cb280-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Admit_MonthYear) <span class="sc">|&gt;</span> </span>
<span id="cb280-4"><a href="#cb280-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_pct_therapy =</span> <span class="fu">mean</span>(NON_ICU_LOS, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<span id="cb280-5"><a href="#cb280-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Admit_MonthYear, <span class="at">y =</span> avg_pct_therapy)) <span class="sc">+</span></span>
<span id="cb280-6"><a href="#cb280-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb280-7"><a href="#cb280-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb280-8"><a href="#cb280-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data =</span> highlight_periods, <span class="fu">aes</span>(<span class="at">xmin =</span> start, <span class="at">xmax =</span> end, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb280-9"><a href="#cb280-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb280-10"><a href="#cb280-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Non-ICU Length of Stay over Time"</span>,</span>
<span id="cb280-11"><a href="#cb280-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit Date"</span>,</span>
<span id="cb280-12"><a href="#cb280-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Non-ICU Length of Stay"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-129-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb281"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb281-1"><a href="#cb281-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize and plot the data</span></span>
<span id="cb281-2"><a href="#cb281-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb281-3"><a href="#cb281-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Admit_MonthYear) <span class="sc">|&gt;</span> </span>
<span id="cb281-4"><a href="#cb281-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_pct_therapy =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">HOSPITAL LOS</span><span class="st">`</span>, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<span id="cb281-5"><a href="#cb281-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Admit_MonthYear, <span class="at">y =</span> avg_pct_therapy)) <span class="sc">+</span></span>
<span id="cb281-6"><a href="#cb281-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb281-7"><a href="#cb281-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb281-8"><a href="#cb281-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data =</span> highlight_periods, <span class="fu">aes</span>(<span class="at">xmin =</span> start, <span class="at">xmax =</span> end, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb281-9"><a href="#cb281-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb281-10"><a href="#cb281-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Hospital Length of Stay over Time"</span>,</span>
<span id="cb281-11"><a href="#cb281-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit Date"</span>,</span>
<span id="cb281-12"><a href="#cb281-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Non-ICU Length of Stay"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-130-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb282"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb282-1"><a href="#cb282-1" aria-hidden="true" tabindex="-1"></a>model_test <span class="ot">&lt;-</span> <span class="fu">lm</span>(Unit_LOS_boxcox <span class="sc">~</span> Age_Range, <span class="at">data =</span> data_ex)</span>
<span id="cb282-2"><a href="#cb282-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = Unit_LOS_boxcox ~ Age_Range, data = data_ex)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.67200 -0.82194 -0.06243  0.81884  2.10036 

Coefficients:
                 Estimate Std. Error t value Pr(&gt;|t|)   
(Intercept)      -0.04308    0.02983  -1.444  0.14866   
Age_Range40-49    0.02550    0.04471   0.570  0.56852   
Age_Range50-59    0.09324    0.03947   2.362  0.01819 * 
Age_Range60-69    0.09011    0.03903   2.309  0.02098 * 
Age_Range70+     -0.01155    0.04051  -0.285  0.77557   
Age_RangeMissing -0.72278    0.25143  -2.875  0.00406 **
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.9986 on 6423 degrees of freedom
Multiple R-squared:  0.003568,  Adjusted R-squared:  0.002793 
F-statistic:   4.6 on 5 and 6423 DF,  p-value: 0.0003425</code></pre>
</div>
<div class="sourceCode cell-code" id="cb284"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb284-1"><a href="#cb284-1" aria-hidden="true" tabindex="-1"></a>model_test <span class="ot">&lt;-</span> <span class="fu">lm</span>(MV_Total_log <span class="sc">~</span> Age_Range, <span class="at">data =</span> data_ex)</span>
<span id="cb284-2"><a href="#cb284-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = MV_Total_log ~ Age_Range, data = data_ex)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.55604 -0.45743 -0.09881  0.54941  1.96603 

Coefficients:
                 Estimate Std. Error t value            Pr(&gt;|t|)    
(Intercept)       1.46796    0.03102  47.322 &lt;0.0000000000000002 ***
Age_Range40-49    0.01715    0.04711   0.364              0.7159    
Age_Range50-59    0.08809    0.04131   2.132              0.0331 *  
Age_Range60-69    0.06208    0.04109   1.511              0.1309    
Age_Range70+      0.03775    0.04380   0.862              0.3888    
Age_RangeMissing  0.14148    0.54041   0.262              0.7935    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.763 on 3257 degrees of freedom
  (3166 observations deleted due to missingness)
Multiple R-squared:  0.001747,  Adjusted R-squared:  0.0002142 
F-statistic:  1.14 on 5 and 3257 DF,  p-value: 0.3369</code></pre>
</div>
<div class="sourceCode cell-code" id="cb286"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb286-1"><a href="#cb286-1" aria-hidden="true" tabindex="-1"></a>model_test <span class="ot">&lt;-</span> <span class="fu">lm</span>(Unit_LOS_boxcox <span class="sc">~</span> Age_Quartile, <span class="at">data =</span> data_ex)</span>
<span id="cb286-2"><a href="#cb286-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = Unit_LOS_boxcox ~ Age_Quartile, data = data_ex)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.66421 -0.81415 -0.06422  0.81090  2.11148 

Coefficients:
                  Estimate Std. Error t value Pr(&gt;|t|)   
(Intercept)       -0.05778    0.02691  -2.147  0.03184 * 
Age_Quartile43-56  0.10015    0.03653   2.741  0.00614 **
Age_Quartile57-66  0.08772    0.03646   2.406  0.01615 * 
Age_Quartile67+    0.03556    0.03594   0.990  0.32244   
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.9995 on 6425 degrees of freedom
Multiple R-squared:  0.001539,  Adjusted R-squared:  0.001073 
F-statistic: 3.301 on 3 and 6425 DF,  p-value: 0.01947</code></pre>
</div>
<div class="sourceCode cell-code" id="cb288"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb288-1"><a href="#cb288-1" aria-hidden="true" tabindex="-1"></a>model_test <span class="ot">&lt;-</span> <span class="fu">lm</span>(Unit_LOS_boxcox <span class="sc">~</span> SEX, <span class="at">data =</span> data_ex)</span>
<span id="cb288-2"><a href="#cb288-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = Unit_LOS_boxcox ~ SEX, data = data_ex)

Residuals:
    Min      1Q  Median      3Q     Max 
-1.6377 -0.8222 -0.0693  0.8121  2.0727 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)
(Intercept) -0.01901    0.01850  -1.027    0.304
SEXMale      0.03482    0.02505   1.390    0.164

Residual standard error: 0.9999 on 6427 degrees of freedom
Multiple R-squared:  0.0003007, Adjusted R-squared:  0.0001451 
F-statistic: 1.933 on 1 and 6427 DF,  p-value: 0.1645</code></pre>
</div>
<div class="sourceCode cell-code" id="cb290"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb290-1"><a href="#cb290-1" aria-hidden="true" tabindex="-1"></a>model_test <span class="ot">&lt;-</span> <span class="fu">lm</span>(MV_Total_log <span class="sc">~</span> SEX, <span class="at">data =</span> data_ex)</span>
<span id="cb290-2"><a href="#cb290-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = MV_Total_log ~ SEX, data = data_ex)

Residuals:
    Min      1Q  Median      3Q     Max 
-1.5173 -0.4187 -0.1232  0.5621  1.9244 

Coefficients:
            Estimate Std. Error t value            Pr(&gt;|t|)    
(Intercept) 1.509536   0.020084   75.16 &lt;0.0000000000000002 ***
SEXMale     0.007812   0.026899    0.29               0.772    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.7632 on 3261 degrees of freedom
  (3166 observations deleted due to missingness)
Multiple R-squared:  2.586e-05, Adjusted R-squared:  -0.0002808 
F-statistic: 0.08434 on 1 and 3261 DF,  p-value: 0.7715</code></pre>
</div>
<div class="sourceCode cell-code" id="cb292"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb292-1"><a href="#cb292-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggsignif)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'ggsignif' was built under R version 4.4.2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb294"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb294-1"><a href="#cb294-1" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb294-2"><a href="#cb294-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Age_Range) <span class="sc">|&gt;</span> </span>
<span id="cb294-3"><a href="#cb294-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Unit_LOS_avg =</span> <span class="fu">median</span>(Unit_LOS)) <span class="sc">|&gt;</span></span>
<span id="cb294-4"><a href="#cb294-4" aria-hidden="true" tabindex="-1"></a>              <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Age_Range, <span class="at">y =</span> Unit_LOS_avg, <span class="at">fill =</span> Age_Range)) <span class="sc">+</span></span>
<span id="cb294-5"><a href="#cb294-5" aria-hidden="true" tabindex="-1"></a>              <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb294-6"><a href="#cb294-6" aria-hidden="true" tabindex="-1"></a>              <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb294-7"><a href="#cb294-7" aria-hidden="true" tabindex="-1"></a>              <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Median MICU Length of Stay by Age Range"</span>,</span>
<span id="cb294-8"><a href="#cb294-8" aria-hidden="true" tabindex="-1"></a>                   <span class="at">x =</span> <span class="st">"Age Range"</span>,</span>
<span id="cb294-9"><a href="#cb294-9" aria-hidden="true" tabindex="-1"></a>                   <span class="at">y =</span> <span class="st">"Median MICU Length of Stay"</span>,</span>
<span id="cb294-10"><a href="#cb294-10" aria-hidden="true" tabindex="-1"></a>                   <span class="at">fill =</span> <span class="st">"Age Range"</span>) <span class="sc">+</span></span>
<span id="cb294-11"><a href="#cb294-11" aria-hidden="true" tabindex="-1"></a>              <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Pastel2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-130-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb295"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb295-1"><a href="#cb295-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize and plot the data</span></span>
<span id="cb295-2"><a href="#cb295-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb295-3"><a href="#cb295-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Admit_MonthYear) <span class="sc">|&gt;</span> </span>
<span id="cb295-4"><a href="#cb295-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_pct_therapy =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">CONSULT TO TREAT</span><span class="st">`</span>, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<span id="cb295-5"><a href="#cb295-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Admit_MonthYear, <span class="at">y =</span> avg_pct_therapy)) <span class="sc">+</span></span>
<span id="cb295-6"><a href="#cb295-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb295-7"><a href="#cb295-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb295-8"><a href="#cb295-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data =</span> highlight_periods, <span class="fu">aes</span>(<span class="at">xmin =</span> start, <span class="at">xmax =</span> end, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb295-9"><a href="#cb295-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb295-10"><a href="#cb295-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Time from Consult to Treat over Time"</span>,</span>
<span id="cb295-11"><a href="#cb295-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit Date"</span>,</span>
<span id="cb295-12"><a href="#cb295-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Consult to Treat"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-131-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb296"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb296-1"><a href="#cb296-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">x =</span> PT_YESNO, <span class="at">y =</span> <span class="fu">log</span>(NON_ICU_LOS), <span class="at">fill =</span> initiative)) <span class="sc">+</span></span>
<span id="cb296-2"><a href="#cb296-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb296-3"><a href="#cb296-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb296-4"><a href="#cb296-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Pastel2"</span>) <span class="sc">+</span></span>
<span id="cb296-5"><a href="#cb296-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Non-ICU Length of Stay by QI-Iniative Time Period and PT Status"</span>,</span>
<span id="cb296-6"><a href="#cb296-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span> <span class="st">"Received PT or Not"</span>,</span>
<span id="cb296-7"><a href="#cb296-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Log NON-ICU Length of Stay"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 106 rows containing non-finite outside the scale range
(`stat_boxplot()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-132-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb298"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb298-1"><a href="#cb298-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">x =</span> PT_YESNO, <span class="at">y =</span> <span class="fu">log</span>(<span class="st">`</span><span class="at">HOSPITAL LOS</span><span class="st">`</span>), <span class="at">fill =</span> initiative)) <span class="sc">+</span></span>
<span id="cb298-2"><a href="#cb298-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb298-3"><a href="#cb298-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb298-4"><a href="#cb298-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Pastel2"</span>) <span class="sc">+</span></span>
<span id="cb298-5"><a href="#cb298-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Total Hospital Length of Stay by QI-Iniative Time Period and PT Status"</span>,</span>
<span id="cb298-6"><a href="#cb298-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span> <span class="st">"Received PT or Not"</span>,</span>
<span id="cb298-7"><a href="#cb298-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Log Hospital Length of Stay"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-133-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Sean Vieau">
<meta name="dcterms.date" content="2024-10-13">

<title>Data Checking - Statistical Consulting</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Megan_Watson_Project_files/libs/clipboard/clipboard.min.js"></script>
<script src="Megan_Watson_Project_files/libs/quarto-html/quarto.js"></script>
<script src="Megan_Watson_Project_files/libs/quarto-html/popper.min.js"></script>
<script src="Megan_Watson_Project_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Megan_Watson_Project_files/libs/quarto-html/anchor.min.js"></script>
<link href="Megan_Watson_Project_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Megan_Watson_Project_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Megan_Watson_Project_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Megan_Watson_Project_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Megan_Watson_Project_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="Megan_Watson_Project_files/libs/kePrint-0.0.1/kePrint.js"></script>

<link href="Megan_Watson_Project_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">



</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#scope-of-work-sow-agreement" id="toc-scope-of-work-sow-agreement" class="nav-link" data-scroll-target="#scope-of-work-sow-agreement">Scope of Work (SOW) Agreement</a>
  <ul class="collapse">
  <li><a href="#general-information" id="toc-general-information" class="nav-link" data-scroll-target="#general-information">General Information</a></li>
  <li><a href="#project-description" id="toc-project-description" class="nav-link" data-scroll-target="#project-description">Project Description</a>
  <ul class="collapse">
  <li><a href="#background" id="toc-background" class="nav-link" data-scroll-target="#background">Background</a></li>
  <li><a href="#study-design" id="toc-study-design" class="nav-link" data-scroll-target="#study-design">Study Design</a></li>
  <li><a href="#description-of-the-data" id="toc-description-of-the-data" class="nav-link" data-scroll-target="#description-of-the-data">Description of the Data</a></li>
  <li><a href="#anticipated-sample-size-study-population" id="toc-anticipated-sample-size-study-population" class="nav-link" data-scroll-target="#anticipated-sample-size-study-population">Anticipated Sample Size / Study Population</a></li>
  <li><a href="#hypothesis" id="toc-hypothesis" class="nav-link" data-scroll-target="#hypothesis">Hypothesis</a></li>
  <li><a href="#analysis-plan-sketch" id="toc-analysis-plan-sketch" class="nav-link" data-scroll-target="#analysis-plan-sketch">Analysis Plan (Sketch)</a></li>
  </ul></li>
  <li><a href="#project-deliverables" id="toc-project-deliverables" class="nav-link" data-scroll-target="#project-deliverables">Project Deliverables</a></li>
  </ul></li>
  <li><a href="#data-preparation" id="toc-data-preparation" class="nav-link" data-scroll-target="#data-preparation">Data Preparation</a></li>
  <li><a href="#missingness" id="toc-missingness" class="nav-link" data-scroll-target="#missingness">Missingness</a></li>
  <li><a href="#data-quality-check" id="toc-data-quality-check" class="nav-link" data-scroll-target="#data-quality-check">Data Quality Check</a></li>
  <li><a href="#Filtering" id="toc-Filtering" class="nav-link" data-scroll-target="#Filtering">Filter Data Set</a></li>
  <li><a href="#univariate-distributions" id="toc-univariate-distributions" class="nav-link" data-scroll-target="#univariate-distributions">Univariate Distributions</a>
  <ul class="collapse">
  <li><a href="#Outcome_Variables" id="toc-Outcome_Variables" class="nav-link" data-scroll-target="#Outcome_Variables">Outcome Variables</a></li>
  </ul></li>
  <li><a href="#Clean" id="toc-Clean" class="nav-link" data-scroll-target="#Clean">Data Cleaning</a>
  <ul class="collapse">
  <li><a href="#average-micu-los" id="toc-average-micu-los" class="nav-link" data-scroll-target="#average-micu-los">Average MICU LOS</a></li>
  </ul></li>
  <li><a href="#main-goals" id="toc-main-goals" class="nav-link" data-scroll-target="#main-goals">Main Goals</a>
  <ul class="collapse">
  <li><a href="#increase-frequency-of-pt-visits" id="toc-increase-frequency-of-pt-visits" class="nav-link" data-scroll-target="#increase-frequency-of-pt-visits">Increase Frequency of PT Visits</a></li>
  <li><a href="#decrease-time-from-admit-to-therapy" id="toc-decrease-time-from-admit-to-therapy" class="nav-link" data-scroll-target="#decrease-time-from-admit-to-therapy">Decrease Time from Admit to Therapy</a></li>
  <li><a href="#increase-percentage-of-admissions-receiving-physical-therapy" id="toc-increase-percentage-of-admissions-receiving-physical-therapy" class="nav-link" data-scroll-target="#increase-percentage-of-admissions-receiving-physical-therapy">Increase Percentage of Admissions Receiving Physical Therapy</a></li>
  </ul></li>
  <li><a href="#variable-creation" id="toc-variable-creation" class="nav-link" data-scroll-target="#variable-creation">Variable Creation</a>
  <ul class="collapse">
  <li><a href="#mechanical-ventilation-1" id="toc-mechanical-ventilation-1" class="nav-link" data-scroll-target="#mechanical-ventilation-1">Mechanical Ventilation</a></li>
  <li><a href="#qi-initiative-time-period" id="toc-qi-initiative-time-period" class="nav-link" data-scroll-target="#qi-initiative-time-period">QI-Initiative Time Period</a></li>
  </ul></li>
  <li><a href="#bonus" id="toc-bonus" class="nav-link" data-scroll-target="#bonus">Bonus</a>
  <ul class="collapse">
  <li><a href="#check-for-repeat-admissions" id="toc-check-for-repeat-admissions" class="nav-link" data-scroll-target="#check-for-repeat-admissions">Check for Repeat Admissions</a></li>
  </ul></li>
  <li><a href="#table-1" id="toc-table-1" class="nav-link" data-scroll-target="#table-1">Table 1</a></li>
  <li><a href="#correlation-matrix" id="toc-correlation-matrix" class="nav-link" data-scroll-target="#correlation-matrix">Correlation Matrix</a></li>
  <li><a href="#to-do" id="toc-to-do" class="nav-link" data-scroll-target="#to-do">To Do</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Checking - Statistical Consulting</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Sean Vieau </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 13, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>This is the Quarto markdown for the live consultation in BIOS 6621: Statistical Consulting.</p>
<p>This is a research project encompassing the entire data analysis pipeline, from initial consultation to scope of work writing, execution of statistical analysis, and completion of project deliverables.</p>
</section>
<section id="scope-of-work-sow-agreement" class="level1">
<h1>Scope of Work (SOW) Agreement</h1>
<section id="general-information" class="level2">
<h2 class="anchored" data-anchor-id="general-information">General Information</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Investigator</strong></td>
<td>Megan Watson</td>
<td><strong>Date</strong></td>
<td>September 30, 2024</td>
</tr>
<tr class="even">
<td><strong>Project Title</strong></td>
<td>Quality Improvement into Standard Practice: Persistent Practice Changes and Decreased Length of Stay for 3 years following a Medical ICU Physical Therapy Quality Improvement Project</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="project-description" class="level2">
<h2 class="anchored" data-anchor-id="project-description">Project Description</h2>
<section id="background" class="level3">
<h3 class="anchored" data-anchor-id="background">Background</h3>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The objective of this study is to assess the impact of a MICU physical therapy (PT) quality improvement (QI) project on physical therapist practice, and quantify the changes in length of stay (LOS) and mechanical ventilation (MV) time. The goals of the QI Initiative were to increase percentage of MICU admissions receiving PT, decrease time from MICU admission to first PT, and increase the frequency of PT visits. The main question the researcher came to us with was: how to correctly model the longitudinal data in the study?</p>
</section>
<section id="study-design" class="level3">
<h3 class="anchored" data-anchor-id="study-design">Study Design</h3>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; This was a retrospective cohort study, comparing 3 main time periods: Pre-QI Initiative (before April 2015), During QI Initiative (April 2015-Dec 2015), and After-QI Initiative (Jan 2016 and later). The QI initiative was deployed during the 9-month period between April 2015 and December 2015, during which time there were education and staffing changes. Patients were stratified as either having mechanical ventilation or not having mechanical ventilation. The primary outcomes of interest were MICU LOS and time on MV. Secondary outcomes of interest were the non-ICU LOS, total hospital LOS, and discharge location.</p>
</section>
<section id="description-of-the-data" class="level3">
<h3 class="anchored" data-anchor-id="description-of-the-data">Description of the Data</h3>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Data was received as a de-identified .csv. Data points consist of: Admit and Discharge Time, PT Consult Time, Admit to Consult Time, First Therapy Time, Consult to Therapy Time, Admit to Therapy Time, Total Therapy Visits, Days with Therapy Visits, Average, min, and Max Therapy Length, Admit and Discharge Date/Time, Total MV Days, Hospital LOS, Patient Age, Sex, “Problem List”, and Codes (presumably ICD9/10).</p>
</section>
<section id="anticipated-sample-size-study-population" class="level3">
<h3 class="anchored" data-anchor-id="anticipated-sample-size-study-population">Anticipated Sample Size / Study Population</h3>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The sample size is N = ~3000-4000, consisting of patients admitted to the MICU with a LOS between 2 and 30 days (I.e. exclude &lt; 2 days or &gt; 30 days). This was a single site study performed here at Colorado University.</p>
</section>
<section id="hypothesis" class="level3">
<h3 class="anchored" data-anchor-id="hypothesis">Hypothesis</h3>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The hypothesis for the study was that LOS and time on MV would decrease when comparing the pre- and intra-initiative time periods, and when comparing the pre- and post-initiative time periods. Clinical significance for this outcome is considered as a 1-2 day change in LOS. The intended end product of this project is a publication in a PT journal.</p>
</section>
<section id="analysis-plan-sketch" class="level3">
<h3 class="anchored" data-anchor-id="analysis-plan-sketch">Analysis Plan (Sketch)</h3>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Data should first be examined for missingness, as this has not been performed. Similarly, repeat MICU admissions should be explored and controlled for to ensure independence of observations. Death during MICU stay should also be examined and adjusted for if needed. The analysis plan discussed was to utilize splines to capture the trajectory of LOS or time on MV over time by fitting smooth curves to the data. Linear contrasts should be performed to assess if there is a significant difference in LOS or time on MV when comparing two timepoints (i.e.&nbsp;pre- and intra-, pre- and post- , and post- and intra-QI Initiative. Supplementary analyses should be performed to assess secondary outcomes of interest of non-ICU LOS and total hospital LOS.</p>
</section>
</section>
<section id="project-deliverables" class="level2">
<h2 class="anchored" data-anchor-id="project-deliverables">Project Deliverables</h2>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; At this stage, Megan has only asked for insight into what method to use to account for variance in time for her analysis. There are currently no other deliverables.</p>
<p><strong>Timeline / Deadlines</strong></p>
<p>At this time, Megan has not asked for data analysis efforts from us.</p>
<p>Should this change, the anticipated project start date will be 1 week after our next meeting with her, where revisions to the Comprehensive Analysis Report are also expected to be completed. &nbsp;The assigned analysts will reach out to the investigator to confirm the project timeframe and the project start date may be altered if necessary. 2 weeks will be allowed for initial data analysis by the assigned analyst.</p>
<p>A follow-up meeting is to occur no later than <strong>1 month after the next meeting with Megan.</strong> During the follow-up meeting, the project team will discuss and preliminary results of the analysis, mockup the desired tables and figures (1-2 descriptive tables, 1-2 analysis results tables and up to 4 graphs), and discuss next steps. During the follow-up meeting, the team will establish a meeting schedule for the remainder of the project.&nbsp;</p>
<p><strong>Estimated Cost</strong></p>
<p>This represents our best estimate of the effort needed to complete the project. Should the scope of work change substantially, the analyst(s) will discuss changes with the investigator and issue a new or amended project agreement.</p>
<table class="caption-top table">
<tbody>
<tr class="odd">
<td></td>
<td><strong>Effort</strong></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><strong>Months</strong></td>
<td>PhD Faculty</td>
<td>Master’s Faculty</td>
<td>Student</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><strong>1</strong></td>
<td>20%</td>
<td>0%</td>
<td>80%</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td><strong>Total Costs</strong></td>
<td><strong>’Bout Tree Fiddy</strong></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="data-preparation" class="level1">
<h1>Data Preparation</h1>
<p>Let’s begin by loading our libraries</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(naniar) <span class="co"># Used to visualize missing data</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra) <span class="co"># Used for pretty printing (kable_styling)</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(table1) <span class="co"># Used to make Table 1</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gridExtra) <span class="co"># Used to plot ggplots side by side</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(bestNormalize) <span class="co"># Used to find best transformation for a variable</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Import the data set.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"C:/Users/sviea/Documents/Statistical Consulting/Vieau_Project_01/Data Raw/MICUPT_Deidentify.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
Rows: 13109 Columns: 25
── Column specification
──────────────────────────────────────────────────────── Delimiter: "," chr
(9): SEX, PROBLEM LIST DX CODES, PROBLEM LIST DX NAMES, DISCH_DISP, DEP... dbl
(16): ...1, MV_Total, HOSPITAL LOS, ADMIT TO CONSULT, CONSULT TO TREAT, ...
ℹ Use `spec()` to retrieve the full column specification for this data. ℹ
Specify the column types or set `show_col_types = FALSE` to quiet this message.
• `` -&gt; `...1`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(data)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">"id"</span> <span class="co"># Rename the wonky id column</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And take a look at our data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 13,109
Columns: 25
$ id                                    &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 1…
$ SEX                                   &lt;chr&gt; "M", "F", "F", "F", "F", "F", "M…
$ MV_Total                              &lt;dbl&gt; 30, NA, 13, NA, 16, NA, NA, NA, …
$ `HOSPITAL LOS`                        &lt;dbl&gt; 1827, 767, 610, 839, 1109, 549, …
$ `PROBLEM LIST DX CODES`               &lt;chr&gt; "291.81, 305.00, 311, 4", "287.5…
$ `PROBLEM LIST DX NAMES`               &lt;chr&gt; "AKI (acute kidney injury) (HC c…
$ DISCH_DISP                            &lt;chr&gt; "Skilled Nursing Facility", "Hom…
$ `DEPT BEFORE Unit`                    &lt;chr&gt; "PRE-ADMISSION", "PRE-ADMISSION"…
$ `DEPT AFTER Unit`                     &lt;chr&gt; "CARDIOLOGY UNIT", "AMC PULM UNI…
$ `ADMIT TO CONSULT`                    &lt;dbl&gt; 576, 451, 313, 403, 386, 17, NA,…
$ `CONSULT TO TREAT`                    &lt;dbl&gt; 97, NA, 97, 28, 19, NA, NA, NA, …
$ `ADMIT TO TREAT`                      &lt;dbl&gt; 673, NA, 410, 431, 405, NA, NA, …
$ `TOTAL THERAPY VISITS`                &lt;dbl&gt; 8, 0, 2, 2, 4, 0, 0, 0, 0, 0, 2,…
$ Unit_LOS                              &lt;dbl&gt; 1394, 487, 610, 483, 606, 25, 39…
$ `DAYS WITH THERAPY VISITS`            &lt;dbl&gt; 8, 0, 2, 2, 4, 0, 0, 0, 0, 0, 2,…
$ `PERCENT OF DAYS WITH THERAPY VISITS` &lt;dbl&gt; 13.79, 0.00, 8.00, 10.00, 16.00,…
$ `AVG THERAPY LENGTH`                  &lt;dbl&gt; 22, 0, 27, 17, 25, 0, 0, 0, 0, 0…
$ `MAX THERAPY LENGTH`                  &lt;dbl&gt; 30, 0, 30, 20, 30, 0, 0, 0, 0, 0…
$ `MIN THERAPY LENGTH`                  &lt;dbl&gt; 15, 0, 25, 15, 20, 0, 0, 0, 0, 0…
$ `ACTUAL DAYS POST MICU`               &lt;dbl&gt; 18, 12, 0, 15, 17, 4, 0, 8, 2, 5…
$ `PT or OT VISIT DAYS POST MICU`       &lt;dbl&gt; 5, 3, 0, 1, 9, 0, 0, 3, 0, 3, 2,…
$ `PERCENT POST ICU DAYS THERAPY`       &lt;dbl&gt; 27.78, 25.00, 0.00, 6.67, 52.94,…
$ Age_Range                             &lt;chr&gt; "60-69", "40-49", "40-49", "18-3…
$ Admit_MonthYear                       &lt;chr&gt; "2011-08", "2011-08", "2011-08",…
$ Age_Quartile                          &lt;chr&gt; "57-66", "43-56", "43-56", "14-4…</code></pre>
</div>
</div>
<p>It looks like everything is formatted correctly for the most part.</p>
<p>Percents are coded as doubles.</p>
<p><code>Admit_MonthYear</code> is a string (e.g.&nbsp;“2011-08”) that we may have to process in order to create variables for the 3 main time periods: Pre-QI Initiative (before April 2015), During QI Initiative (April 2015-Dec 2015), and After-QI Initiative (Jan 2016 and later).</p>
<p>Let’s take a look at our data for good measure.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pretty print header of wideform data</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(data), <span class="at">format =</span> <span class="st">"html"</span>, <span class="at">full_width =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">SEX</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MV_Total</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">HOSPITAL LOS</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">PROBLEM LIST DX CODES</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">PROBLEM LIST DX NAMES</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">DISCH_DISP</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">DEPT BEFORE Unit</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">DEPT AFTER Unit</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ADMIT TO CONSULT</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">CONSULT TO TREAT</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ADMIT TO TREAT</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">TOTAL THERAPY VISITS</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Unit_LOS</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">DAYS WITH THERAPY VISITS</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">PERCENT OF DAYS WITH THERAPY VISITS</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">AVG THERAPY LENGTH</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MAX THERAPY LENGTH</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MIN THERAPY LENGTH</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ACTUAL DAYS POST MICU</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">PT or OT VISIT DAYS POST MICU</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">PERCENT POST ICU DAYS THERAPY</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Age_Range</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Admit_MonthYear</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Age_Quartile</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">30</td>
<td style="text-align: right;">1827</td>
<td style="text-align: left;">291.81, 305.00, 311, 4</td>
<td style="text-align: left;">AKI (acute kidney injury) (HC c</td>
<td style="text-align: left;">Skilled Nursing Facility</td>
<td style="text-align: left;">PRE-ADMISSION</td>
<td style="text-align: left;">CARDIOLOGY UNIT</td>
<td style="text-align: right;">576</td>
<td style="text-align: right;">97</td>
<td style="text-align: right;">673</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">1394</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">13.79</td>
<td style="text-align: right;">22</td>
<td style="text-align: right;">30</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">27.78</td>
<td style="text-align: left;">60-69</td>
<td style="text-align: left;">2011-08</td>
<td style="text-align: left;">57-66</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">767</td>
<td style="text-align: left;">287.5, 416.8, 584.9, 5</td>
<td style="text-align: left;">Acute renal failure (HC code),</td>
<td style="text-align: left;">Home-Health Care Svc</td>
<td style="text-align: left;">PRE-ADMISSION</td>
<td style="text-align: left;">AMC PULM UNIT</td>
<td style="text-align: right;">451</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">487</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">25.00</td>
<td style="text-align: left;">40-49</td>
<td style="text-align: left;">2011-08</td>
<td style="text-align: left;">43-56</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">610</td>
<td style="text-align: left;">078.5, 284.1, 288.4, 5</td>
<td style="text-align: left;">CMV (cytomegalovirus infectio</td>
<td style="text-align: left;">Expired</td>
<td style="text-align: left;">PRE-ADMISSION</td>
<td style="text-align: left;">POST-DISCHARGE</td>
<td style="text-align: right;">313</td>
<td style="text-align: right;">97</td>
<td style="text-align: right;">410</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">610</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">8.00</td>
<td style="text-align: right;">27</td>
<td style="text-align: right;">30</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">40-49</td>
<td style="text-align: left;">2011-08</td>
<td style="text-align: left;">43-56</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">839</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Long Term Care</td>
<td style="text-align: left;">PRE-ADMISSION</td>
<td style="text-align: left;">CARDIOLOGY UNIT</td>
<td style="text-align: right;">403</td>
<td style="text-align: right;">28</td>
<td style="text-align: right;">431</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">483</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">6.67</td>
<td style="text-align: left;">18-39</td>
<td style="text-align: left;">2011-08</td>
<td style="text-align: left;">14-42</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">1109</td>
<td style="text-align: left;">250.00, 250.60, 356.9</td>
<td style="text-align: left;">Cellulitis, Diabetes mellitus (H</td>
<td style="text-align: left;">Skilled Nursing Facility</td>
<td style="text-align: left;">OLD AMC CARD ICU</td>
<td style="text-align: left;">CARDIOLOGY UNIT</td>
<td style="text-align: right;">386</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">405</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">606</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">16.00</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">30</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">52.94</td>
<td style="text-align: left;">40-49</td>
<td style="text-align: left;">2011-08</td>
<td style="text-align: left;">43-56</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">549</td>
<td style="text-align: left;">041.04, 244.9, 288.60</td>
<td style="text-align: left;">AKI (acute kidney injury) (HC c</td>
<td style="text-align: left;">Hospice/Medical Facility</td>
<td style="text-align: left;">AMC MED SPEC UNIT</td>
<td style="text-align: left;">CARDIOLOGY UNIT</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">40-49</td>
<td style="text-align: left;">2011-08</td>
<td style="text-align: left;">14-42</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Looks good.</p>
</section>
<section id="missingness" class="level1">
<h1>Missingness</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gg_miss_var</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>We are missing the most data in <code>MV_Total</code> , followed by <code>CONSULT TO TREAT</code>, <code>ADMIT TO TREAT</code>, and <code>PROBLEM LIST DX CODES</code>. Missingness does not seem to be an issue for the rest of the variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">vis_miss</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Immediately concerning is the 65% missing data on <code>MV_TOTAL</code>, the variable for total time on mechanical ventilation, which happens to me a main outcome of interest.</p>
<p><code>CONSULT TO TREAT</code> has 56% missing and <code>ADMIT TO TREAT</code> has 55% missing. This could be because, in emergency situations where immediate critical care is required, patients might be directly admitted to the MICU without a formal consult.</p>
<p><code>PROBLEM LIST DX CODES</code> and <code>PROBLEM LIST DX NAME</code> have 25% and 20% missing, respectively. Odd that their missingness doesn’t align exactly. This isn’t actually too bad, and our sample size is large enough that we may still be able to include these variables in our analysis if we wanted to. We’d just have to do some processing to place patients into large enough overarching diagnosis categories that we’d have enough patients in each group. Not the researcher’s primary research question however so not looking any further into it. We’d also have to examine missingness and see if there are and patterns or it’s MCAR.</p>
<section id="summary" class="level4">
<h4 class="anchored" data-anchor-id="summary">Summary</h4>
<p>Based on the initial missingness checks, we will exclude variables with excessive missingness.</p>
<p>These variables will be retained for reporting in Table 1 for the researcher, but will be excluded from consideration in the analysis.</p>
<ul>
<li><p><code>Consult to Treat</code> and <code>Admit to Treat</code> are missing &gt;= 55% of values, and will thus be excluded from analysis.</p></li>
<li><p><code>Problem List DX Codes</code> is missing 25% and <code>Problem List DX Names</code> is missing 20% of values. Additionally, it would be challenging to include these variables in the analysis in a meaningful way due to sample size limitations, so these will be excluded from consideration in the final analysis.</p></li>
<li><p><code>Admit to Consult</code> is missing 23% of values.</p></li>
</ul>
<p>All other variables were missing &lt; 1% and thus missingness does not need to be addressed for these variables.</p>
</section>
</section>
<section id="data-quality-check" class="level1">
<h1>Data Quality Check</h1>
<p>Let’s perform some simple min/max checks to assess if data has been entered correctly.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This function summarizes the mins and maxes of numeric variables</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>summarize_column <span class="ot">&lt;-</span> <span class="cf">function</span>(column) {</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.numeric</span>(column)) {</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">data.frame</span>(</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">Type =</span> <span class="st">"Numeric"</span>,</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">Min =</span> <span class="fu">min</span>(column, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">Max =</span> <span class="fu">max</span>(column, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply the function to each column and bind the results into a single data frame</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>summary_df <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(data, summarize_column, <span class="at">.id =</span> <span class="st">"Column"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span> <span class="fu">format</span>(., <span class="at">scientific =</span> <span class="cn">FALSE</span>))) <span class="co"># Eliminates scientific notation</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Pretty print the mins and maxes of longform data_2</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(summary_df, <span class="at">format =</span> <span class="st">"html"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Column</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Type</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Min</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">id</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">13109</td>
</tr>
<tr class="even">
<td style="text-align: left;">MV_Total</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">75</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HOSPITAL LOS</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">4</td>
<td style="text-align: left;">9270</td>
</tr>
<tr class="even">
<td style="text-align: left;">ADMIT TO CONSULT</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">1172</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CONSULT TO TREAT</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">-405</td>
<td style="text-align: left;">3046</td>
</tr>
<tr class="even">
<td style="text-align: left;">ADMIT TO TREAT</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">-1</td>
<td style="text-align: left;">983</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TOTAL THERAPY VISITS</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">69</td>
</tr>
<tr class="even">
<td style="text-align: left;">Unit_LOS</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1811</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DAYS WITH THERAPY VISITS</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">33</td>
</tr>
<tr class="even">
<td style="text-align: left;">PERCENT OF DAYS WITH THERAPY VISITS</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">100</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AVG THERAPY LENGTH</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">-1970</td>
<td style="text-align: left;">2144</td>
</tr>
<tr class="even">
<td style="text-align: left;">MAX THERAPY LENGTH</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">-85</td>
<td style="text-align: left;">4744</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MIN THERAPY LENGTH</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">-6841</td>
<td style="text-align: left;">1253</td>
</tr>
<tr class="even">
<td style="text-align: left;">ACTUAL DAYS POST MICU</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">383</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PT or OT VISIT DAYS POST MICU</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">68</td>
</tr>
<tr class="even">
<td style="text-align: left;">PERCENT POST ICU DAYS THERAPY</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">100</td>
</tr>
</tbody>
</table>


</div>
</div>
<p><code>HOSPITAL LOS</code> has a range of 4 to 9270. Presumably this is in hours, so a range of 0.01 to 386.25 days in the hospital. I believe the variable we are actually interested in for MICU LOS is <code>UNIT LOS</code> however, so a range of 1 to1811 hours, or 0.41 to 75.46 days. (Just realized none of us asked for a data dictionary even though it was a room of ~20 stats master’s students 😅).</p>
<p>The researcher outlined the exclusion criteria of &lt; 2 days or &gt; 30 days in the MICU for her investigation. It looks like we will have to <a href="#Filtering">filter the data set</a> to match these criteria.</p>
<p><code>CONSULT TO TREAT</code> has a range of -405 to 3056. <code>ADMIT TO TREAT</code> has a range of -1 to 983. I think these variables are the time from consultation or admission until the time treatment for that patient began. Again, without a data dictionary I am unsure what to make of those negative values.</p>
<p>Importantly, <code>AVG, MAX, and MIN THERAPY LENGTH</code> all have negative values for the minimums. This doesn’t make any sense at face value, will have to investigate and circle back to the researchers for how this data was coded.</p>
<p>Some variables like <code>MV_Total</code> are in hours, and some like <code>DAYS WITH THERAPY VISITS</code> are in days. I don’t think we need to run any conversions, but this will be important to at least keep track of for interpretations.</p>
<p>Aside from that everything else looks coded properly.</p>
</section>
<section id="Filtering" class="level1">
<h1>Filter Data Set</h1>
<p>Let’s go ahead and filter the data set according to the experimenter’s exclusion criteria of &lt; 2 days or &gt; 30 days in the MICU so we are not unnecessarily investigating superfluous data in our continued examinations.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter data set based on researcher's exclusion criteria</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data[data<span class="sc">$</span>Unit_LOS <span class="sc">&gt;=</span> <span class="dv">48</span> <span class="sc">&amp;</span> data<span class="sc">$</span>Unit_LOS <span class="sc">&lt;=</span> <span class="dv">720</span>,]</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Check dimensions</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(data_ex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6430   25</code></pre>
</div>
</div>
<p>We now have a dataset of 6430 patients!</p>
</section>
<section id="univariate-distributions" class="level1">
<h1>Univariate Distributions</h1>
<p>Here we will explore the univariate distributions of our variables to assess data quality using histograms and qqplots.</p>
<section id="Outcome_Variables" class="level2">
<h2 class="anchored" data-anchor-id="Outcome_Variables">Outcome Variables</h2>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href="">Mechanical Ventilation</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href="">MICU Length of Stay</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false" href="">Hospital Length of Stay</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false" href="">Non-ICU Length of Stay</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-5" role="tab" aria-controls="tabset-1-5" aria-selected="false" href="">Discharge Location</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>First we will begin with mechanical ventilation time (MV)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"MV_Total"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: `aes_string()` was deprecated in ggplot2 3.0.0.
ℹ Please use tidy evaluation idioms with `aes()`.
ℹ See also `vignette("ggplot2-in-packages")` for more information.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_qq()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_qq_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>That’s some severe right skewness! Is that logarithmic? Let’s try and transform and see what happens.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform a log transform of mechanical ventilation time and plot</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>MV_Total_log <span class="ot">&lt;-</span> <span class="fu">log</span>(data_ex<span class="sc">$</span>MV_Total)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"MV_Total_log"</span>, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_qq()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_qq_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>That’s better. Maybe try a square root transformation?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform a sqrt transformation and plot</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>MV_Total_sqrt <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(data_ex<span class="sc">$</span>MV_Total)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"MV_Total_sqrt"</span>, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_qq()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_qq_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>That looks worse. Out of curiosity I’m going to try using the bestNormalize package I’ve been learning to see if it can recommend the best tranformation.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>BNobject <span class="ot">&lt;-</span> <span class="fu">bestNormalize</span>(data_ex<span class="sc">$</span>MV_Total)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: `progress_estimated()` was deprecated in dplyr 1.0.0.
ℹ The deprecated feature was likely used in the bestNormalize package.
  Please report the issue to the authors.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>BNobject</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Best Normalizing transformation with 3264 Observations
 Estimated Normality Statistics (Pearson P / df, lower =&gt; more normal):
 - arcsinh(x): 24.4737
 - Box-Cox: 24.668
 - Center+scale: 23.9788
 - Double Reversed Log_b(x+a): 27.3302
 - Exp(x): 344.996
 - Log_b(x+a): 24.4343
 - orderNorm (ORQ): 24.2547
 - sqrt(x + a): 24.3006
 - Yeo-Johnson: 24.7569
Estimation method: Out-of-sample via CV with 10 folds and 5 repeats
 
Based off these, bestNormalize chose:
center_scale(x) Transformation with 3264 nonmissing obs.
 Estimated statistics:
 - mean (before standardization) = 6.102022 
 - sd (before standardization) = 5.111536 </code></pre>
</div>
</div>
<p>The short explanation of how these values work is that the value closest to 1 is the best transformation, but these are all VERY far from one. So that didn’t help.</p>
<section id="boxplot" class="level4">
<h4 class="anchored" data-anchor-id="boxplot">Boxplot</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Create boxplot to assess for outliers</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">y =</span> MV_Total_log)) <span class="sc">+</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Boxplot of MV Total Log"</span>,</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"MV Total Log"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_boxplot()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>There are also no outliers for <code>MV_Total_Log!</code></p>
</section>
<section id="summary-1" class="level4">
<h4 class="anchored" data-anchor-id="summary-1">Summary</h4>
<p>It looks like the best option we have is a log transformation of <code>MV TOTAL</code>.</p>
<p>Alternatively, we will likely end up running a Poisson or Negative Binomial regression to handle this data.</p>
<p><a href="#Outcome_Variables">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"Unit_LOS"</span>, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>That’s super skewed as well! Let’s try a log transform.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform log transform of MICU LOS</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>Unit_LOS_log <span class="ot">&lt;-</span> <span class="fu">log</span>(data_ex<span class="sc">$</span>Unit_LOS)</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"Unit_LOS_log"</span>, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>We’ve got more of an S shape going there. I wonder if a BoxCox transformation is more appropriate?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(bestNormalize)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Use bestNormalize to try to find best transformation</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>BNobject <span class="ot">&lt;-</span> <span class="fu">bestNormalize</span>(data_ex<span class="sc">$</span>Unit_LOS)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>BNobject</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Best Normalizing transformation with 6430 Observations
 Estimated Normality Statistics (Pearson P / df, lower =&gt; more normal):
 - arcsinh(x): 8.8799
 - Box-Cox: 5.7117
 - Center+scale: 33.7306
 - Double Reversed Log_b(x+a): 57.1238
 - Log_b(x+a): 8.8956
 - orderNorm (ORQ): 1.3094
 - sqrt(x + a): 19.7458
 - Yeo-Johnson: 5.7313
Estimation method: Out-of-sample via CV with 10 folds and 5 repeats
 
Based off these, bestNormalize chose:
orderNorm Transformation with 6430 nonmissing obs and ties
 - 515 unique values 
 - Original quantiles:
    0%    25%    50%    75%   100% 
 48.00  66.00  95.00 166.75 720.00 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform boxcox transformation</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>Unit_LOS_boxcox <span class="ot">&lt;-</span> <span class="fu">boxcox</span>(data_ex<span class="sc">$</span>Unit_LOS)<span class="sc">$</span>x.t</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"Unit_LOS_boxcox"</span>, <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create boxplot to assess for outliers</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">y =</span> Unit_LOS_boxcox)) <span class="sc">+</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>There are no outliers for boxcox Unit LOS.</p>
<p>That histogram looks better at least, and we don’t have any outliers. The bestNormalize package offers ways to back transform after you run your analysis, but I haven’t gotten that far in learning it yet. It looks like a boxcox transformation is a candidate however.</p>
<section id="summary-2" class="level4">
<h4 class="anchored" data-anchor-id="summary-2">Summary</h4>
<p>Will come back to this. I think there is a specific link function we use in this situation when we have an s-shaped qq plot like that.</p>
<p><a href="#Outcome_Variables">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`HOSPITAL LOS`"</span>, <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><code>Hospital LOS</code> also looks logarithmic.</p>
<p>Let’s transform and assess.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform log transform </span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>HOSPITAL_LOS_log <span class="ot">&lt;-</span> <span class="fu">log</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">HOSPITAL LOS</span><span class="st">`</span>)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"HOSPITAL_LOS_log"</span>, <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">y =</span> HOSPITAL_LOS_log)) <span class="sc">+</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-20-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Looks good! There are a handful of outliers in there, but the data looks normal and those values will likely be included.</p>
<section id="summary-3" class="level4">
<h4 class="anchored" data-anchor-id="summary-3">Summary</h4>
<p><code>HOSPITAL LOS</code> is normal after a log transform. We will either perform that or a Poisson or Negative Binomial <a href="#Outcome_Variables">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<p>We must compute <code>NON_ICU_LOS</code> by subtracting <code>Unit_LOS</code> from <code>HOSPITAL LOS</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute variable for non icu LOS.</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">NON_ICU_LOS =</span> <span class="st">`</span><span class="at">HOSPITAL LOS</span><span class="st">`</span> <span class="sc">-</span> Unit_LOS)</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"NON_ICU_LOS"</span>, <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>As expected, that looks exponential.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform log transform</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>NON_ICU_LOS_log <span class="ot">&lt;-</span> <span class="fu">log</span>(data_ex<span class="sc">$</span>NON_ICU_LOS)</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"NON_ICU_LOS_log"</span>, <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 106 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 106 rows containing non-finite outside the scale range
(`stat_qq()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 106 rows containing non-finite outside the scale range
(`stat_qq_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>That’s bimodal. Odd.</p>
<p>Let’s try a square root transform</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform log transform</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>NON_ICU_LOS_sqrt <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(data_ex<span class="sc">$</span>NON_ICU_LOS)</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"NON_ICU_LOS_sqrt"</span>, <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Looks crummy.</p>
<p>Let’s try bestNormalize</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>BNobject <span class="ot">&lt;-</span> <span class="fu">bestNormalize</span>(data_ex<span class="sc">$</span>NON_ICU_LOS)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>BNobject</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Best Normalizing transformation with 6430 Observations
 Estimated Normality Statistics (Pearson P / df, lower =&gt; more normal):
 - arcsinh(x): 7.2295
 - Center+scale: 51.0473
 - Double Reversed Log_b(x+a): 56.8403
 - Log_b(x+a): 8.8643
 - orderNorm (ORQ): 1.7606
 - sqrt(x + a): 10.5054
 - Yeo-Johnson: 5.5589
Estimation method: Out-of-sample via CV with 10 folds and 5 repeats
 
Based off these, bestNormalize chose:
orderNorm Transformation with 6430 nonmissing obs and ties
 - 1045 unique values 
 - Original quantiles:
    0%    25%    50%    75%   100% 
   0.0   32.0  110.5  284.0 9206.0 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform boxcox transformation</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>NON_ICU_LOS_yeo <span class="ot">&lt;-</span> <span class="fu">yeojohnson</span>(data_ex<span class="sc">$</span>NON_ICU_LOS)<span class="sc">$</span>x.t</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"NON_ICU_LOS_yeo"</span>, <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Looks better! Still bimodal but much more normal.</p>
<section id="summary-4" class="level4">
<h4 class="anchored" data-anchor-id="summary-4">Summary</h4>
<p>Looks like Yeo-Johnson transformation may be the way to go.</p>
<p><a href="#Outcome_Variables">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-1-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-5-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine discharge locations</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">table</span>(data_ex<span class="sc">$</span>DISCH_DISP))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Var1</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Freq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Acute IP to RPCU</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">Administrative Discharge</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Admitted as an Inpatient</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">Against Clinical Advice</td>
<td style="text-align: right;">22</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Another Health Care Institution Not Defined w/Planned Readmission</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Court/Law Enforcement</td>
<td style="text-align: right;">22</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Discharge Lounge</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">Discharged to Other Facility</td>
<td style="text-align: right;">23</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Discharged/transferred to a Designated Cancer Center or Children’s Hospital</td>
<td style="text-align: right;">41</td>
</tr>
<tr class="even">
<td style="text-align: left;">Drug/Alch Detox D/C</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expired</td>
<td style="text-align: right;">1137</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expired in Medical Facility</td>
<td style="text-align: right;">8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expired Readmit as Organ Donor</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="even">
<td style="text-align: left;">Federal Hospital</td>
<td style="text-align: right;">43</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Home-Health Care Svc</td>
<td style="text-align: right;">759</td>
</tr>
<tr class="even">
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: right;">2417</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Home or Self Care w/Planned Readmission</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Hospice/Home</td>
<td style="text-align: right;">213</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Hospice/Medical Facility</td>
<td style="text-align: right;">211</td>
</tr>
<tr class="even">
<td style="text-align: left;">Intermediate Care Facility</td>
<td style="text-align: right;">14</td>
</tr>
<tr class="odd">
<td style="text-align: left;">IV Therapy Provider</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Left Against Medical Advice</td>
<td style="text-align: right;">49</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Long Term Care</td>
<td style="text-align: right;">451</td>
</tr>
<tr class="even">
<td style="text-align: left;">Mental Health Facility</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Nursing Facility</td>
<td style="text-align: right;">37</td>
</tr>
<tr class="even">
<td style="text-align: left;">Psychiatric Hospital</td>
<td style="text-align: right;">34</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Rehab Facility</td>
<td style="text-align: right;">249</td>
</tr>
<tr class="even">
<td style="text-align: left;">Short Term Hospital</td>
<td style="text-align: right;">71</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Skilled Nursing Facility</td>
<td style="text-align: right;">596</td>
</tr>
<tr class="even">
<td style="text-align: left;">Swing Bed</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TRANSFER TO CANCER OR CHILDRENS</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>There are a few options we have for to analyze discharge location.</p>
<ul>
<li>We can spit on expired vs not expired</li>
<li>We can split on hom vs other</li>
<li>We can just look at all the groups with the largest N, and collapse the rest into a single variable of ‘other’. This would be
<ul>
<li>Expired (1137), Home (3177), Hospice (424), long term care (451), rehab (249), skilled Nursing facility (596)</li>
</ul></li>
</ul>
<p>We will have to ask the researcher how she wants to group up these discharge locations! Keeping in mind that since we are looking at three different time periods, each group will essentially by a third of what is shown here.</p>
</div>
</div>
</div>
</section>
</section>
<section id="Clean" class="level1">
<h1>Data Cleaning</h1>
<p>Here we will go one by one through our potential covariates and make sure they are all properly coded and there are no erroenous values.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true" href="">ICD10 Code</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false" href="">Department Before MICU</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-3" role="tab" aria-controls="tabset-3-3" aria-selected="false" href="">Department after MICU</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-4" role="tab" aria-controls="tabset-3-4" aria-selected="false" href="">Admit to Consult</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-5" role="tab" aria-controls="tabset-3-5" aria-selected="false" href="">Consult to Treat</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-6-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-6" role="tab" aria-controls="tabset-3-6" aria-selected="false" href="">Admit to Treat</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-7-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-7" role="tab" aria-controls="tabset-3-7" aria-selected="false" href="">Total Therapy Visits</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-8-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-8" role="tab" aria-controls="tabset-3-8" aria-selected="false" href="">Days with Therapy Visits</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-9-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-9" role="tab" aria-controls="tabset-3-9" aria-selected="false" href=""></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-10-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-10" role="tab" aria-controls="tabset-3-10" aria-selected="false" href="">Therapy Length</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-11-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-11" role="tab" aria-controls="tabset-3-11" aria-selected="false" href="">Days Post MICU</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-12-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-12" role="tab" aria-controls="tabset-3-12" aria-selected="false" href="">Post MICU PT or OT Visits</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-13-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-13" role="tab" aria-controls="tabset-3-13" aria-selected="false" href="">Post ICU Days with Therapy</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-14-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-14" role="tab" aria-controls="tabset-3-14" aria-selected="false" href="">Age</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-15-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-15" role="tab" aria-controls="tabset-3-15" aria-selected="false" href="">Age Quartile</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-16-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-16" role="tab" aria-controls="tabset-3-16" aria-selected="false" href="">Admit Date</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<p>Note: <code>PROBLEM LIST DX CODES</code> and <code>PROBLEM LIST DX CODES</code> have 100’s of levels comprising sundry diagnoses.</p>
<p>Without a direction for the specific use of these variables we can’t do much with them, so they will likely be excluded from the final analysis.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get counts</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">table</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">DEPT BEFORE Unit</span><span class="st">`</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Var1</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Freq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">AMC ACE UNIT</td>
<td style="text-align: right;">79</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC ADMISSION TRN UNIT</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC AIP OR</td>
<td style="text-align: right;">60</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC AIP PACU</td>
<td style="text-align: right;">59</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC AIP PACU HOLD INPT</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC AIP PERIOP SVC</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC AIP PRE-OP</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC AOP OR</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC AOP PACU</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC BMT/ONC UNIT</td>
<td style="text-align: right;">232</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC BRONCH LAB</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC BURN ICU</td>
<td style="text-align: right;">82</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC CARD CATH LAB</td>
<td style="text-align: right;">15</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC CARD EP LAB</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC CARD MED UNIT</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC CARD POSTPROC UNIT</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC CARD PRE/POST PROC</td>
<td style="text-align: right;">22</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC CARDIOTHORACIC ICU</td>
<td style="text-align: right;">56</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC CC SURGE UNIT</td>
<td style="text-align: right;">20</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC CICU</td>
<td style="text-align: right;">39</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC CRITICAL CARE ANNX</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC CTRC UNIT</td>
<td style="text-align: right;">14</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC DIALYSIS UNIT</td>
<td style="text-align: right;">10</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC EMERGENCY</td>
<td style="text-align: right;">2962</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC GI PRE/POST</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC INTRNL MED UNIT</td>
<td style="text-align: right;">30</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC IR</td>
<td style="text-align: right;">95</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC LABOR AND DELIVERY</td>
<td style="text-align: right;">10</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC M/S PROG CARE UNIT</td>
<td style="text-align: right;">887</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC MED HLTH SVC UNIT</td>
<td style="text-align: right;">39</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC MED SPEC UNIT</td>
<td style="text-align: right;">284</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC MED SURG UNIT</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC MED/GYN/ONC UNIT</td>
<td style="text-align: right;">131</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC MEDICAL ICU</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC MOTHER BABY UNIT</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC NEONATAL ICU</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC NEURO ICU</td>
<td style="text-align: right;">96</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC NEUROSCIENCES UNIT</td>
<td style="text-align: right;">68</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC ORTHO UNIT</td>
<td style="text-align: right;">34</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC PULM UNIT</td>
<td style="text-align: right;">179</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC SURG SPEC UNIT</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC SURG TRAUMA ICU</td>
<td style="text-align: right;">52</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC SURGICAL ICU</td>
<td style="text-align: right;">57</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC SURGICAL UNIT</td>
<td style="text-align: right;">12</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC THRU UNIT</td>
<td style="text-align: right;">15</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC TRANSPLANT HEP</td>
<td style="text-align: right;">10</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC TRANSPLANT UNIT</td>
<td style="text-align: right;">55</td>
</tr>
<tr class="even">
<td style="text-align: left;">CARDIOLOGY UNIT</td>
<td style="text-align: right;">67</td>
</tr>
<tr class="odd">
<td style="text-align: left;">EXPRESS ADMIT UNIT</td>
<td style="text-align: right;">18</td>
</tr>
<tr class="even">
<td style="text-align: left;">GREENVAL ED</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HEM/ONC UNIT</td>
<td style="text-align: right;">27</td>
</tr>
<tr class="even">
<td style="text-align: left;">INTERNAL MEDICINE UNIT</td>
<td style="text-align: right;">26</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MED SURGE HOLDING UNIT</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">MISSIPPI ED</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">OLD AMC CARD ICU</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="even">
<td style="text-align: left;">PRE-ADMISSION</td>
<td style="text-align: right;">389</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>I lack the clinical knowledge to make use of this variable.</p>
<p>It will likely not be used in the final analysis.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-3-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get counts</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">table</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">DEPT AFTER Unit</span><span class="st">`</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Var1</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Freq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">AMC ACE UNIT</td>
<td style="text-align: right;">323</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC AIP OR</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC AIP SUITES UNIT</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC BMT/ONC UNIT</td>
<td style="text-align: right;">253</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC BURN ICU</td>
<td style="text-align: right;">17</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC CARD MED UNIT</td>
<td style="text-align: right;">57</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC CARDIOTHORACIC ICU</td>
<td style="text-align: right;">23</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC CC SURGE UNIT</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC CICU</td>
<td style="text-align: right;">23</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC CRITICAL CARE ANNX</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC DIALYSIS PRE-DISCH</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC DIALYSIS UNIT</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC INTRNL MED UNIT</td>
<td style="text-align: right;">134</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC IR</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC LABOR AND DELIVERY</td>
<td style="text-align: right;">13</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC M/S PROG CARE UNIT</td>
<td style="text-align: right;">991</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC MED HLTH SVC UNIT</td>
<td style="text-align: right;">203</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC MED SPEC UNIT</td>
<td style="text-align: right;">906</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC MED SURG UNIT</td>
<td style="text-align: right;">27</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC MED/GYN/ONC UNIT</td>
<td style="text-align: right;">264</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC MEDICAL ICU</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC NEURO ICU</td>
<td style="text-align: right;">26</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC NEUROSCIENCES UNIT</td>
<td style="text-align: right;">133</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC ORTHO UNIT</td>
<td style="text-align: right;">51</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC PULM UNIT</td>
<td style="text-align: right;">522</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC SURG SPEC UNIT</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC SURG TRAUMA ICU</td>
<td style="text-align: right;">30</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC SURGICAL ICU</td>
<td style="text-align: right;">40</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC SURGICAL UNIT</td>
<td style="text-align: right;">36</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC SURGICALSURGE UNIT</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC THRU UNIT</td>
<td style="text-align: right;">38</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC TRANSPLANT HEP</td>
<td style="text-align: right;">19</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC TRANSPLANT UNIT</td>
<td style="text-align: right;">108</td>
</tr>
<tr class="even">
<td style="text-align: left;">CARDIOLOGY UNIT</td>
<td style="text-align: right;">134</td>
</tr>
<tr class="odd">
<td style="text-align: left;">EXPRESS ADMIT UNIT</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">INTERNAL MEDICINE UNIT</td>
<td style="text-align: right;">113</td>
</tr>
<tr class="odd">
<td style="text-align: left;">OLD AMC CARD ICU</td>
<td style="text-align: right;">27</td>
</tr>
<tr class="even">
<td style="text-align: left;">POST-DISCHARGE</td>
<td style="text-align: right;">1880</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Similarly, I lack the clinical knowledge to make use of this variable without a specific direction from the researcher. It will likely be excluded in this analysis.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-3-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`ADMIT TO CONSULT`"</span>, <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 862 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 862 rows containing non-finite outside the scale range
(`stat_qq()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 862 rows containing non-finite outside the scale range
(`stat_qq_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Try a log transform.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform log transform</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>ADMIT_TO_CONSULT_log <span class="ot">&lt;-</span> <span class="fu">log</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">ADMIT TO CONSULT</span><span class="st">`</span>)</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"ADMIT_TO_CONSULT_log"</span>, <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 4021 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 4021 rows containing non-finite outside the scale range
(`stat_qq()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 4021 rows containing non-finite outside the scale range
(`stat_qq_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This looks incredibly messy to use. And has 23% missing values. We will likely exclude.</p>
<p>Could we convert it to a binary variable of whether the patient received a consult or not?</p>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-3-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-5-tab">
<p><code>CONSULT TO TREAT</code> contained negative values. Let’s explore</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram for time from consult to treatment</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">CONSULT TO TREAT</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Looks like we have a lot of values extending below 0, so it’s not just some mis-entered data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort by time from consult to treatment</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>sorted_data <span class="ot">&lt;-</span> data_ex <span class="sc">%&gt;%</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="st">`</span><span class="at">CONSULT TO TREAT</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, <span class="st">`</span><span class="at">CONSULT TO TREAT</span><span class="st">`</span>)</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Pretty print table</span></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">head</span>(sorted_data))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">CONSULT TO TREAT</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">10440</td>
<td style="text-align: right;">-405</td>
</tr>
<tr class="even">
<td style="text-align: right;">11514</td>
<td style="text-align: right;">-385</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7006</td>
<td style="text-align: right;">-189</td>
</tr>
<tr class="even">
<td style="text-align: right;">9262</td>
<td style="text-align: right;">-166</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11502</td>
<td style="text-align: right;">-143</td>
</tr>
<tr class="even">
<td style="text-align: right;">11474</td>
<td style="text-align: right;">-118</td>
</tr>
</tbody>
</table>


</div>
</div>
<p><code>CONSULT TO TREAT</code> looks coded correctly. I believe it just has an event at timepoint zero, most likely admit.</p>
<section id="summary-5" class="level4">
<h4 class="anchored" data-anchor-id="summary-5">Summary</h4>
<p><code>CONSULT TO TREAT</code> is coded correctly. However it has 56% missing values and will thus not be used.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-3-6" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-6-tab">
<p>The -1 value we saw as the min for <code>ADMIT TO TREAT</code> makes me suspicious that’s how missing data was coded for this variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram for time from admit to treatment</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The histogram shows there were very few patients with a value of -1.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort by time from admit to treatment</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>sorted_data <span class="ot">&lt;-</span> data_ex <span class="sc">%&gt;%</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, <span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span>)</span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Pretty print table</span></span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(sorted_data), <span class="at">format =</span> <span class="st">"html"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"condensed"</span>, <span class="st">"hover"</span>, <span class="st">"striped"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-condensed table-hover table-striped caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ADMIT TO TREAT</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">8941</td>
<td style="text-align: right;">-1</td>
</tr>
<tr class="even">
<td style="text-align: right;">9949</td>
<td style="text-align: right;">-1</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11126</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">37</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1275</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: right;">3579</td>
<td style="text-align: right;">2</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>There were only 2 patients with an admit to treatment time of -1, and 1 patient with a value of 0. Will have to double check with the experimenters but this looks believable.</p>
<section id="summary-6" class="level4">
<h4 class="anchored" data-anchor-id="summary-6">Summary</h4>
<p>There are two patients with a -1 time to admit.</p>
<p>However, <code>ADMIT TO TREAT</code> has 55% missing values and will thus not be included in the final analysis.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-3-7" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-7-tab">
<p><code>TOTAL THERAPY VISITS</code> is a promising covariate.</p>
<p>Those who had more therapy days could have a quicker recovery if physical therapy improves patient condition.</p>
<p>Or alternatively, more therapy days could be indicative of worse physical health, and could potentially increase the outcome variables of total MV time and MICU LOS.</p>
<p>Either way it is prudent to account for it in the model.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`TOTAL THERAPY VISITS`"</span>, <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Let’s try a log transform.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform log transform of average therapy length</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>TOTAL_THERAPY_VISITS_log <span class="ot">&lt;-</span> <span class="fu">log</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">TOTAL THERAPY VISITS</span><span class="st">`</span>)</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"TOTAL_THERAPY_VISITS_log"</span>, <span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2324 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2324 rows containing non-finite outside the scale range
(`stat_qq()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2324 rows containing non-finite outside the scale range
(`stat_qq_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><a href="#Clean">Top of Tabset</a></p>
<section id="summary-7" class="level4">
<h4 class="anchored" data-anchor-id="summary-7">Summary</h4>
<p><code>TOTAL THERAPY VISITS</code> appears to have a logarithmic distribution. Poisson regression should take care of this</p>
</section>
</div>
<div id="tabset-3-8" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-8-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`DAYS WITH THERAPY VISITS`"</span>, <span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-37-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><code>DAYS WITH THERAPY VISITS</code> appears to be coded correctly. Poisson regression will handle the distribution.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-3-9" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-9-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`PERCENT OF DAYS WITH THERAPY VISITS`"</span>, <span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Interesting, there was a lot of patients with either 0 or 100% of their days including physical therapy.</p>
<p>This could be a good covariate to include in the final model.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-3-10" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-10-tab">
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true" href="">Negative Therapy Length</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false" href="">Average Therapy Length</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false" href="">Max Therapy Length</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-4" role="tab" aria-controls="tabset-2-4" aria-selected="false" href="">Min Therapy Length</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<p>We saw earlier that average, min, and max therapy length had negative values for their minimum, which does not make sense. Let’s investigate.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`AVG THERAPY LENGTH`"</span>, <span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Ah, we can see that we have a one incredibly low and negative values, and some incredibly high values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a table to checkout our frequencies for low and high values</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
-1424     0     4     5     6     7     8     9    10    11    12    13    14 
    1  2374     1     9     4     4    12    13    53    17    38    29    31 
   15    16    17    18    19    20    21    22    23    24    25    26    27 
  117    48    60    43    59   168    89    78   107    88   213   127   117 
   28    29    30    31    32    33    34    35    36    37    38    39    40 
  113   114   174   127   122   102   111   129    92   110    85    82   141 
   41    42    43    44    45    46    47    48    49    50    51    52    53 
   78    79    71    77    80    60    56    42    58    48    23    28    37 
   54    55    56    57    58    59    60    61    62    63    64    65    66 
   34    35    21    15    18    16    23    12    12     5    13    10     5 
   67    68    69    70    71    72    73    74    75    76    77    81    83 
    4     6     5     8    10     4     3     5     5     2     1     1     1 
   85    86    90    93    97   362   617   644  1001  1043  1506  2093  2144 
    2     3     2     1     1     1     1     1     1     1     1     1     1 </code></pre>
</div>
</div>
<p>We have 1 patient with a -1424 average length in therapy that is most likely an erroneous entry, and some patients with very high times in therapy.</p>
<p>I wonder who that patient is that is so advanced they’ve spent negative time in therapy.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Investigate patient with negative therapy lengths</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>negative <span class="ot">&lt;-</span> data_ex[data_ex<span class="sc">$</span><span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span> <span class="sc">==</span> <span class="sc">-</span><span class="dv">1424</span>,] <span class="sc">%&gt;%</span> </span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, <span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span>, <span class="st">`</span><span class="at">MIN THERAPY LENGTH</span><span class="st">`</span>, <span class="st">`</span><span class="at">MAX THERAPY LENGTH</span><span class="st">`</span>)</span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Pretty Print</span></span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(negative, <span class="at">format =</span> <span class="st">"html"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"condensed"</span>, <span class="st">"hover"</span>, <span class="st">"striped"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-condensed table-hover table-striped caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">AVG THERAPY LENGTH</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MIN THERAPY LENGTH</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MAX THERAPY LENGTH</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">10462</td>
<td style="text-align: right;">-1424</td>
<td style="text-align: right;">-2726</td>
<td style="text-align: right;">-85</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Aha! This patient has negative values for all therapy lengths.</p>
<p>Let’s see if they are the only one that has negative values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">MIN THERAPY LENGTH</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
-2726     0     3     4     5     6     7     8     9    10    11    12    13 
    1  2376     6     4    41    20    26    78    57   234    67    83    67 
   14    15    16    17    18    19    20    21    22    23    24    25    26 
   94   275    81    60    94    70   230    75    39   178   144   271   115 
   27    28    29    30    31    32    33    34    35    36    37    38    39 
   90    84    86   206    77    75    70    63    70    46    43    61    53 
   40    41    42    43    44    45    46    47    48    49    50    51    52 
  100    38    34    36    34    37    22    26    20    22    29    17     8 
   53    54    55    56    57    58    59    60    61    62    63    64    65 
   17    18    29     9    11     9    13    12     5     8     4     5     8 
   66    67    68    69    70    71    72    73    74    75    76    77    81 
    1     5     2     2     6     6     3     2     4     4     2     1     2 
   83    85    86    90    93    97  1204  1253 
    1     1     2     1     1     1     1     1 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">MAX THERAPY LENGTH</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 -85    0    4    5    6    7    8    9   10   11   12   13   14   15   16   17 
   1 2374    1    8    4    5   10   13   50   14   19   15   22  124   34   20 
  18   19   20   21   22   23   24   25   26   27   28   29   30   31   32   33 
  27   38  153   39   18   73   58  197   64   67   72   62  210   74   68   59 
  34   35   36   37   38   39   40   41   42   43   44   45   46   47   48   49 
  61  106   63   60   98   92  158   79   82   62   61   98   58   58   53   46 
  50   51   52   53   54   55   56   57   58   59   60   61   62   63   64   65 
  81   36   31   70   79   91   57   48   47   44   66   46   28   31   23   25 
  66   67   68   69   70   71   72   73   74   75   76   77   78   79   80   81 
  16   15   35   25   42   17   19   14   22   16   16   10    9    8    9    5 
  82   83   84   85   86   87   88   89   90   91   92   93   94   95   96   97 
   4    7   10   13   10    5    3    6    9    4    7    7    2    3    1    3 
  98   99  100  101  102  103  104  105  107  109  110  117  140 1034 1540 1725 
   1    2    1    2    2    1    1    3    1    1    2    1    1    1    1    1 
2963 3035 3067 3119 4248 
   1    1    1    1    1 </code></pre>
</div>
</div>
<p>They are! What probably happened here was their minimum is actually 85, and their max is actually 2726, and those got reversed into negatives somehow. Similarly, their average should be 1424.</p>
<p>We’ll double check with the investigator, but for now let’s just delete this patient and re run the histogram and qqplot.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove negative patient</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">%&gt;%</span> <span class="fu">filter</span>(data_ex<span class="sc">$</span>id <span class="sc">!=</span> <span class="dv">10462</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`AVG THERAPY LENGTH`"</span>, <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-44-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>We may have some outliers that spent very long in therapy</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine potential outliers</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(<span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, <span class="st">`</span><span class="at">MIN THERAPY LENGTH</span><span class="st">`</span>, <span class="st">`</span><span class="at">MAX THERAPY LENGTH</span><span class="st">`</span>, <span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span>) <span class="sc">|&gt;</span></span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n=</span><span class="dv">10</span>) <span class="sc">|&gt;</span> </span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pretty_print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MIN THERAPY LENGTH</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MAX THERAPY LENGTH</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">AVG THERAPY LENGTH</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">178</td>
<td style="text-align: right;">1253</td>
<td style="text-align: right;">3035</td>
<td style="text-align: right;">2144</td>
</tr>
<tr class="even">
<td style="text-align: right;">12985</td>
<td style="text-align: right;">1204</td>
<td style="text-align: right;">4248</td>
<td style="text-align: right;">2093</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3230</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">2963</td>
<td style="text-align: right;">1506</td>
</tr>
<tr class="even">
<td style="text-align: right;">2942</td>
<td style="text-align: right;">32</td>
<td style="text-align: right;">1540</td>
<td style="text-align: right;">1043</td>
</tr>
<tr class="odd">
<td style="text-align: right;">12803</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">3119</td>
<td style="text-align: right;">1001</td>
</tr>
<tr class="even">
<td style="text-align: right;">12640</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">3067</td>
<td style="text-align: right;">644</td>
</tr>
<tr class="odd">
<td style="text-align: right;">6661</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">1725</td>
<td style="text-align: right;">617</td>
</tr>
<tr class="even">
<td style="text-align: right;">10917</td>
<td style="text-align: right;">26</td>
<td style="text-align: right;">1034</td>
<td style="text-align: right;">362</td>
</tr>
<tr class="odd">
<td style="text-align: right;">8071</td>
<td style="text-align: right;">97</td>
<td style="text-align: right;">97</td>
<td style="text-align: right;">97</td>
</tr>
<tr class="even">
<td style="text-align: right;">7733</td>
<td style="text-align: right;">93</td>
<td style="text-align: right;">93</td>
<td style="text-align: right;">93</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Success! That is not a logarithmic relationship, that’s just 8 patients who had an extremely long stay in therapy.</p>
<p>Let’s remove them.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter out outlier patients</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>id <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">178</span>, <span class="dv">12985</span>, <span class="dv">3230</span>, <span class="dv">2942</span>, <span class="dv">12803</span>, <span class="dv">12640</span>, <span class="dv">6661</span>, <span class="dv">10917</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>and re-plot</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`AVG THERAPY LENGTH`"</span>, <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-47-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>That’s a normal distribution with a preponderance of patients who did not have physical therapy.</p>
<section id="received-pt-variable-creation" class="level4">
<h4 class="anchored" data-anchor-id="received-pt-variable-creation">Received PT Variable Creation</h4>
<p>Let’s create a dummy variable for whether patients received PT or not.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create variable for reception of PT</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">PT_YESNO =</span> <span class="fu">ifelse</span>(<span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span> <span class="sc">==</span> <span class="dv">0</span>, <span class="dv">0</span>,<span class="dv">1</span>))</span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Double check calculations</span></span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span>, <span class="st">`</span><span class="at">DAYS WITH THERAPY VISITS</span><span class="st">`</span>, PT_YESNO) <span class="sc">|&gt;</span> </span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">|&gt;</span> </span>
<span id="cb87-9"><a href="#cb87-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pretty_print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">AVG THERAPY LENGTH</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">DAYS WITH THERAPY VISITS</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">PT_YESNO</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">27</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: right;">17</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: right;">25</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Looks good, not we can answer one of their research questions of whether PT enrollment increased after the intervention.</p>
</section>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`MAX THERAPY LENGTH`"</span>, <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-49-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Max therapy appears mostly normally distributed, not including the patients that did not receive PT.</p>
<p>The highest patient has a max length of 140, and the next highest has a max stay of ~100. Not drastic enough to call that patient an outlier.</p>
<section id="summary-8" class="level4">
<h4 class="anchored" data-anchor-id="summary-8">Summary</h4>
<p><code>MAX THERAPY LENGTH</code> appears normally distributed for those that received PT.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-2-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`MIN THERAPY LENGTH`"</span>, <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-50-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="summary-9" class="level4">
<h4 class="anchored" data-anchor-id="summary-9">Summary</h4>
<p><code>MIN THERAPY LENGTH</code> appears mostly normal for thos who received it.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</section>
</div>
</div>
</div>
</div>
<div id="tabset-3-11" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-11-tab">
<p>This variable represents the number of days a patient has spent in a standard hospital unit after being discharged from the Medical Intensive Care Unit (MICU).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`ACTUAL DAYS POST MICU`"</span>, <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-51-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>It appears logarithmic.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Log transform variable</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ACTUAL_DAYS_POST_MICU_log =</span> <span class="fu">log</span>(<span class="st">`</span><span class="at">ACTUAL DAYS POST MICU</span><span class="st">`</span>))</span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"ACTUAL_DAYS_POST_MICU_log"</span>, <span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1987 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1987 rows containing non-finite outside the scale range
(`stat_qq()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1987 rows containing non-finite outside the scale range
(`stat_qq_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-52-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>That appears normally distributed now!</p>
<section id="summary-10" class="level4">
<h4 class="anchored" data-anchor-id="summary-10">Summary</h4>
<p>Days post MICU is normal after log transforming.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-3-12" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-12-tab">
<p>This variable represents the number of days that patients have been visited by physical therapists (PT) or occupational therapists (OT) after being discharged from the Medical Intensive Care Unit (MICU). It captures the extent of post-ICU rehabilitation services provided to patients and can be important for understanding recovery trajectories.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`PT or OT VISIT DAYS POST MICU`"</span>, <span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-53-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This variable is important for our analysis as it will not effect our outcome variables.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-3-13" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-13-tab">
<p>This variable is the percentage of days after a patient is discharged from the Intensive Care Unit (ICU) during which they received therapy, such as physical therapy (PT) or occupational therapy (OT).</p>
<p>This variable is likely not important as it will not effect our outcome variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`PERCENT POST ICU DAYS THERAPY`"</span>, <span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-54-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-3-14" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-14-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine counts</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">table</span>(data_ex<span class="sc">$</span>Age_Range))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Var1</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Freq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">18-39</td>
<td style="text-align: right;">1121</td>
</tr>
<tr class="even">
<td style="text-align: left;">40-49</td>
<td style="text-align: right;">898</td>
</tr>
<tr class="odd">
<td style="text-align: left;">50-59</td>
<td style="text-align: right;">1490</td>
</tr>
<tr class="even">
<td style="text-align: left;">60-69</td>
<td style="text-align: right;">1570</td>
</tr>
<tr class="odd">
<td style="text-align: left;">70+</td>
<td style="text-align: right;">1326</td>
</tr>
<tr class="even">
<td style="text-align: left;">Negative Age</td>
<td style="text-align: right;">16</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>That’s curious, what does “Negative Age” mean?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine negative age</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Age_Range <span class="sc">==</span> <span class="st">"Negative Age"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pretty_print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">SEX</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MV_Total</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">HOSPITAL LOS</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">PROBLEM LIST DX CODES</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">PROBLEM LIST DX NAMES</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">DISCH_DISP</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">DEPT BEFORE Unit</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">DEPT AFTER Unit</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ADMIT TO CONSULT</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">CONSULT TO TREAT</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ADMIT TO TREAT</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">TOTAL THERAPY VISITS</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Unit_LOS</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">DAYS WITH THERAPY VISITS</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">PERCENT OF DAYS WITH THERAPY VISITS</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">AVG THERAPY LENGTH</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MAX THERAPY LENGTH</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MIN THERAPY LENGTH</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ACTUAL DAYS POST MICU</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">PT or OT VISIT DAYS POST MICU</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">PERCENT POST ICU DAYS THERAPY</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Age_Range</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Admit_MonthYear</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Age_Quartile</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MV_Total_log</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MV_Total_sqrt</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Unit_LOS_log</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Unit_LOS_boxcox</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">HOSPITAL_LOS_log</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">NON_ICU_LOS</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">NON_ICU_LOS_log</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">NON_ICU_LOS_sqrt</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">NON_ICU_LOS_yeo</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ADMIT_TO_CONSULT_log</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">TOTAL_THERAPY_VISITS_log</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">PT_YESNO</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ACTUAL_DAYS_POST_MICU_log</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1394</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">139</td>
<td style="text-align: left;">292.81, 296.80, 314.0</td>
<td style="text-align: left;">ADHD (attention deficit hypera</td>
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: left;">AMC EMERGENCY</td>
<td style="text-align: left;">AMC MED SPEC UNIT</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">69</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2012-08</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">4.234107</td>
<td style="text-align: right;">-0.7051618</td>
<td style="text-align: right;">4.934474</td>
<td style="text-align: right;">70</td>
<td style="text-align: right;">4.248495</td>
<td style="text-align: right;">8.366600</td>
<td style="text-align: right;">-0.2238447</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.6931472</td>
</tr>
<tr class="even">
<td style="text-align: right;">2815</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">415</td>
<td style="text-align: left;">289.81, 289.84, 453.0</td>
<td style="text-align: left;">Antiphospholipid antibody synd</td>
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: left;">AMC IR</td>
<td style="text-align: left;">AMC MED SPEC UNIT</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">93</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2013-07</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">4.532599</td>
<td style="text-align: right;">-0.0930421</td>
<td style="text-align: right;">6.028278</td>
<td style="text-align: right;">322</td>
<td style="text-align: right;">5.774552</td>
<td style="text-align: right;">17.944358</td>
<td style="text-align: right;">0.7775375</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2.5649494</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4090</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">150</td>
<td style="text-align: left;">490, 949.0</td>
<td style="text-align: left;">Bronchitis, Burn</td>
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: left;">AMC BURN ICU</td>
<td style="text-align: left;">AMC BURN ICU</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">64</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2014-03</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">4.158883</td>
<td style="text-align: right;">-0.8784051</td>
<td style="text-align: right;">5.010635</td>
<td style="text-align: right;">86</td>
<td style="text-align: right;">4.454347</td>
<td style="text-align: right;">9.273618</td>
<td style="text-align: right;">-0.1023457</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.6931472</td>
</tr>
<tr class="even">
<td style="text-align: right;">4282</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">195</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: left;">AMC IR</td>
<td style="text-align: left;">POST-DISCHARGE</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">190</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2014-05</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">5.247024</td>
<td style="text-align: right;">0.9800589</td>
<td style="text-align: right;">5.273000</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">1.609438</td>
<td style="text-align: right;">2.236068</td>
<td style="text-align: right;">-1.4396935</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">-Inf</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4800</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">365</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Home-Health Care Svc</td>
<td style="text-align: left;">AMC CARDIOTHORACIC ICU</td>
<td style="text-align: left;">AMC M/S PROG CARE UNIT</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2014-08</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">3.912023</td>
<td style="text-align: right;">-1.5080575</td>
<td style="text-align: right;">5.899897</td>
<td style="text-align: right;">315</td>
<td style="text-align: right;">5.752573</td>
<td style="text-align: right;">17.748239</td>
<td style="text-align: right;">0.7613753</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.7917595</td>
</tr>
<tr class="even">
<td style="text-align: right;">6342</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">55</td>
<td style="text-align: left;">452</td>
<td style="text-align: left;">Portal vein thrombosis</td>
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: left;">AMC IR</td>
<td style="text-align: left;">POST-DISCHARGE</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">49</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2015-06</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">3.891820</td>
<td style="text-align: right;">-1.5640423</td>
<td style="text-align: right;">4.007333</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">1.791759</td>
<td style="text-align: right;">2.449490</td>
<td style="text-align: right;">-1.3762923</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">-Inf</td>
</tr>
<tr class="odd">
<td style="text-align: right;">6412</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">66</td>
<td style="text-align: left;">453.40</td>
<td style="text-align: left;">DVT (deep venous thrombosis</td>
<td style="text-align: left;">Discharged/transferred to a Designated Cancer Center or Children’s Hospital</td>
<td style="text-align: left;">AMC IR</td>
<td style="text-align: left;">POST-DISCHARGE</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">48</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2015-06</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">3.871201</td>
<td style="text-align: right;">-1.6219192</td>
<td style="text-align: right;">4.189655</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">2.890372</td>
<td style="text-align: right;">4.242641</td>
<td style="text-align: right;">-0.9281432</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">-Inf</td>
</tr>
<tr class="even">
<td style="text-align: right;">6447</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">78</td>
<td style="text-align: left;">453.40</td>
<td style="text-align: left;">DVT (deep venous thrombosis</td>
<td style="text-align: left;">TRANSFER TO CANCER OR CHILDRENS</td>
<td style="text-align: left;">AMC IR</td>
<td style="text-align: left;">POST-DISCHARGE</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">67</td>
<td style="text-align: right;">68</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">73</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">33.33</td>
<td style="text-align: right;">31</td>
<td style="text-align: right;">31</td>
<td style="text-align: right;">31</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2015-07</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">4.290459</td>
<td style="text-align: right;">-0.5806394</td>
<td style="text-align: right;">4.356709</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">1.609438</td>
<td style="text-align: right;">2.236068</td>
<td style="text-align: right;">-1.4396935</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">-Inf</td>
</tr>
<tr class="odd">
<td style="text-align: right;">6479</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">55</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Discharged/transferred to a Designated Cancer Center or Children’s Hospital</td>
<td style="text-align: left;">AMC IR</td>
<td style="text-align: left;">POST-DISCHARGE</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">43</td>
<td style="text-align: right;">44</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">49</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">50.00</td>
<td style="text-align: right;">24</td>
<td style="text-align: right;">24</td>
<td style="text-align: right;">24</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2015-07</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">3.891820</td>
<td style="text-align: right;">-1.5640423</td>
<td style="text-align: right;">4.007333</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">1.791759</td>
<td style="text-align: right;">2.449490</td>
<td style="text-align: right;">-1.3762923</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">-Inf</td>
</tr>
<tr class="even">
<td style="text-align: right;">7512</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">80</td>
<td style="text-align: left;">244.9, 278.00, 415.19</td>
<td style="text-align: left;">Acquired hypothyroidism, Con</td>
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: left;">AMC IR</td>
<td style="text-align: left;">AMC PULM UNIT</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">56</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">100.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2016-02</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">4.025352</td>
<td style="text-align: right;">-1.2068485</td>
<td style="text-align: right;">4.382027</td>
<td style="text-align: right;">24</td>
<td style="text-align: right;">3.178054</td>
<td style="text-align: right;">4.898980</td>
<td style="text-align: right;">-0.7927620</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">8292</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">53</td>
<td style="text-align: left;">345.90, 625.8, 780.02</td>
<td style="text-align: left;">Adnexal mass, Anticholinergic</td>
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: left;">PRE-ADMISSION</td>
<td style="text-align: left;">POST-DISCHARGE</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">53</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2016-07</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">3.970292</td>
<td style="text-align: right;">-1.3505102</td>
<td style="text-align: right;">3.970292</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">-2.0785408</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">-Inf</td>
</tr>
<tr class="even">
<td style="text-align: right;">8779</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">191</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Suicide attempt by drug inges</td>
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: left;">AMC EMERGENCY</td>
<td style="text-align: left;">AMC MED SPEC UNIT</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">89</td>
<td style="text-align: right;">90</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">106</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">20.00</td>
<td style="text-align: right;">45</td>
<td style="text-align: right;">45</td>
<td style="text-align: right;">45</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">33.33</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2016-10</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">1.609438</td>
<td style="text-align: right;">2.236068</td>
<td style="text-align: right;">4.663439</td>
<td style="text-align: right;">0.1411328</td>
<td style="text-align: right;">5.252273</td>
<td style="text-align: right;">85</td>
<td style="text-align: right;">4.442651</td>
<td style="text-align: right;">9.219544</td>
<td style="text-align: right;">-0.1093570</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.0986123</td>
</tr>
<tr class="odd">
<td style="text-align: right;">9152</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">430</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Pneumonia of both lungs due t</td>
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: left;">AMC CARDIOTHORACIC ICU</td>
<td style="text-align: left;">AMC MED SPEC UNIT</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">229</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">167</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">100.00</td>
<td style="text-align: right;">54</td>
<td style="text-align: right;">70</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">100.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2017-01</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">1.609438</td>
<td style="text-align: right;">2.236068</td>
<td style="text-align: right;">5.117994</td>
<td style="text-align: right;">0.8201140</td>
<td style="text-align: right;">6.063785</td>
<td style="text-align: right;">263</td>
<td style="text-align: right;">5.572154</td>
<td style="text-align: right;">16.217275</td>
<td style="text-align: right;">0.6307354</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">2.1972246</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.6931472</td>
</tr>
<tr class="even">
<td style="text-align: right;">9398</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">91</td>
<td style="text-align: left;">977.9</td>
<td style="text-align: left;">Intentional drug overdose (HC</td>
<td style="text-align: left;">Court/Law Enforcement</td>
<td style="text-align: left;">AMC EMERGENCY</td>
<td style="text-align: left;">POST-DISCHARGE</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">33</td>
<td style="text-align: right;">31</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">85</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">66.67</td>
<td style="text-align: right;">23</td>
<td style="text-align: right;">32</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2017-02</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">4.442651</td>
<td style="text-align: right;">-0.2655695</td>
<td style="text-align: right;">4.510859</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">1.791759</td>
<td style="text-align: right;">2.449490</td>
<td style="text-align: right;">-1.3762923</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">0.6931472</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">-Inf</td>
</tr>
<tr class="odd">
<td style="text-align: right;">9793</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">74</td>
<td style="text-align: left;">453.40</td>
<td style="text-align: left;">DVT (deep venous thrombosis</td>
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: left;">AMC IR</td>
<td style="text-align: left;">AMC MED HLTH SVC UNIT</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">41</td>
<td style="text-align: right;">42</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">50.00</td>
<td style="text-align: right;">52</td>
<td style="text-align: right;">67</td>
<td style="text-align: right;">38</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2017-05</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">3.912023</td>
<td style="text-align: right;">-1.5080575</td>
<td style="text-align: right;">4.304065</td>
<td style="text-align: right;">24</td>
<td style="text-align: right;">3.178054</td>
<td style="text-align: right;">4.898980</td>
<td style="text-align: right;">-0.7927620</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="even">
<td style="text-align: right;">12029</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">61</td>
<td style="text-align: left;">453.42</td>
<td style="text-align: left;">DVT of lower extremity (deep v</td>
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: left;">AMC CARD PRE/POST PROC</td>
<td style="text-align: left;">POST-DISCHARGE</td>
<td style="text-align: right;">44</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">47</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">53</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">50.00</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2018-09</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">3.970292</td>
<td style="text-align: right;">-1.3505102</td>
<td style="text-align: right;">4.110874</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">2.079442</td>
<td style="text-align: right;">2.828427</td>
<td style="text-align: right;">-1.2697353</td>
<td style="text-align: right;">3.78419</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">-Inf</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>I don’t see any pattern. Let’s exclude them.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>Age_Range <span class="sc">==</span> <span class="st">"Negative Age"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And plot the counts.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot counts</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">x =</span> Age_Range, <span class="at">fill =</span> Age_Range)) <span class="sc">+</span></span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Count by Age Range"</span>,</span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Age Range"</span>,</span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Count"</span>,</span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"Age Range"</span>) <span class="sc">+</span></span>
<span id="cb100-9"><a href="#cb100-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Pastel2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-58-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>We have a sufficient size for each group and can use age range as a covariate.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-3-15" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-15-tab">
<p>This is just a different variable for age, where they divided the sample up by quartiles.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check counts</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(data_ex<span class="sc">$</span>Age_Quartile)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
14-42 43-56 57-66   67+ 
 1362  1635  1651  1757 </code></pre>
</div>
</div>
<p>We can use either age variables, it really shouldn’t matter unless there is some important clinical distinction that is driving up their divisions in <code>Age_Range</code>.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-3-16" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-16-tab">
<p><code>Admit_MonthYear</code> is a character. Let’s go ahead and convert to datetime using <code>lubridate</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert admit month year to datetime</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Admit_MonthYear =</span> <span class="fu">ym</span>(Admit_MonthYear))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we can plot how many patients were admitted each month.</p>
<p>We can also highlight the timeframe of the quality improvement iniative to visualize pre-, intra-, and post- periods.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the time periods to highlight</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>highlight_periods <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">start =</span> <span class="fu">as.Date</span>(<span class="fu">c</span>(<span class="st">"2015-04-01"</span>)),</span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">end =</span> <span class="fu">as.Date</span>(<span class="fu">c</span>(<span class="st">"2016-01-01"</span>))</span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize and plot the data</span></span>
<span id="cb104-8"><a href="#cb104-8" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb104-9"><a href="#cb104-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Admit_MonthYear) <span class="sc">|&gt;</span> </span>
<span id="cb104-10"><a href="#cb104-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb104-11"><a href="#cb104-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Admit_MonthYear, <span class="at">y =</span> count)) <span class="sc">+</span></span>
<span id="cb104-12"><a href="#cb104-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb104-13"><a href="#cb104-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb104-14"><a href="#cb104-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data =</span> highlight_periods, <span class="fu">aes</span>(<span class="at">xmin =</span> start, <span class="at">xmax =</span> end, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb104-15"><a href="#cb104-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb104-16"><a href="#cb104-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Admissions Over Time"</span>,</span>
<span id="cb104-17"><a href="#cb104-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit Date"</span>,</span>
<span id="cb104-18"><a href="#cb104-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Count"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-61-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>It does not appear that the number of patients admitted throughout the year really changed that drastically. I don’t think we will have to control for this.</p>
</div>
</div>
</div>
<section id="average-micu-los" class="level2">
<h2 class="anchored" data-anchor-id="average-micu-los">Average MICU LOS</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize and plot the data</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Admit_MonthYear) <span class="sc">|&gt;</span> </span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_Unit_LOS =</span> <span class="fu">mean</span>(Unit_LOS, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Admit_MonthYear, <span class="at">y =</span> avg_Unit_LOS)) <span class="sc">+</span></span>
<span id="cb105-6"><a href="#cb105-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb105-7"><a href="#cb105-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb105-8"><a href="#cb105-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data =</span> highlight_periods, <span class="fu">aes</span>(<span class="at">xmin =</span> start, <span class="at">xmax =</span> end, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb105-9"><a href="#cb105-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb105-10"><a href="#cb105-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Average MICU LOS over Time"</span>,</span>
<span id="cb105-11"><a href="#cb105-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit Date"</span>,</span>
<span id="cb105-12"><a href="#cb105-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Avg MICU LOS"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-62-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>It does not appear that <code>MICU_LOS</code> has decreased across any of the time periods.</p>
<p>This is including patients that did not receive PT, so of course there’s no difference.</p>
<section id="micu-los-over-time-by-mechanical-ventilation" class="level4">
<h4 class="anchored" data-anchor-id="micu-los-over-time-by-mechanical-ventilation">MICU LOS over Time by Mechanical Ventilation</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Dummy code MV status </span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>MV_YN <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(data_ex<span class="sc">$</span>MV_Total), <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Make it a factor for better plotting</span></span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">MV_YN =</span> <span class="fu">as.factor</span>(MV_YN))</span>
<span id="cb106-7"><a href="#cb106-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-8"><a href="#cb106-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize and plot the data</span></span>
<span id="cb106-9"><a href="#cb106-9" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb106-10"><a href="#cb106-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Admit_MonthYear, MV_YN) <span class="sc">|&gt;</span> </span>
<span id="cb106-11"><a href="#cb106-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_Unit_LOS =</span> <span class="fu">mean</span>(Unit_LOS, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<span id="cb106-12"><a href="#cb106-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Admit_MonthYear, <span class="at">y =</span> avg_Unit_LOS, <span class="at">color =</span> MV_YN, <span class="at">group =</span> MV_YN)) <span class="sc">+</span></span>
<span id="cb106-13"><a href="#cb106-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb106-14"><a href="#cb106-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb106-15"><a href="#cb106-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data =</span> highlight_periods, <span class="fu">aes</span>(<span class="at">xmin =</span> start, <span class="at">xmax =</span> end, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb106-16"><a href="#cb106-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb106-17"><a href="#cb106-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Average MICU LOS over Time by Mechanical Ventilation"</span>,</span>
<span id="cb106-18"><a href="#cb106-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit Date"</span>,</span>
<span id="cb106-19"><a href="#cb106-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Avg MICU LOS"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Admit_MonthYear'. You can override using
the `.groups` argument.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-63-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This shows that those who were mechanically ventilated had a higher MICU length of stay. This does not appear to have differed in relation to the QI iniative.</p>
<p>I am also including those that did not receive PT here, so that would explain the null finding.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize and plot the data</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Admit_MonthYear, MV_YN, PT_YESNO) <span class="sc">|&gt;</span> </span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_Unit_LOS =</span> <span class="fu">mean</span>(Unit_LOS, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Admit_MonthYear, <span class="at">y =</span> avg_Unit_LOS, <span class="at">color =</span> PT_YESNO)) <span class="sc">+</span></span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb108-7"><a href="#cb108-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">se =</span> F) <span class="sc">+</span></span>
<span id="cb108-8"><a href="#cb108-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb108-9"><a href="#cb108-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data =</span> highlight_periods, <span class="fu">aes</span>(<span class="at">xmin =</span> start, <span class="at">xmax =</span> end, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb108-10"><a href="#cb108-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb108-11"><a href="#cb108-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Average MICU LOS over Time by Mechanical Ventilation"</span>,</span>
<span id="cb108-12"><a href="#cb108-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit Date"</span>,</span>
<span id="cb108-13"><a href="#cb108-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Avg MICU LOS"</span>) <span class="sc">+</span></span>
<span id="cb108-14"><a href="#cb108-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>MV_YN)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Admit_MonthYear', 'MV_YN'. You can
override using the `.groups` argument.
`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The following aesthetics were dropped during statistical transformation:
colour.
ℹ This can happen when ggplot fails to infer the correct grouping structure in
  the data.
ℹ Did you forget to specify a `group` aesthetic or to convert a numerical
  variable into a factor?
The following aesthetics were dropped during statistical transformation:
colour.
ℹ This can happen when ggplot fails to infer the correct grouping structure in
  the data.
ℹ Did you forget to specify a `group` aesthetic or to convert a numerical
  variable into a factor?</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-64-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>I <em>think</em> this might show an interaction. For those on mechanical ventilation, they seemed to decrease in MICU LOS more if they received PT.</p>
<p>For those not on MV, the PT did not seem to change their average LOS.</p>
</section>
<section id="average-micu-los-over-time-by-physical-therapy" class="level4">
<h4 class="anchored" data-anchor-id="average-micu-los-over-time-by-physical-therapy">Average MICU LOS over Time by Physical Therapy</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make it a factor for better plotting</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">PT_YESNO =</span> <span class="fu">as.factor</span>(PT_YESNO))</span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize and plot the data</span></span>
<span id="cb111-6"><a href="#cb111-6" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb111-7"><a href="#cb111-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Admit_MonthYear, PT_YESNO) <span class="sc">|&gt;</span> </span>
<span id="cb111-8"><a href="#cb111-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_Unit_LOS =</span> <span class="fu">mean</span>(Unit_LOS, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<span id="cb111-9"><a href="#cb111-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Admit_MonthYear <span class="sc">&gt;</span> <span class="fu">as.Date</span>(<span class="st">"2012-01-01"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb111-10"><a href="#cb111-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Admit_MonthYear, <span class="at">y =</span> avg_Unit_LOS, <span class="at">color =</span> PT_YESNO, <span class="at">group =</span> PT_YESNO)) <span class="sc">+</span></span>
<span id="cb111-11"><a href="#cb111-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb111-12"><a href="#cb111-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb111-13"><a href="#cb111-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data =</span> highlight_periods, <span class="fu">aes</span>(<span class="at">xmin =</span> start, <span class="at">xmax =</span> end, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb111-14"><a href="#cb111-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb111-15"><a href="#cb111-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Average MICU LOS over Time by Physical Therapy"</span>,</span>
<span id="cb111-16"><a href="#cb111-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit Date"</span>,</span>
<span id="cb111-17"><a href="#cb111-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Avg MICU LOS"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Admit_MonthYear'. You can override using
the `.groups` argument.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-65-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize and plot the data</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Admit_MonthYear, PT_YESNO) <span class="sc">|&gt;</span> </span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_Unit_LOS =</span> <span class="fu">mean</span>(Unit_LOS, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Admit_MonthYear <span class="sc">&gt;</span> <span class="fu">as.Date</span>(<span class="st">"2012-01-01"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Admit_MonthYear, <span class="at">y =</span> avg_Unit_LOS, <span class="at">color =</span> PT_YESNO, <span class="at">group =</span> PT_YESNO)) <span class="sc">+</span></span>
<span id="cb113-7"><a href="#cb113-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb113-8"><a href="#cb113-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">se =</span> F) <span class="sc">+</span></span>
<span id="cb113-9"><a href="#cb113-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb113-10"><a href="#cb113-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data =</span> highlight_periods, <span class="fu">aes</span>(<span class="at">xmin =</span> start, <span class="at">xmax =</span> end, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb113-11"><a href="#cb113-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb113-12"><a href="#cb113-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Average MICU LOS over Time by Physical Therapy"</span>,</span>
<span id="cb113-13"><a href="#cb113-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit Date"</span>,</span>
<span id="cb113-14"><a href="#cb113-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Avg MICU LOS"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Admit_MonthYear'. You can override using
the `.groups` argument.
`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-66-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Interesting! It does look like average MICU length of stay decreased slighly immediately after the QI initiative. It also looks like it may be increasing slightly from then on.</p>
<p>That does appear that those received PT had a decrease before and after the iniative</p>
<p>But overall it looks like the QI may have successfuly decreased MICU LOS.</p>
</section>
<section id="fitting-with-splines" class="level4">
<h4 class="anchored" data-anchor-id="fitting-with-splines">Fitting with Splines</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(splines)</span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize and plot the data</span></span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Admit_MonthYear, PT_YESNO) <span class="sc">|&gt;</span> </span>
<span id="cb115-5"><a href="#cb115-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_Unit_LOS =</span> <span class="fu">mean</span>(Unit_LOS, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<span id="cb115-6"><a href="#cb115-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Admit_MonthYear <span class="sc">&gt;</span> <span class="fu">as.Date</span>(<span class="st">"2012-01-01"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb115-7"><a href="#cb115-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Admit_MonthYear, <span class="at">y =</span> avg_Unit_LOS, <span class="at">color =</span> PT_YESNO, <span class="at">group =</span> PT_YESNO)) <span class="sc">+</span></span>
<span id="cb115-8"><a href="#cb115-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb115-9"><a href="#cb115-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">formula =</span> y <span class="sc">~</span> <span class="fu">ns</span>(x, <span class="at">df =</span> <span class="dv">4</span>), <span class="at">se =</span> F) <span class="sc">+</span></span>
<span id="cb115-10"><a href="#cb115-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb115-11"><a href="#cb115-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data =</span> highlight_periods, <span class="fu">aes</span>(<span class="at">xmin =</span> start, <span class="at">xmax =</span> end, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb115-12"><a href="#cb115-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb115-13"><a href="#cb115-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Average MICU LOS over Time by Physical Therapy"</span>,</span>
<span id="cb115-14"><a href="#cb115-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit Date"</span>,</span>
<span id="cb115-15"><a href="#cb115-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Avg MICU LOS"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Admit_MonthYear'. You can override using
the `.groups` argument.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-67-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Looking just at those who received PT</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make it a factor for better plotting</span></span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">PT_YESNO =</span> <span class="fu">as.factor</span>(PT_YESNO))</span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-5"><a href="#cb117-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize and plot the data</span></span>
<span id="cb117-6"><a href="#cb117-6" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb117-7"><a href="#cb117-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Admit_MonthYear, PT_YESNO) <span class="sc">|&gt;</span> </span>
<span id="cb117-8"><a href="#cb117-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_Unit_LOS =</span> <span class="fu">mean</span>(Unit_LOS, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<span id="cb117-9"><a href="#cb117-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Admit_MonthYear <span class="sc">&gt;</span> <span class="fu">as.Date</span>(<span class="st">"2012-01-01"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb117-10"><a href="#cb117-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(PT_YESNO <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb117-11"><a href="#cb117-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Admit_MonthYear, <span class="at">y =</span> avg_Unit_LOS, <span class="at">group =</span> PT_YESNO)) <span class="sc">+</span></span>
<span id="cb117-12"><a href="#cb117-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb117-13"><a href="#cb117-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">se =</span> F) <span class="sc">+</span></span>
<span id="cb117-14"><a href="#cb117-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb117-15"><a href="#cb117-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data =</span> highlight_periods, <span class="fu">aes</span>(<span class="at">xmin =</span> start, <span class="at">xmax =</span> end, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb117-16"><a href="#cb117-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb117-17"><a href="#cb117-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Average MICU LOS over Time by Physical Therapy"</span>,</span>
<span id="cb117-18"><a href="#cb117-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit Date"</span>,</span>
<span id="cb117-19"><a href="#cb117-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Avg MICU LOS"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Admit_MonthYear'. You can override using
the `.groups` argument.
`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-68-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Fitting a loess curve, it does appear that for those that receive PT, they had a decrease in average MICU LOS during the intervention compared to before. It also appears that they are increasing in average MICU following the interention, but this may still be lower compared to the pre-intervention period.</p>
<p>:::</p>
</section>
</section>
</section>
<section id="main-goals" class="level1">
<h1>Main Goals</h1>
<section id="increase-frequency-of-pt-visits" class="level2">
<h2 class="anchored" data-anchor-id="increase-frequency-of-pt-visits">Increase Frequency of PT Visits</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize and plot the data</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Admit_MonthYear) <span class="sc">|&gt;</span> </span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_pct_therapy =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">PERCENT OF DAYS WITH THERAPY VISITS</span><span class="st">`</span>, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Admit_MonthYear, <span class="at">y =</span> avg_pct_therapy)) <span class="sc">+</span></span>
<span id="cb119-6"><a href="#cb119-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb119-7"><a href="#cb119-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb119-8"><a href="#cb119-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data =</span> highlight_periods, <span class="fu">aes</span>(<span class="at">xmin =</span> start, <span class="at">xmax =</span> end, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb119-9"><a href="#cb119-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb119-10"><a href="#cb119-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Average Percentage of Days with Physical Therapy Over Time"</span>,</span>
<span id="cb119-11"><a href="#cb119-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit Date"</span>,</span>
<span id="cb119-12"><a href="#cb119-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Average Days with Physical Therapy (%)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-69-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Interesting! They successfully and drastically increased the percentage of days that patients had physical therapy (roughly from 10-20% pre-iniative to 50-60% post iniative). This percentage did seem to drop off over time during the post- initiative period however, though it is still higher than it was pre-initiative (now roughly 30-40%).</p>
<section id="fit-with-loess" class="level4">
<h4 class="anchored" data-anchor-id="fit-with-loess">Fit with Loess</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize and plot the data</span></span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Admit_MonthYear) <span class="sc">|&gt;</span> </span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_pct_therapy =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">PERCENT OF DAYS WITH THERAPY VISITS</span><span class="st">`</span>, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Admit_MonthYear, <span class="at">y =</span> avg_pct_therapy)) <span class="sc">+</span></span>
<span id="cb120-6"><a href="#cb120-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb120-7"><a href="#cb120-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">se =</span> F) <span class="sc">+</span></span>
<span id="cb120-8"><a href="#cb120-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb120-9"><a href="#cb120-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data =</span> highlight_periods, <span class="fu">aes</span>(<span class="at">xmin =</span> start, <span class="at">xmax =</span> end, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb120-10"><a href="#cb120-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb120-11"><a href="#cb120-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Average Percentage of Days with Physical Therapy Over Time"</span>,</span>
<span id="cb120-12"><a href="#cb120-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit Date"</span>,</span>
<span id="cb120-13"><a href="#cb120-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Average Days with Physical Therapy (%)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-70-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="fit-with-splines" class="level4">
<h4 class="anchored" data-anchor-id="fit-with-splines">Fit with Splines</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize and plot the data</span></span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Admit_MonthYear) <span class="sc">|&gt;</span> </span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_pct_therapy =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">PERCENT OF DAYS WITH THERAPY VISITS</span><span class="st">`</span>, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Admit_MonthYear, <span class="at">y =</span> avg_pct_therapy)) <span class="sc">+</span></span>
<span id="cb122-6"><a href="#cb122-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb122-7"><a href="#cb122-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">formula =</span> y <span class="sc">~</span> <span class="fu">ns</span>(x, <span class="at">df =</span> <span class="dv">5</span>), <span class="at">se =</span> F) <span class="sc">+</span></span>
<span id="cb122-8"><a href="#cb122-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb122-9"><a href="#cb122-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data =</span> highlight_periods, <span class="fu">aes</span>(<span class="at">xmin =</span> start, <span class="at">xmax =</span> end, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb122-10"><a href="#cb122-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb122-11"><a href="#cb122-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Average Percentage of Days with Physical Therapy Over Time"</span>,</span>
<span id="cb122-12"><a href="#cb122-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit Date"</span>,</span>
<span id="cb122-13"><a href="#cb122-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Average Days with Physical Therapy (%)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-71-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="decrease-time-from-admit-to-therapy" class="level2">
<h2 class="anchored" data-anchor-id="decrease-time-from-admit-to-therapy">Decrease Time from Admit to Therapy</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize and plot the data</span></span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Admit_MonthYear) <span class="sc">|&gt;</span> </span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_ADMIT_TO_TREAT =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span>, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<span id="cb123-5"><a href="#cb123-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Admit_MonthYear, <span class="at">y =</span> avg_ADMIT_TO_TREAT)) <span class="sc">+</span></span>
<span id="cb123-6"><a href="#cb123-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb123-7"><a href="#cb123-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb123-8"><a href="#cb123-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data =</span> highlight_periods, <span class="fu">aes</span>(<span class="at">xmin =</span> start, <span class="at">xmax =</span> end, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb123-9"><a href="#cb123-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb123-10"><a href="#cb123-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fu">as.Date</span>(<span class="st">"2015-09-01"</span>), <span class="at">y =</span> <span class="cn">Inf</span>, </span>
<span id="cb123-11"><a href="#cb123-11" aria-hidden="true" tabindex="-1"></a>           <span class="at">label =</span> <span class="st">"QI-Initiative"</span>, <span class="at">color =</span> <span class="st">"skyblue2"</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">vjust =</span> <span class="fl">1.5</span>,) <span class="sc">+</span></span>
<span id="cb123-12"><a href="#cb123-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Time from Admit to Therapy over Time"</span>,</span>
<span id="cb123-13"><a href="#cb123-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit Date"</span>,</span>
<span id="cb123-14"><a href="#cb123-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Time from Admit to Therapy"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-72-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>They successfully decreased the time from a patient’s first admit to their first physical therapy session.</p>
<p>This means that patients were receiving PT sooner.</p>
<section id="plot-with-loess" class="level4">
<h4 class="anchored" data-anchor-id="plot-with-loess">Plot with Loess</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize and plot the data</span></span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Admit_MonthYear) <span class="sc">|&gt;</span> </span>
<span id="cb124-4"><a href="#cb124-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_ADMIT_TO_TREAT =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span>, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<span id="cb124-5"><a href="#cb124-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Admit_MonthYear, <span class="at">y =</span> avg_ADMIT_TO_TREAT)) <span class="sc">+</span></span>
<span id="cb124-6"><a href="#cb124-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb124-7"><a href="#cb124-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">se =</span> F) <span class="sc">+</span></span>
<span id="cb124-8"><a href="#cb124-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb124-9"><a href="#cb124-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data =</span> highlight_periods, <span class="fu">aes</span>(<span class="at">xmin =</span> start, <span class="at">xmax =</span> end, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb124-10"><a href="#cb124-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb124-11"><a href="#cb124-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fu">as.Date</span>(<span class="st">"2015-09-01"</span>), <span class="at">y =</span> <span class="cn">Inf</span>, </span>
<span id="cb124-12"><a href="#cb124-12" aria-hidden="true" tabindex="-1"></a>           <span class="at">label =</span> <span class="st">"QI-Initiative"</span>, <span class="at">color =</span> <span class="st">"skyblue2"</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">vjust =</span> <span class="fl">1.5</span>,) <span class="sc">+</span></span>
<span id="cb124-13"><a href="#cb124-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Time from Admit to Therapy over Time"</span>,</span>
<span id="cb124-14"><a href="#cb124-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit Date"</span>,</span>
<span id="cb124-15"><a href="#cb124-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Time from Admit to Therapy"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-73-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Yeah looks crummier with loess, will likely delete.</p>
</section>
</section>
<section id="increase-percentage-of-admissions-receiving-physical-therapy" class="level2">
<h2 class="anchored" data-anchor-id="increase-percentage-of-admissions-receiving-physical-therapy">Increase Percentage of Admissions Receiving Physical Therapy</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize and calculate percentages</span></span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a>summary_data <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Admit_MonthYear, PT_YESNO) <span class="sc">|&gt;</span> </span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb126-5"><a href="#cb126-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_count =</span> <span class="fu">sum</span>(count)) <span class="sc">|&gt;</span> </span>
<span id="cb126-6"><a href="#cb126-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb126-7"><a href="#cb126-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percentage =</span> (count <span class="sc">/</span> total_count) <span class="sc">*</span> <span class="dv">100</span>) <span class="sc">|&gt;</span> </span>
<span id="cb126-8"><a href="#cb126-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(PT_YESNO <span class="sc">==</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Admit_MonthYear'. You can override using
the `.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the data</span></span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(summary_data, <span class="fu">aes</span>(<span class="at">x =</span> Admit_MonthYear, <span class="at">y =</span> percentage)) <span class="sc">+</span></span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb128-4"><a href="#cb128-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb128-5"><a href="#cb128-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data =</span> highlight_periods, <span class="fu">aes</span>(<span class="at">xmin =</span> start, <span class="at">xmax =</span> end, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb128-6"><a href="#cb128-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb128-7"><a href="#cb128-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fu">as.Date</span>(<span class="st">"2015-09-01"</span>), <span class="at">y =</span> <span class="cn">Inf</span>, </span>
<span id="cb128-8"><a href="#cb128-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">label =</span> <span class="st">"QI-Initiative"</span>, <span class="at">color =</span> <span class="st">"skyblue2"</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">vjust =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb128-9"><a href="#cb128-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Percentage of Admissions Receiving Physical Therapy"</span>,</span>
<span id="cb128-10"><a href="#cb128-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit Date"</span>,</span>
<span id="cb128-11"><a href="#cb128-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Percentage"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-74-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>They also successfully increased the percentage of patients receiving PT from ~40% pre-initiative to ~80% during the initiative. This percentage then decreases to ~70% post-initiative.</p>
<p>::::</p>
</section>
</section>
<section id="variable-creation" class="level1">
<h1>Variable Creation</h1>
<p>Here we will create any variables necessary for our analysis</p>
<section id="mechanical-ventilation-1" class="level2">
<h2 class="anchored" data-anchor-id="mechanical-ventilation-1">Mechanical Ventilation</h2>
<p>The researcher expressed that patients would be stratified on Mechanical ventilation v. NO mechanical ventilation. However, I do not see this variable. Let’s go ahead and create it, assuming that patients with NA for <code>MV_TOTAL</code> were simply never on mechanical ventilation.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Dummy code MV status </span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>MV_YN <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(data_ex<span class="sc">$</span>MV_Total), <span class="dv">0</span>, <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s check that worked as intended.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter down to variables of interest to verify dummy coding worked</span></span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a>check <span class="ot">&lt;-</span> data_ex <span class="sc">%&gt;%</span></span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, MV_Total, MV_YN)</span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-5"><a href="#cb130-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Pretty print</span></span>
<span id="cb130-6"><a href="#cb130-6" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(check), <span class="at">format =</span> <span class="st">"html"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb130-7"><a href="#cb130-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"condensed"</span>, <span class="st">"stripe"</span>, <span class="st">"hover"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-condensed table-striped table-hover caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MV_Total</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MV_YN</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">5</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: right;">8</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">10</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Looks good.</p>
</section>
<section id="qi-initiative-time-period" class="level2">
<h2 class="anchored" data-anchor-id="qi-initiative-time-period">QI-Initiative Time Period</h2>
<p>Let’s group participants into the time period that they were present during the initiative for.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create new variable based on QI initiative time period.</span></span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">initiative =</span> <span class="fu">ifelse</span>(Admit_MonthYear <span class="sc">&lt;</span> <span class="fu">as.Date</span>(<span class="st">"2015-04-01"</span>), <span class="st">"Pre"</span>,</span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">ifelse</span>(Admit_MonthYear <span class="sc">&gt;</span> <span class="fu">as.Date</span>(<span class="st">"2015-12-01"</span>), <span class="st">"Post"</span>, <span class="st">"During"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s double check we did that right.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check counts</span></span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(data_ex<span class="sc">$</span>initiative)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
During   Post    Pre 
   656   2860   2889 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Double check assigning</span></span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, Admit_MonthYear, initiative) <span class="sc">|&gt;</span> </span>
<span id="cb134-4"><a href="#cb134-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Admit_MonthYear <span class="sc">&lt;</span> <span class="fu">as.Date</span>(<span class="st">"2015-04-01"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb134-5"><a href="#cb134-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Admit_MonthYear)) <span class="sc">|&gt;</span> </span>
<span id="cb134-6"><a href="#cb134-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">|&gt;</span> </span>
<span id="cb134-7"><a href="#cb134-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pretty_print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Admit_MonthYear</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">initiative</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">5759</td>
<td style="text-align: left;">2015-03-01</td>
<td style="text-align: left;">Pre</td>
</tr>
<tr class="even">
<td style="text-align: right;">5760</td>
<td style="text-align: left;">2015-03-01</td>
<td style="text-align: left;">Pre</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5761</td>
<td style="text-align: left;">2015-03-01</td>
<td style="text-align: left;">Pre</td>
</tr>
<tr class="even">
<td style="text-align: right;">5763</td>
<td style="text-align: left;">2015-03-01</td>
<td style="text-align: left;">Pre</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5765</td>
<td style="text-align: left;">2015-03-01</td>
<td style="text-align: left;">Pre</td>
</tr>
<tr class="even">
<td style="text-align: right;">5767</td>
<td style="text-align: left;">2015-03-01</td>
<td style="text-align: left;">Pre</td>
</tr>
</tbody>
</table>


</div>
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Double check assigning</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, Admit_MonthYear, initiative) <span class="sc">|&gt;</span> </span>
<span id="cb135-4"><a href="#cb135-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Admit_MonthYear <span class="sc">&gt;</span> <span class="fu">as.Date</span>(<span class="st">"2015-04-01"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb135-5"><a href="#cb135-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Admit_MonthYear) <span class="sc">|&gt;</span> </span>
<span id="cb135-6"><a href="#cb135-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">|&gt;</span> </span>
<span id="cb135-7"><a href="#cb135-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pretty_print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Admit_MonthYear</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">initiative</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">6094</td>
<td style="text-align: left;">2015-05-01</td>
<td style="text-align: left;">During</td>
</tr>
<tr class="even">
<td style="text-align: right;">6096</td>
<td style="text-align: left;">2015-05-01</td>
<td style="text-align: left;">During</td>
</tr>
<tr class="odd">
<td style="text-align: right;">6099</td>
<td style="text-align: left;">2015-05-01</td>
<td style="text-align: left;">During</td>
</tr>
<tr class="even">
<td style="text-align: right;">6100</td>
<td style="text-align: left;">2015-05-01</td>
<td style="text-align: left;">During</td>
</tr>
<tr class="odd">
<td style="text-align: right;">6105</td>
<td style="text-align: left;">2015-05-01</td>
<td style="text-align: left;">During</td>
</tr>
<tr class="even">
<td style="text-align: right;">6106</td>
<td style="text-align: left;">2015-05-01</td>
<td style="text-align: left;">During</td>
</tr>
</tbody>
</table>


</div>
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Double check assigning</span></span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, Admit_MonthYear, initiative) <span class="sc">|&gt;</span> </span>
<span id="cb136-4"><a href="#cb136-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Admit_MonthYear <span class="sc">&gt;=</span> <span class="fu">as.Date</span>(<span class="st">"2015-12-01"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb136-5"><a href="#cb136-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Admit_MonthYear) <span class="sc">|&gt;</span> </span>
<span id="cb136-6"><a href="#cb136-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">|&gt;</span> </span>
<span id="cb136-7"><a href="#cb136-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pretty_print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Admit_MonthYear</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">initiative</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">7167</td>
<td style="text-align: left;">2015-12-01</td>
<td style="text-align: left;">During</td>
</tr>
<tr class="even">
<td style="text-align: right;">7169</td>
<td style="text-align: left;">2015-12-01</td>
<td style="text-align: left;">During</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7171</td>
<td style="text-align: left;">2015-12-01</td>
<td style="text-align: left;">During</td>
</tr>
<tr class="even">
<td style="text-align: right;">7172</td>
<td style="text-align: left;">2015-12-01</td>
<td style="text-align: left;">During</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7174</td>
<td style="text-align: left;">2015-12-01</td>
<td style="text-align: left;">During</td>
</tr>
<tr class="even">
<td style="text-align: right;">7176</td>
<td style="text-align: left;">2015-12-01</td>
<td style="text-align: left;">During</td>
</tr>
</tbody>
</table>


</div>
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Double check assigning</span></span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, Admit_MonthYear, initiative) <span class="sc">|&gt;</span> </span>
<span id="cb137-4"><a href="#cb137-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Admit_MonthYear <span class="sc">&gt;</span> <span class="fu">as.Date</span>(<span class="st">"2015-12-01"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb137-5"><a href="#cb137-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Admit_MonthYear) <span class="sc">|&gt;</span> </span>
<span id="cb137-6"><a href="#cb137-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">|&gt;</span> </span>
<span id="cb137-7"><a href="#cb137-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pretty_print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Admit_MonthYear</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">initiative</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">7324</td>
<td style="text-align: left;">2016-01-01</td>
<td style="text-align: left;">Post</td>
</tr>
<tr class="even">
<td style="text-align: right;">7331</td>
<td style="text-align: left;">2016-01-01</td>
<td style="text-align: left;">Post</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7336</td>
<td style="text-align: left;">2016-01-01</td>
<td style="text-align: left;">Post</td>
</tr>
<tr class="even">
<td style="text-align: right;">7339</td>
<td style="text-align: left;">2016-01-01</td>
<td style="text-align: left;">Post</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7343</td>
<td style="text-align: left;">2016-01-01</td>
<td style="text-align: left;">Post</td>
</tr>
<tr class="even">
<td style="text-align: right;">7345</td>
<td style="text-align: left;">2016-01-01</td>
<td style="text-align: left;">Post</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Looks good.</p>
<section id="some-graphing" class="level4">
<h4 class="anchored" data-anchor-id="some-graphing">Some Graphing</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">initiative =</span> <span class="fu">as.factor</span>(initiative)) <span class="sc">|&gt;</span> </span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">initiative =</span> <span class="fu">relevel</span>(initiative, <span class="at">ref =</span> <span class="st">"Pre"</span>))</span>
<span id="cb138-4"><a href="#cb138-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-5"><a href="#cb138-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">x =</span> PT_YESNO, <span class="at">y =</span> Unit_LOS_log, <span class="at">fill =</span> initiative)) <span class="sc">+</span></span>
<span id="cb138-6"><a href="#cb138-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb138-7"><a href="#cb138-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb138-8"><a href="#cb138-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Pastel2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-79-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This shows that MICU LOS decreased in the during and post QI initiative periods compared to the pre-iniatitive period.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(PT_YESNO <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> initiative, <span class="at">y =</span> Unit_LOS_log, <span class="at">fill =</span> initiative)) <span class="sc">+</span></span>
<span id="cb139-4"><a href="#cb139-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb139-5"><a href="#cb139-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb139-6"><a href="#cb139-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Pastel2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-80-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(PT_YESNO <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb140-3"><a href="#cb140-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> initiative, <span class="at">y =</span> Unit_LOS_log, <span class="at">fill =</span> initiative)) <span class="sc">+</span></span>
<span id="cb140-4"><a href="#cb140-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb140-5"><a href="#cb140-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb140-6"><a href="#cb140-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Pastel2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-81-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>There is an interaction here between PT and unit LOS and initiative.</p>
<p>In other words, you HAVE to filter based on PT</p>
</section>
<section id="mv-total" class="level4">
<h4 class="anchored" data-anchor-id="mv-total">MV Total</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">x =</span> PT_YESNO, <span class="at">y =</span> MV_Total_log, <span class="at">fill =</span> initiative)) <span class="sc">+</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Pastel2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3149 rows containing non-finite outside the scale range
(`stat_boxplot()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-82-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="bonus" class="level1">
<h1>Bonus</h1>
<section id="check-for-repeat-admissions" class="level2">
<h2 class="anchored" data-anchor-id="check-for-repeat-admissions">Check for Repeat Admissions</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check for repeate admissions</span></span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(data_ex<span class="sc">$</span>id))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6405</code></pre>
</div>
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(data_ex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6405   40</code></pre>
</div>
</div>
<p>The number of unique patient id’s is the same number as the number of rows in our data set.</p>
<p>So we do not have repeate admissions in this data set and do not need to account for repeated measures! (We meet the assumption of independent observations)</p>
<p>:::</p>
</section>
</section>
<section id="table-1" class="level1">
<h1>Table 1</h1>
</section>
<section id="correlation-matrix" class="level1">
<h1>Correlation Matrix</h1>
</section>
<section id="to-do" class="level1">
<h1>To Do</h1>
<p>Run Correlation matrix</p>
<p>Make Table 1</p>
<p>Plot disjointed lm’s across each time period</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>